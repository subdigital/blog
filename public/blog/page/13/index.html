
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
    Fickle Bits
  </title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/blog/page/13/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="http://appsites.heroku.com/giggletouch">Giggle Touch for
    iOS</a></li>
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/now-you-have-no-excuse-not-to-know-jquery/">Now You Have No Excuse Not to Know jQuery</a></h1>
    
    
      <p class="meta">




<time datetime="2008-09-29 00:00:00 -0500" pubdate  updated >Sep 29<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m not the <a href="http://www.hanselman.com/blog/jQuerytoshipwithASPNETMVCandVisualStudio.aspx" target="_blank">first</a> <a href="http://baley.codebetter.com/blogs/kyle.baley/archive/2008/09/28/asp-net-mvc-and-jquery-can-now-produce-legitimate-offspring.aspx" target="_blank">person</a> to <a href="http://blog.wekeroad.com/blog/jquery-and-visual-studio-bff/" target="_blank">report this</a>, but Scott Guthrie recently announced that <a href="http://weblogs.asp.net/scottgu/archive/2008/09/28/jquery-and-microsoft.aspx" target="_blank">jQuery will ship with Visual Studio 10</a>.&nbsp; <strong>This is huge news</strong>.&nbsp; When I talk to an audience about javascript, most people I talk to have never used a javascript library.&nbsp; Now I&#8217;m excited to have the ability to talk at length about jQuery and not have people raise their eyebrows at me and tell me that they hate javascript.</p>


<p> <p>Recently at the ASP Insiders Summit I asked how many people actually <em>like</em> coding in javascript.&nbsp; About 6 people (out of 30) raised their hands.&nbsp; I then asked, &#8220;How many of you use jQuery?&#8221;&nbsp; The same 6 kept their hands in the air.&nbsp; Postulate what you want, this can either mean:</p> <blockquote> <p>jQuery makes you love javascript again.</p></blockquote> <p>or&#8230;</p> <blockquote> <p>Those who love javascript, choose jQuery.</p></blockquote> <p>Though I won&#8217;t laugh in your face, <a href="http://graysmatter.codivation.com/PermaLink,guid,f65b3bd2-d56b-4985-8102-a89b60e5fb3f.aspx" target="_blank">like some</a> :), but I will gently suggest that if you aren&#8217;t yet familiar with jQuery, <strong>now is the time to learn</strong>.&nbsp; I can recommend <a href="http://www.amazon.com/jQuery-Action-Bear-Bibeault/dp/1933988355" target="_blank">jQuery in Action</a> if you&#8217;re serious about it, but a simple <a href="http://www.google.com/search?hl=en&amp;safe=active&amp;rlz=1C1GGLS_enUS291&amp;q=learn+jquery&amp;btnG=Search" target="_blank">Google search</a> will get you most of what you need.</p> <p>The other reason why this is big news, is that soon you&#8217;ll be able to open up product support issues with Microsoft about jQuery.&nbsp; Let that sink in for a second.&nbsp; An open source project, under the MIT license, will be fully supported by Microsoft.</p> <p>I applaud Microsoft for making this decision.&nbsp; It&#8217;s not your typical Microsoft anymore.</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/09/now-you-have-no-excuse-not-to-know-jquery/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/ike-is-gone-were-okay/">Ike Is Gone, We&#8217;re Okay</a></h1>
    
    
      <p class="meta">




<time datetime="2008-09-15 00:00:00 -0500" pubdate  updated >Sep 15<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Thanks to all who checked in with me during hurricane Ike.&nbsp; My family and I are okay, and we&#8217;re now in Dallas awaiting restoration of power.&nbsp; During the storm I still had Edge connectivity on my iPhone, so I was checking local tweets with Twinkle, and it was very interesting to see what folks within 10 miles of me were saying.&nbsp; What a cool feature.&nbsp; </p>


<p> <p>As for damage, our house is fine.&nbsp; Luckily, all we lost was our fence!&nbsp; Some houses weren&#8217;t so lucky.</p> <p>Here are some pics that I took with my phone:</p> <p><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke001.jpg"><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke006.jpg"><img src="/images/HurricaneIke006_thumb.jpg" alt="Hurricane Ike 006"  border="0" /></a><img src="/images/HurricaneIke001_thumb.jpg" alt="Hurricane Ike 001"  border="0" /></a><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke004.jpg"><img src="/images/HurricaneIke004_thumb.jpg" alt="Hurricane Ike 004"  border="0" /></a><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke005.jpg"><img src="/images/HurricaneIke005_thumb.jpg" alt="Hurricane Ike 005"  border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke009.jpg"><img src="/images/HurricaneIke009_thumb.jpg" alt="Hurricane Ike 009"  border="0" /><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke010.jpg"><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke010_3.jpg"><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke.jpg"><img src="/images/HurricaneIke_thumb.jpg" alt="Hurricane Ike"  border="0" /></a></a><img src="/images/HurricaneIke010_thumb.jpg" alt="Hurricane Ike 010"  border="0" /><a href="http://flux88.com/uploads/IkeisGoneWereOkay_79A5/HurricaneIke002.jpg"><img src="/images/HurricaneIke002_thumb.jpg" alt="Hurricane Ike 002"  border="0" /></a></a></a> </p> <p>My wife took some pictures with a much better camera, so I&#8217;ll link to those soon.&nbsp; Time to clean up!</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/09/ike-is-gone-were-okay/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/using-extension-methods-to-clean-up-tests/">Using Extension Methods to Clean Up Tests</a></h1>
    
    
      <p class="meta">




<time datetime="2008-09-10 00:00:00 -0500" pubdate  updated >Sep 10<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>A lot of unit tests for ASP.NET MVC projects will look a lot like this: </p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>[Test]public void list_action_should_render_default_view(){  var controller = CreateProductController(); //defined elsewhere var result = controller.List(); Assert.That(result, Is.TypeOf(typeof(ViewResult));  var viewResult = (ViewResult)result;    Assert.That(viewResult.ViewName, Is.EqualTo(string.Empty));}</div></code></pre></td></tr></table></div></figure></div>


<p>We basically create the controller, invoke the desired action, and verify that the result is of type ViewResult, and that the name of the view is an empty string.&nbsp; <p>This test isn&#8217;t necessarily all bad.&nbsp; It is easy to read and consists of only 5 lines of code.&nbsp; Here&#8217;s another test, this time testing that an action redirects the user:</p><p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>[Test]public void login_action_should_redirect_to_home_index_on_successful_login(){  string username = "bob";    string password = "pass123";    var loginService = MockRepository.GenerateStub&lt;iloginservice>(); loginService.Stub(x =&gt; x.Authenticate(username, password).Return(true);  var controller = new AccountController(loginService);   var result = controller.Login(username, password);  Assert.That(result, Is.TypeOf(typeof(RedirectToRouteResult)));  var redirectResult = (RedirectToRouteResult)result; Assert.That(result.RouteValues["controller"], Is.EqualTo("home"));  Assert.That(result.RouteValues["action"], Is.EqualTo("index"));}</div></code></pre></td></tr></table></div></figure></div>
<p></p><p>Notice the duplication?&nbsp; When the tests are all starting to look like this, your spidey-sense should be tingling.&nbsp; The DRY principle (Don&#8217;t Repeat Yourself) applies to your unit tests as well!</p><p>Let&#8217;s see if we can do better.&nbsp; I&#8217;m just going to type some code that I <em>wish</em> I had:</p><p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>controller.List().ShouldRenderDefaultView();</div></code></pre></td></tr></table></div></figure></div>
<p></p><p>That&#8217;s a lot more concise!&nbsp; It reads very well, and can easily eliminate 3-4 lines of repetitive test code.&nbsp; With .NET 3.5, we were given Extension Methods.&nbsp; If you aren&#8217;t yet aware, extension methods allow us to bolt-on methods onto existing types.&nbsp; In this case, we want to add a method to the return value of our List() action, which is ActionResult.</p><p>I created a static class called TestHelperExtensions.cs, and in it, placed our new method:</p><p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public static void ShouldRenderDefaultView(this ActionResult result){    Assert.That(result, Is.TypeOf(ViewResult)); Assert.That(((ViewResult)result).ViewName, Is.EqualTo(string.Empty));}</div></code></pre></td></tr></table></div></figure></div>
<p>That&#8217;s it?&nbsp; That was easy.&nbsp; Let&#8217;s extend this to support rendering a view of any name&#8230;.</p><p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public static void ShouldRenderView(this ActionResult result, string viewName){  Assert.That(result, Is.TypeOf(ViewResult)); Assert.That(((ViewResult)result).ViewName, Is.EqualTo(viewName));}public static void ShouldRenderDefaultView(this ActionResult result){ ShouldRenderView(result, string.Empty);}</div></code></pre></td></tr></table></div></figure></div>
<p>We can extend this idea further and capture the redirect family of asserts into another extension method:</p><p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>controller.Login(username, password).ShouldRedirectTo("home", "index");//we should also support custom route valuesproductController.Save(...).ShouldRedirectTo("products", "show").WithRouteValue("id", 5);</div></code></pre></td></tr></table></div></figure></div>
<p></p><p>This can be implemented similarly&#8230; <p></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>//supports just passing in an actionpublic static RedirectToRouteResult ShouldRedirectTo(this ActionResult result, string action){   return ShouldRedirectTo(result, null, action);}public static RedirectToRouteResult ShouldRedirectTo(this ActionResult result, string controller, string action){    Assert.That(result, Is.TypeOf(typeof(RedirectToRouteResult)), "Should have redirected");    var redirectResult = (RedirectToRouteResult) result;    WithRouteValue(redirectResult, "Controller", controller);   WithRouteValue(redirectResult, "Action", action);   return redirectResult;}public static RedirectToRouteResult WithRouteValue(this RedirectToRouteResult result, string key, object value){ Assert.That(result.Values[key], Is.EqualTo(value)); return result;}</div></code></pre></td></tr></table></div></figure></div>
<p></p><p>This supports basic redirects with just an action, an action and a controller, and arbitrary route values that we need to test as well.</p><p>Leveraging simple extension methods to make your tests more concise and readable can really help reduce the overall weight of your tests (especially if you want to change behavior later).&nbsp; This stands as an excellent reminder to write high-quality test code, just as you would for production code.</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/09/using-extension-methods-to-clean-up-tests/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/meet-laribee-this-friday-in-houston/">Meet Laribee This Friday in Houston</a></h1>
    
    
      <p class="meta">




<time datetime="2008-09-02 00:00:00 -0500" pubdate  updated >Sep 2<span>nd</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>The title says it all folks.&nbsp; <a href="http://codebetter.com/blogs/david_laribee/" target="_blank">David Laribee</a> of Code Better and <a href="http://laribee.com/blog/2007/04/10/altnet/" target="_blank">ALT.NET fame</a> is in town.&nbsp; Come meet us for drinks this Friday (September 5th) at 7pm.&nbsp; We&#8217;re going to meet up at <a href="http://www.mi-luna.com/" target="_blank">Mi Luna</a> for some Spanish tapas and string margaritas.&nbsp; There will be plenty of geek-discussion &amp; excellent food/drinks.</p>


<p> <p>Mi Luna is in Rice Village.&nbsp; Here&#8217;s a map:</p><iframe marginwidth="0" marginheight="0" src="http://maps.google.com/maps?q=2441+University+Blvd+Houston,+TX+77005&amp;ie=UTF8&amp;oe=utf-8&amp;client=firefox-a&amp;ll=29.725477,-95.411367&amp;spn=0.009132,0.013175&amp;t=h&amp;z=14&amp;iwloc=addr&amp;output=embed&amp;s=AARTsJqtWWNK600TtjjnlfxO3cfGCYJ7nw" frameborder="0" width="425" scrolling="no" height="350"></iframe><br><small><a style="color: #0000ff; text-align: left" href="http://maps.google.com/maps?q=2441+University+Blvd+Houston,+TX+77005&amp;ie=UTF8&amp;oe=utf-8&amp;client=firefox-a&amp;ll=29.725477,-95.411367&amp;spn=0.009132,0.013175&amp;t=h&amp;z=14&amp;iwloc=addr&amp;source=embed">View Larger Map</a></small><p>&nbsp;</p> <p>If you&#8217;re going to be there, let us know in the comments!</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/09/meet-laribee-this-friday-in-houston/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/08/asp-net-mvc-preview-5-is-now-available/">ASP.NET MVC Preview 5 Is Now Available</a></h1>
    
    
      <p class="meta">




<time datetime="2008-08-29 00:00:00 -0500" pubdate  updated >Aug 29<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I was telling people in <a href="http://http://flux88.com/NETDojoAugustsALTNETGeekDinner.aspx" target="_blank">yesterday&#8217;s .NET Dojo class</a> that we should expect preview 5 any time now.&nbsp; It looks like it was released as I was saying that yesterday!</p>


<p> <p>I haven&#8217;t yet downloaded it to convert my projects over, but the release note highlights are:</p> <ul> <li><em>Html Helpers need to look into ModelState to get attempted value </em> <li><em>Add a convenience overload for Html.ActionLink </em> <li><em>Need friendly exception for UpdateModel type conversion errors. </em> <li><em>UpdateModel needs to report a message when a property setter throws an exception </em></li></ul> <p>Grab it here:&nbsp; <a title="http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=16775#ReleaseFiles" href="http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=16775#ReleaseFiles">http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=16775#ReleaseFiles</a></p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/08/asp-net-mvc-preview-5-is-now-available/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/08/net-dojo-augusts-alt-net-geek-dinner/">.NET Dojo & August&#8217;s ALT.NET Geek Dinner</a></h1>
    
    
      <p class="meta">




<time datetime="2008-08-26 00:00:00 -0500" pubdate  updated >Aug 26<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><em>Are you ready for the Dojo?</em></p>


<p><img src="/images/flyingsidekick.jpg" alt="photo by kaibara87 "  border="0" /><br><em>(</em><a href="http://www.flickr.com/photos/kaibara/247465109/" target="_blank"><em>picture source</em></a><em>)</em></p>


<p>Whew!&nbsp; I’ve been busy lately!&nbsp; I’ve been wrapping up the content for the .NET Dojo class this Thursday (cutting it close, I know!).&nbsp; If you’re going to the class, you can get a jump start by grabbing all of the lab material at the google code site here:&nbsp; <a href="http://code.google.com/p/dojoblog">http://code.google.com/p/dojoblog</a>.</p>


<p>I created this site, called DojoBlog to reflect the sample project it contains, to allow attendees and anyone else interested to download the code and play with it.&nbsp; Keep in mind that the code may change last minute, so do a fresh update just before coming to class.</p>


<p>To download it you’ll need a subversion client, such as <a href="http://tortoisesvn.net/" target="_blank">TortoiseSVN</a>.&nbsp; The direct link to the repository is <a href="about:svn%20checkout%20http://dojoblog.googlecode.com/svn/trunk/" target="_blank">here</a>.</p>


<p>If you don’t have/want a subversion client, don’t worry.&nbsp; We’ll have the material ready on some USB sticks to circle around.&nbsp; Looking forward to seeing some of you there?&nbsp; <strong>Remember, it’s this Thursday, from 1pm to 4pm.</strong></p>


<p><b>UPDATE: I zipped up the material and <a href="http://code.google.com/p/dojoblog/downloads/list">released it</a> on the google code site.</b><br><strong></strong></p>


<p><img src="/images/pizza.jpg" alt="Photo by fooey"  border="0" /><br><em>(</em><a href="http://www.flickr.com/photos/fooey/414244292/" target="_blank"><em>picture source</em></a><em>)</em><font color="#0000ff"></font></p>


<p><font color="#0000ff"></font>And after that, why not attend our August ALT.NET Geek Dinner?&nbsp; We’re holding it immediately after the .NET Dojo, so feel free to drop by, eat some good pizza, drink some good beer, and geek out on random topics.</p>


<p>Our venue is still <a href="http://www.starpizza.net/" target="_blank">Star Pizza</a>, located at 2111 Norfolk (<a href="http://maps.google.com/maps?f=q&amp;hl=en&amp;geocode=&amp;q=2111+Norfolk+St,+Houston,+TX+77098&amp;sll=37.0625,-95.677068&amp;sspn=42.987658,59.853516&amp;ie=UTF8&amp;ll=29.733079,-95.411196&amp;spn=0.011552,0.014613&amp;z=16&amp;iwloc=addr" target="_blank">map</a>).&nbsp; <strong>The dinner starts at 6pm and ends around 8:30pm.</strong>&nbsp; This month, we’ll discuss:</p>


<ul><li>Code Clarity / Fluent Interfaces / Code without comments</li><li>Model View Presenter pattern</li><li>Continuous Integration</li></ul>


<p>Will you be there?&nbsp; Let us know in the comments!</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/08/net-dojo-augusts-alt-net-geek-dinner/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/a-routing-evolution/">A Routing Evolution</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-30 00:00:00 -0500" pubdate  updated >Jul 30<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><a href="http://flux88.com/uploads/ARoutingEvolution_12D7B/216624forkinroadposters.jpg"><img src="/images/216624forkinroadposters_thumb.jpg" alt="216624fork-in-road-posters"  border="0" /></a> When the ASP.NET MVC framework was first released, two open source projects sprung up immediately:&nbsp; <a href="http://mvccontrib.org" target="_blank">MVCContrib</a> and <a href="http://codecampserver.org" target="_blank">Code Camp Server</a>.&nbsp; I quickly jumped on Code Camp Server as a lead contributor because I wanted to get some hands on experience on the ASP.NET MVC Framework.</p>


<p> <p>In the first example you see when you install the new MVC templates, you see that the default routing rules are defined like this:</p></p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>{controller}/{action}/{id}</div></code></pre></td></tr></table></div></figure></div>


<p>This works well for a lot of applications, where you&#8217;d end up with URLs like:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>/customers/list&lt;br>/customers/delete/12&lt;br>/products/show/5&lt;br>/products/edit/5</div></code></pre></td></tr></table></div></figure></div>


<p>It&#8217;s quite easy to see how each of those map to the components of the route.&nbsp; In Code Camp Server, we wanted the system to support many code camps, so your URL will look like this:</p>


<p>/austinCodeCamp/details<br>/houstonTechFest/directions</p>


<p>So we ended up with a default route that looked like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("conference", "{conferenceKey}/{action}", new { controller="conference", action="details });</div></code></pre></td></tr></table></div></figure></div>


<p>Here we omitted the controller as it was <em>implied</em>.&nbsp; Everything was placed on ConferenceController, and it worked pretty well to start out.&nbsp; Then we started adding actions like Sessions, and ListAttendees, and started to notice that those things probably belong on their own controllers.&nbsp; </p>


<p>But we had a problem&#8230; if I have a URL like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>/houstonTechFest/sessions</div></code></pre></td></tr></table></div></figure></div>


<p>this will translate to an action called &#8220;sessions&#8221; on the conference controller.&nbsp; That&#8217;s not what we want.&nbsp; So we started to hard code these specific instances like this&#8230;.</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("speakers", "{conferenceKey}/speakers/{action}", new {controller = "speaker", action = "list"});&lt;br>routes.MapRoute("schedule", "{conferenceKey}/schedule/{action}", new {controller = "schedule", action = "index"});&lt;br>routes.MapRoute("sessions", "{conferenceKey}/sessions/{action}", new {controller = "session", action = "list"});&lt;br>routes.MapRoute("sponsors", "{conferenceKey}/sponsors/{action}", new {controller = "sponsor", action = "list"});</div></code></pre></td></tr></table></div></figure></div>


<p>YUCK.&nbsp; Things are starting to get really hairy now.</p>


<p>So, after a phone call with <a href="http://jeffreypalermo.com/" target="_blank">Jeffrey Palermo</a>, he raised the question:</p>


<blockquote><p><em>&#8220;Why even have the default point to conference controller?&nbsp; The only common action on that is Details.&nbsp; All of the rest are separate controllers.&#8221;</em></p></blockquote>


<p>And then it clicked.&nbsp; We can now change the route definition to this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("standard", "{conferenceKey}/{controller}/{action}/{id}", new { controller="conference", action="index", id=(string)null});</div></code></pre></td></tr></table></div></figure></div>


<p>Which produces these very acceptable URLs:</p>


<table cellspacing="0" cellpadding="2" width="400" border="1"><tbody><tr><td valign="top" width="100"><strong>URL</strong></td><td valign="top" width="100"><strong>Controller</strong></td><td valign="top" width="100"><strong>Action</strong></td><td valign="top" width="100"><strong>Id</strong></td></tr><tr><td valign="top" width="100">/houstonTechFest</td><td valign="top" width="100">Conference</td><td valign="top" width="100">Index</td><td valign="top" width="100">&nbsp;</td></tr><tr><td valign="top" width="100">/houstonTechFest/sessions</td><td valign="top" width="100">Sessions</td><td valign="top" width="100">Index</td><td valign="top" width="100">&nbsp;</td></tr><tr><td valign="top" width="100">/houstonTechFest/sessions/add</td><td valign="top" width="100">Sessions</td><td valign="top" width="100">Add</td><td valign="top" width="100">&nbsp;</td></tr><tr><td valign="top" width="100">/houstonTechFest/sponsors/edit/5</td><td valign="top" width="100">Sponsors</td><td valign="top" width="100">Edit</td><td valign="top" width="100">5</td></tr></tbody></table>


<p>there are a few extra cases where we don&#8217;t want to start with a conference key (for example, /conference/list, /conference/current, /login, /admin, etc&#8230;).&nbsp; These URLs all work with the standard route, so we can define that just below our first route.</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("conference", "{controller}/{action}/{id}",&lt;br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new {controller="conference", action="list"});</div></code></pre></td></tr></table></div></figure></div>


<p>Now the URL /conference/list (and the others) will get routed properly with this definition.&nbsp; </p>


<p>Now there&#8217;s just one final problem.&nbsp; Can you see it?&nbsp; If we define the other route first, then the first token of the route will get picked up as a conference key!&nbsp; We certainly don&#8217;t want that.&nbsp; So we&#8217;ll add a constraint to the first route to match everything except the controllers we want to address specifically.&nbsp; Our route now looks like&#8230;</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("confkey", "{conferenceKey}/{controller}/{action}/{id}",new { controller="conference", action="index", id=(string)null },new { conferenceKey="(?!conference|admin|login).*"});routes.MapRoute("standard", "{controller}/{action}/{id}",new { controller="conference", action="index", id=(string)null });</div></code></pre></td></tr></table></div></figure></div>


<p>The first route will grab everything except those URLs that start with &#8220;conference&#8221;, &#8220;admin&#8221;, or &#8220;login.&#8221;&nbsp; There might be other controllers, but this is all we need for now.&nbsp; Those URLS get picked up by the 2nd route and everything works fine after that.</p>


<p>Coming up with a clear set of routes that don&#8217;t conflict with each other is very difficult once you stray away from the norm.&nbsp; The more route definitions you have, the more care you have to take to ensure that the new rule doesn&#8217;t break a whole slew of existing URLs.&nbsp;&nbsp; This is critically important if you already have an application in production.&nbsp; A simple change in the Global.asax file can change all of the URL&#8217;s for your application!&nbsp; That&#8217;s like <a href="http://en.wikipedia.org/wiki/Paraquat" target="_blank">paraquat</a> for <a href="http://c2.com/cgi/wiki?GoogleJuice" target="_blank">Google Juice</a>.</p>


<h3>Testing the Routes</h3>


<p>Unit tests can surely help here.&nbsp; For these examples, I followed a simple technique for testing my routes.&nbsp; First is the method to fake out the actual request:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">static&lt;/span> RouteData getMatchingRouteData(&lt;span class="kwrd">string&lt;/span> appRelativeUrl){RouteTable.Routes.Clear();var configurator = &lt;span class="kwrd">new&lt;/span> RouteConfigurator();configurator.RegisterRoutes();RouteData routeData;var mocks = &lt;span class="kwrd">new&lt;/span> MockRepository(); var httpContext = mocks.DynamicMock&lt;HttpContextBase&gt;();var request = mocks.DynamicMock&lt;HttpRequestBase&gt;();&lt;span class="kwrd">using&lt;/span> (mocks.Record()){SetupResult.For(httpContext.Request).Return(request);mocks.Replay(httpContext);SetupResult.For(httpContext.Request.AppRelativeCurrentExecutionFilePath).Return(appRelativeUrl);SetupResult.For(httpContext.Request.PathInfo).Return(&lt;span class="kwrd">string&lt;/span>.Empty);}&lt;span class="kwrd">using&lt;/span> (mocks.Playback()){routeData = RouteTable.Routes.GetRouteData(httpContext);}&lt;span class="kwrd">return&lt;/span> routeData;}</div></code></pre></td></tr></table></div></figure></div>


<p>Now we can have a simple helper method for asserting that are routes produce the right tokens:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">void&lt;/span> AssertRoute(&lt;span class="kwrd">string&lt;/span> virtualPath, &lt;span class="kwrd">string&lt;/span> expectedController, &lt;span class="kwrd">string&lt;/span> expectedAction, IDictionary&lt;&lt;span class="kwrd">string&lt;/span>,&lt;span class="kwrd">string&lt;/span>&gt; expectedTokens){var routeData = get
</div><div class='line'>MatchingRouteData(virtualPath);Assert.That(routeData.GetRequiredString(&lt;span class="str">"controller"&lt;/span>), Is.EqualTo(expectedController));Assert.That(routeData.GetRequiredString(&lt;span class="str">"action"&lt;/span>), Is.EqualTo(expectedAction));&lt;span class="kwrd">foreach&lt;/span> (var pair &lt;span class="kwrd">in&lt;/span> expectedTokens){Assert.That(routeData.GetRequiredString(pair.Key), Is.EqualTo(pair.Value));}}</div></code></pre></td></tr></table></div></figure></div>


<p>And finally the tests that I&#8217;m running to ensure these routes are working properly&#8230;<p><!-- code formatted by http://manoli.net/csharpformat/ -->
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>[Test]&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">void&lt;/span> TestSiteRoutes(){AssertRoute(&lt;span class="str">"~/austinCodeCamp2008"&lt;/span>, &lt;span class="str">"conference"&lt;/span>, &lt;span class="str">"index"&lt;/span>,&lt;span class="kwrd">new&lt;/span> Dictionary&lt;&lt;span class="kwrd">string&lt;/span>, &lt;span class="kwrd">string&lt;/span>&gt; );AssertRoute(&lt;span class="str">"~/login"&lt;/span>, &lt;span class="str">"login"&lt;/span>, &lt;span class="str">"index"&lt;/span>);AssertRoute(&lt;span class="str">"~/conference/new"&lt;/span>, &lt;span class="str">"conference"&lt;/span>, &lt;span class="str">"new"&lt;/span>);AssertRoute(&lt;span class="str">"~/conference/current"&lt;/span>, &lt;span class="str">"conference"&lt;/span>, &lt;span class="str">"current"&lt;/span>);AssertRoute(&lt;span class="str">"~/admin"&lt;/span>, &lt;span class="str">"admin"&lt;/span>, &lt;span class="str">"index"&lt;/span>);AssertRoute(&lt;span class="str">"~/houstonTechFest/sessions/add"&lt;/span>, &lt;span class="str">"sessions"&lt;/span>, &lt;span class="str">"add"&lt;/span>,&lt;span class="kwrd">new&lt;/span> Dictionary&lt;&lt;span class="kwrd">string&lt;/span>,&lt;span class="kwrd">string&lt;/span>&gt; );}</div></code></pre></td></tr></table></div></figure></div>
<p>This is only half of the story though.&nbsp; You should also test that the routes you ask for (like with Html.ActionLink and Url.Action) produce the intended URLs.&nbsp; Otherwise you may have URLs that match routes, but routes that don&#8217;t match your intended URLs.</p><p>Testing these is a bit harder, and it&#8217;s 1am now&#8230; so I&#8217;ll take the ultimate cop-out and <em>leave it as an exercise to the reader</em>. </p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/a-routing-evolution/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/google-reader-quick-tips/">Google Reader Quick Tips</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-27 00:00:00 -0500" pubdate  updated >Jul 27<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><h3>#1 – Read Upwards</h3>


<p>I like to read my feeds grouped by feed, oldest first.&#160; Scroll down to the last post in the list and press “K” to read upwards from there.&#160; “J” does the opposite &amp; reads downwards.&#160; This is especially useful for busy feeds like <a href="http://slashdot.org" target="_blank">Slashdot</a> or <a href="http://lifehacker.com" target="_blank">Lifehacker</a>, where there are easily 50 posts to read in a day.</p>


<h3>#2 – Next/Previous Feed</h3>


<p>When using the method above, it’s useful to use Shift+N or Shift+P to navigate to next previous subscription.&#160; This keeps your fingers on the keyboard instead of reaching for the mouse.</p>


<h3>#3 – More Screen Real-Estate</h3>


<p>If you need more space for reading, press “U” to hide the left column.&#160; Pressing “U” will get it back again.</p>


<h3>#4 – Open In-line</h3>


<p>If you want to comment on a post (or just click through to see what the site looks like), you can open the post’s original site within the google reader pane.&#160; Just CTRL-Click the title of the post.</p>


<h3>#5 – Ninja Mode</h3>


<p>Up, Up, Down, Down, Left, Right, Left, Right, B, A.</p>


<p><em>No, I’m not kidding on this one.</em></p>


<h3>#6 – On-screen help</h3>


<p>Press Shift+? to see a nice layout of all the keyboard shortcuts available to you.</p>


<p>&#160;</p>


<p>What’s your favorite Google Reader tip?</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/google-reader-quick-tips/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/controller-is-not-the-new-code-behind/">Controller Is NOT the New Code-Behind</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-26 00:00:00 -0500" pubdate  updated >Jul 26<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>One of the things that I often say when touting the benefits of ASP.NET MVC is clean separation of concerns.&#160; I talk about how the code-behind of WebForms is just <em>begging</em> you to put code there.&#160; Samples online frequently open direct database connections and execute ad-hoc queries against the database from a button-click event.</p>


<p>Of course the same is possible with ASP.NET MVC.&#160; Just taking a peak at the new Preview 4 installer, you’ll see a brand-spanking new AccountController, pre-built for managing logins/membership on your site.</p>


<p>Open AccountController.cs and you’ll find this method:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>[Authorize]&lt;span class="kwrd">public&lt;/span> ActionResult ChangePassword(&lt;span class="kwrd">string&lt;/span> currentPassword, &lt;span class="kwrd">string&lt;/span> newPassword, &lt;span class="kwrd">string&lt;/span> confirmPassword){ViewData[&lt;span class="str">&quot;Title&quot;&lt;/span>] = &lt;span class="str">&quot;Change Password&quot;&lt;/span>;ViewData[&lt;span class="str">&quot;PasswordLength&quot;&lt;/span>] = Provider.MinRequiredPasswordLength;&lt;span class="rem">// Non-POST requests should just display the ChangePassword form &lt;/span>&lt;span class="kwrd">if&lt;/span> (Request.HttpMethod != &lt;span class="str">&quot;POST&quot;&lt;/span>){&lt;span class="kwrd">return&lt;/span> View();}&lt;span class="rem">// Basic parameter validation&lt;/span>List&lt;&lt;span class="kwrd">string&lt;/span>&gt; errors = &lt;span class="kwrd">new&lt;/span> List&lt;&lt;span class="kwrd">string&lt;/span>&gt;();&lt;span class="kwrd">if&lt;/span> (String.IsNullOrEmpty(currentPassword)){errors.Add(&lt;span class="str">&quot;You must specify a current password.&quot;&lt;/span>);}&lt;span class="kwrd">if&lt;/span> (newPassword == &lt;span class="kwrd">null&lt;/span> || newPassword.Length &lt; Provider.MinRequiredPasswordLength){errors.Add(String.Format(CultureInfo.InvariantCulture, &lt;span class="str">&quot;You must specify a new password of {0} or more characters.&quot;&lt;/span>, Provider.MinRequiredPasswordLength));}&lt;span class="kwrd">if&lt;/span> (!String.Equals(newPassword, confirmPassword, StringComparison.Ordinal)){errors.Add(&lt;span class="str">&quot;The new password and confirmation password do not match.&quot;&lt;/span>);}&lt;span class="kwrd">if&lt;/span> (errors.Count == 0){&lt;span class="rem">// Attempt to change password&lt;/span>MembershipUser currentUser = Provider.GetUser(User.Identity.Name, &lt;span class="kwrd">true&lt;/span> &lt;span class="rem">/* userIsOnline */&lt;/span>);&lt;span class="kwrd">bool&lt;/span> changeSuccessful = &lt;span class="kwrd">false&lt;/span>;&lt;span class="kwrd">try&lt;/span>{changeSuccessful = currentUser.ChangePassword(currentPassword, newPassword);}&lt;span class="kwrd">catch&lt;/span>{&lt;span class="rem">// An exception is thrown if the new password does not meet the provider's requirements&lt;/span>}&lt;span class="kwrd">if&lt;/span> (changeSuccessful){&lt;span class="kwrd">return&lt;/span> RedirectToAction(&lt;span class="str">&quot;ChangePasswordSuccess&quot;&lt;/span>);}&lt;span class="kwrd">else&lt;/span>{errors.Add(&lt;span class="str">&quot;The current password is incorrect or the new password is invalid.&quot;&lt;/span>);}}&lt;span class="rem">// If we got this far, something failed, redisplay form&lt;/span>ViewData[&lt;span class="str">&quot;errors&quot;&lt;/span>] = errors;&lt;span class="kwrd">return&lt;/span> View();}</div></code></pre></td></tr></table></div></figure></div>


<p>That’s nearly 70 lines in a single method.&#160; Even with the comments it’s difficult to see what it’s doing at a glance.</p>


<p>This serves as a lesson to those of us that sell TDD as a design practice.&#160; Sure this method is testable, but it seems as though the author did not take a few minutes to refactor code.&#160; Normally I wouldn’t pick on someone for writing this, but when this is installed as a project template, it serves as an example for others to write code just like this.</p>


<p>Let’s see how we might clean this code up to make it more readable.</p>


<p>Here’s a good first attempt.&#160; This took all of about 5 minutes to accomplish.</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>[Authorize]&lt;span class="kwrd">public&lt;/span> ActionResult ChangePassword(&lt;span class="kwrd">string&lt;/span> currentPassword, &lt;span class="kwrd">string&lt;/span> newPassword, &lt;span class="kwrd">string&lt;/span> confirmPassword){ViewData[&lt;span class="str">&quot;Title&quot;&lt;/span>] = &lt;span class="str">&quot;Change Password&quot;&lt;/span>;ViewData[&lt;span class="str">&quot;PasswordLength&quot;&lt;/span>] = Provider.MinRequiredPasswordLength;&lt;span class="rem">// Non-POST requests should just display the ChangePassword form &lt;/span>&lt;span class="kwrd">if&lt;/span> (Request.HttpMethod != &lt;span class="str">&quot;POST&quot;&lt;/span>){&lt;span class="kwrd">return&lt;/span> View();}var errors = &lt;span class="kwrd">new&lt;/span> List&lt;&lt;span class="kwrd">string&lt;/span>&gt;();ValidatePassword(currentPassword, newPassword, confirmPassword, errors);&lt;span class="kwrd">if&lt;/span> (errors.Count == 0){&lt;span class="kwrd">const&lt;/span> &lt;span class="kwrd">bool&lt;/span> isOnline = &lt;span class="kwrd">true&lt;/span>;var currentUser = Provider.GetUser(User.Identity.Name, isOnline);&lt;span class="kwrd">if&lt;/span>( PerformPasswordChange(currentUser, currentPassword, newPassword)){&lt;span class="kwrd">return&lt;/span> RedirectToAction(&lt;span class="str">&quot;ChangePasswordSuccess&quot;&lt;/span>);}errors.Add(&lt;span class="str">&quot;The current password is incorrect or the new password is invalid.&quot;&lt;/span>); }&lt;span class="rem">// If we got this far, something failed, redisplay form&lt;/span>ViewData[&lt;span class="str">&quot;errors&quot;&lt;/span>] = errors;&lt;span class="kwrd">return&lt;/span> View();}&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">bool&lt;/span> PerformPasswordChange(MembershipUser user, &lt;span class="kwrd">string&lt;/span> currentPassword, &lt;span class="kwrd">string&lt;/span> newPassword){&lt;span class="kwrd">try&lt;/span>{user.ChangePassword(currentPassword, newPassword);&lt;span class="kwrd">return&lt;/span> &lt;span class="kwrd">true&lt;/span>;}&lt;span class="kwrd">catch&lt;/span>{&lt;span class="kwrd">return&lt;/span> &lt;span class="kwrd">false&lt;/span>;}}&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">void&lt;/span> ValidatePassword(&lt;span class="kwrd">string&lt;/span> currentPassword, &lt;span class="kwrd">string&lt;/span> newPassword, &lt;span class="kwrd">string&lt;/span> confirmPassword, ICollection&lt;&lt;span class="kwrd">string&lt;/span>&gt; errors){&lt;span class="kwrd">if&lt;/span> (String.IsNullOrEmpty(currentPassword)){errors.Add(&lt;span class="str">&quot;You must specify a current password.&quot;&lt;/span>);}&lt;span class="kwrd">if&lt;/span> (newPassword == &lt;span class="kwrd">null&lt;/span> || newPassword.Length &lt; Provider.MinRequiredPasswordLength){errors.Add(String.Format(CultureInfo.InvariantCulture,&lt;span class="str">&quot;You must specify a new password of {0} or more characters.&quot;&lt;/span>,Provider.MinRequiredPasswordLength));}&lt;span class="kwrd">if&lt;/span> (!String.Equals(newPassword, confirmPassword, StringComparison.Ordinal)){errors.Add(&lt;span class="str">&quot;The new password and confirmation password do not match.&quot;&lt;/span>);}}</div></code></pre></td></tr></table></div></figure></div>


<p>This code (while still completely in the controller class) is broken apart into distinct methods.&#160; This reduces the line count on the action method to 26, which is much easier to swallow.&#160; I’m sure you see even more opportunities for improvement here.&#160; Some of this code probably belongs in another, completely separate class (one that is even more easily tested that this).</p>


<p>My point is, always remember to include time for refactoring.&#160; Especially when the result of your work will stand for thousands to learn from.</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/controller-is-not-the-new-code-behind/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/net-dojo-free-hands-on-training-for-asp-net-mvc/">.NET Dojo - Free Hands on Training for ASP.NET MVC</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-23 00:00:00 -0500" pubdate  updated >Jul 23<span>rd</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><a href="http://flux88.com/uploads/.NETDojoFreeHandsOnTrainingforASP.NETMVC_101DD/dojo.png"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="247" alt="dojo" src="http://flux88.com/uploads/.NETDojoFreeHandsOnTrainingforASP.NETMVC_101DD/dojo_thumb.png" width="571" border="0"></a>&nbsp;</p>


<p> <p>I&#8217;m a little late on this notice (luckily <a href="http://blog.microsoft-j.net/2008/07/22/NETDojoASPNETMVC.aspx" target="_blank">J Sawyer already posted about it</a>) but I&#8217;m going to be hosting a .NET Dojo class at the Microsoft office in Houston.</p> <p>The class will be a free half day session where we will dig into ASP.NET MVC.&nbsp; I&#8217;ll cover the basic principles of the MVC pattern, why you might want to use it over WebForms, how to leverage Ajax and how to apply test driven design practices with the framework.</p> <h3><strong>You&#8217;ll need:</strong></h3> <ul> <li>a laptop</li> <li>Visual Studio 2008 (trial is okay)</li> <li><a href="http://www.codeplex.com/aspnet" target="_blank">ASP.NET MVC Preview 4</a></li> <li><a href="http://mvccontrib.org" target="_blank">MVCContrib</a></li> <li>A CD ROM Drive to load any lab materials</li> <li>an open mind&#8230;</li></ul> <h3><strong>When?</strong></h3> <p>August 28, 2008<br>1pm-5pm</p> <h3><strong>Where?</strong></h3> <p>Microsoft Office<br><a href="http://maps.google.com/maps?hl=en&amp;um=1&amp;ie=UTF-8&amp;q=2000+W+Sam+Houston+Pky+S+Houston,+TX+77042&amp;fb=1&amp;geocode=5943154917722953552,29.744069,-95.558439&amp;oi=manybox&amp;ct=14&amp;cd=1&amp;resnum=1" target="_blank">2000 W Sam Houston Pkwy</a></p> <h3><strong>How do I register?</strong></h3> <p><a title="http://msevents.microsoft.com/CUI/EventDetail.aspx?EventID=1032383675&amp;Culture=en-US" href="http://msevents.microsoft.com/CUI/EventDetail.aspx?EventID=1032383675&amp;Culture=en-US">http://msevents.microsoft.com/CUI/EventDetail.aspx?EventID=1032383675&amp;Culture=en-US</a></p> <p>Space is limited, so first come first served!</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/07/net-dojo-free-hands-on-training-for-asp-net-mvc/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/12/formatting-json-from-terminal/">Formatting JSON From Terminal</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/houston-tech-fest-2011-recap/">Houston Tech Fest 2011 Recap</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/appsites-is-now-appkickstand/">Appsites Is Now AppKickstand</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/sharing-vim-configuration-between-machines/">Sharing Vim Configuration Between Machines</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
