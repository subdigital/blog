
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
    Fickle Bits
  </title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/blog/page/16/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="http://appsites.heroku.com/giggletouch">Giggle Touch for
    iOS</a></li>
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/the-importance-of-writing-the-test-first/">The Importance of Writing the Test First</a></h1>
    
    
      <p class="meta">




<time datetime="2008-04-08 00:00:00 -0500" pubdate  updated >Apr 8<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I had a skype call today with <a href="http://blog.wekeroad.com/" target="_blank">Rob Conery</a> and <a href="http://twitter.com/sbellware" target="_blank">Scott Bellware</a>&nbsp;(twitter) today to talk mainly about how to improve the &ldquo;TDD message&rdquo; of his <a href="http://blog.wekeroad.com/mvc-storefront/mvc-storefront-part-1/" target="_blank">latest ASP.NET</a> <a href="http://blog.wekeroad.com/mvc-storefront/asp-net-mvc-mvc-storefront-part-2/" target="_blank">screencasts</a>.</p>


<p>One of the points of feedback Rob got on his screencast is that he had stubbed the code he wanted to test before actually writing the test.&nbsp; While there was no &ldquo;meat&rdquo; of the code he wrote, there was still code.&nbsp; And that code had some sort of design baked in already.</p>


<p>The topic in question was about Products.&nbsp; Rob had a fictitious requirement that the discount should be displayed next to the price.&nbsp; So he created something like this as a stub:</p>


<p>`
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public class Product{    public float DiscountPercent { get; set; }  public decimal ListPrice { get; set; }  public decimal AdjustedPrice    {       get { return 0.0m; }    }   public decimal DiscountAmount   {       get { return 0.0m; }    }}</div></code></pre></td></tr></table></div></figure></div>
`<p>The intent was to test that a discount was properly applied to the product.&nbsp; Of course, the test fails initially, and then you can easily go make it pass, but the first activity performed was stubbing out code, and that is <em>design</em>.</p><p>Instead, a failing test should show with absolute opactity that there is even a need for those properties.&nbsp; The fact that you&rsquo;ve written a <strike>test</strike>&nbsp;specification that says:</p><p><em>A Product with a discount percent of 10 and a list price of $100 should yield a discount amount of $10.</em></p><p>This becomes executable, and you know immediately that you have to implement those properties.&nbsp; </p><p>&ldquo;But wait?&rdquo; I can hear you say, &ldquo;&hellip;didn&rsquo;t you just come to the same end result?&rdquo;&nbsp; Well, yes, here I did.&nbsp; But what if while writing this code you realized that you really need to calculate this amount when you are calculating an order total, then you might introduce an order object.&nbsp; Or you might have a completely different need.&nbsp; The point here is that you shouldn&rsquo;t just assume&nbsp;that you&rsquo;ll need those 4 properties, or this 1 method, because you&rsquo;ll likely be wrong.</p><p>This also brings out the point of having good test naming.&nbsp; The test name should be so descriptive, it&rsquo;s like a rule for the application.&nbsp; Any new developer can come onto a project and decipher the meaning &amp; intent of broken tests.&nbsp; That is a very valuable thing to have.</p><p>If you recall the original fictitious requirement, it was &ldquo;the discount should be displayed next to the price&rdquo; you can see that it is a UI requirement.&nbsp; It doesn&rsquo;t necessarily dictate the model that you must use.</p><p>In fact, you might even come to the conclusion to use a data transfer object as a presentation model and then this piece of information could literally come from anywhere.</p><p><strong>TDD is about design</strong>.&nbsp; You&rsquo;ve heard that a million times.&nbsp; The obvious corollary benefit is the enforced existence of automated tests for every possible specification.&nbsp; Even if you intend to write the tests immediately afterwards, you may have missed out on some critical aspects of design, such as loose coupling, or eliminating waste.&nbsp; You&rsquo;re also tempted to just not write tests at all.</p><p>If you skip on the test-first nature of TDD, then you&rsquo;re really just unit testing, and you&rsquo;re missing out on the real design benefits of TDD.</p><p>I also want to point out that I&rsquo;m not picking on Rob.&nbsp; He&rsquo;s had&nbsp;<a href="http://twitter.com/sbellware/statuses/785180922" target="_blank">way</a> <a href="http://twitter.com/sbellware/statuses/785181761" target="_blank">too</a> <a href="http://twitter.com/codinghorror/statuses/784783370" target="_blank">much</a> of that.&nbsp;&nbsp; I think he&rsquo;s doing a great job and (if done correctly) he can definitely reach a larger audience than I can, seeing that he works for Microsoft.&nbsp; I also think it takes guts to submit your work to the world and, in the face of some pretty harsh criticisms, stand up and say&hellip; &ldquo;Hey, why don&rsquo;t you get on skype and we can talk about how much I suck!&rdquo; &mdash; Keep it up, Rob!</p><p>So here&rsquo;s a challenge:&nbsp; those of you who think that Rob did a &ldquo;disservice&rdquo; to the community, I&rsquo;d like to see your screencast on the subject.&nbsp; Obviously there is a gaping void instead of widespread adoption, so we as a community could definitely use the material.</p><div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/TDD">TDD</a></div>

</div>
  <footer>
    <a rel="full-article" href="/2008/04/the-importance-of-writing-the-test-first/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/a-refreshing-take-on-usability/">A Refreshing Take on Usability</a></h1>
    
    
      <p class="meta">




<time datetime="2008-04-03 00:00:00 -0500" pubdate  updated >Apr 3<span>rd</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I was browsing some high resolution dual &amp; tri screen monitor wallpapers at <a href="http://wallpaper.panedia.com/">http://wallpaper.panedia.com/</a> and I noticed something really cool.&nbsp; They looked at my user agent string and resolution settings to determine which wallpaper was best for me.<br><br>Considering that (without 3rd party add ons) Windows can&#8217;t display more than 1 image on multi-monitor setups, you have to choose 1 large image.&nbsp; They were nice enough to highlight the correct resolution as well.&nbsp; Kudos to Panedia for that!<br><br><br><p></p><img src="http://flux88.com/content/binary/wallpaper-autodetect-resolution.png" border="0"><br><br><i>(note:&nbsp; there were a ton of sizes available, my highlighted suggestion was way at the bottom)</i><br></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/04/a-refreshing-take-on-usability/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/speaking-at-north-houston-net-user-group/">Speaking at North Houston .NET User Group</a></h1>
    
    
      <p class="meta">




<time datetime="2008-03-18 00:00:00 -0500" pubdate  updated >Mar 18<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><font style="BACKGROUND-COLOR: #f4f4f4">Sorry for the late notice on this one (it sort of snuck up on me!)&nbsp; I&rsquo;ll be speaking at the North Houston .NET User Group (yes I said North, it&rsquo;s new).&nbsp; The talk is scheduled for Thursday, March 20th @ 6:30PM.&nbsp; The meeting will be held at Montgomery College in The Woodlands.</font></p>


<p>I will talk about adopting agile development&hellip; the what, why, and&nbsp;how.&nbsp; Hopefully it will be more of an interactive discussion, as there the audience can usually relate to the pain points that I talk about with traditional waterfall development.</p>


<p>For more details, check out <a href="http://nhdnug.org/" target="_blank">their website</a>.</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/03/speaking-at-north-houston-net-user-group/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/debugging-routes/">Debugging Routes</a></h1>
    
    
      <p class="meta">




<time datetime="2008-03-15 00:00:00 -0500" pubdate  updated >Mar 15<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Previously Scott Hanselman <a href="http://www.hanselman.com/blog/TheWeeklySourceCode17ASPNETMVCCommunityCodeEdition.aspx" target="_blank">pointed out</a> that in CodeCampServer we are using a tiny wrapper around MvcRouteHandler in order to catch all exceptions and provide the route information along with the error message.&nbsp; I called this (for lack of a better name) <strong>Better</strong>MvcRouteHandler.&nbsp; That&rsquo;s right, Better!</p>


<p>Scott took this a mile further and created a nice route debugging table that you can use while debugging.&nbsp; You can <a href="http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx" target="_blank">download this route debugger on Phil&rsquo;s blog</a> (with source).</p>


<p>To enable the route table debugger, you have to add this line to your global.asax:</p>


<p>`RouteDebug.RouteDebugger.DebugRoutes(RouteTable.Routes);`</p>


<p>I think it would be better to be able to add <strong>?routedebug</strong> to the end of ANY url and have this happen automatically.&nbsp; To accomplish this I created an HttpModule.&nbsp; It looks at each request for the <strong>?routedebug</strong> querystring key and, if found, calls the line above.&nbsp; I ran into a hiccup, though&hellip; once you set the route handler to the debug one, all future requests use it as well (even without the url parameter).&nbsp; </p>


<p>Good &lsquo;ol Phil released the source for this route debugger, so I added a method to revert the routes back to their original values if the query parameter doesn&rsquo;t exist.</p>


<p>Here is the RouteDebugModule:</p>


<p><img src="/images/routedebugmodule.png" alt="Route_debug_module"  border="0"  /></p>


<p><em>(remember:&nbsp; this code would <strong>NOT</strong> be appropriate for production use, both for the awkward setting of route handlers on every request and the fact that you don&rsquo;t want your users to be able to see your route information.)</em></p>


<p>And the RevertRouteHandlers method (in Phil&rsquo;s RouteDebugger.cs):</p>


<p><img src="/images/revertroutes.png" alt="Revert_routes"  border="0"  /></p>


<p>The _oldRouteHandlers is just a static dictionary that hangs on to the route before swapping with the debug one.</p>


<p>I added the HttpModule to my web.config, and now I can do this:</p>


<p><a href="http://www.flux88.com/uploads/route_2Ddebug_2Din_2Daction.png"><img src="/images/route_2Ddebug_2Din_2Daction_thumb.jpg" alt="Route-debug-in-action"  border="0"  /></a></p>


<p>&hellip;and also flip back to the regular request without recompiling.</p>


<p>I&rsquo;m thinking they should call this <strong>BettererRouteHandler</strong> instead of RouteDebugHandler, who&rsquo;s with me?</p>


<div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/asp.net+mvc">asp.net+mvc</a>, <a rel="tag" href="http://technorati.com/tag/routing">routing</a></div>

</div>
  <footer>
    <a rel="full-article" href="/2008/03/debugging-routes/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/asp-net-mvc-preview-2-thoughts/">ASP.NET MVC - Preview 2 Thoughts</a></h1>
    
    
      <p class="meta">




<time datetime="2008-03-10 00:00:00 -0500" pubdate  updated >Mar 10<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I said previously that I was excited for this release.&nbsp; Ultimately I didn&rsquo;t see much worth blogging about.&nbsp; Some features are a step in the right direction, some (I think) were a step back.</p>


<p>I&rsquo;m currently upgrade <a href="http://codecampserver.org/" target="_blank">Code Camp Server</a> to Preview 2 and hit about 80 errors which I had to go in and resolve.&nbsp; My initial thoughts:</p>


<ul><li>I think the HttpContextBase is a bad idea.&nbsp; Yes I understand the desire to not introduce breaking changes.&nbsp; But I think that the people that will be using ASP.NET MVC will be congnizant of this and code appropriately.&nbsp; Interfaces are much easier to depend work with while testing, and I&rsquo;d rather just use those.&nbsp; Hey, couldn&rsquo;t they give us both, and framework providers could choose?<br /></li><li>what&rsquo;s up with the <strong>OnActionExecuting</strong>, <strong>OnActionExecuted</strong> events?&nbsp; These used to be <strong>OnPreAction</strong>, <strong>OnPostAction</strong>, which was much more readable (in my opinion) &mdash; seriously, put these back!&nbsp; The new naming is not nearly as obvious to the glance.<br /></li><li>Testing is still too cumbersome.&nbsp; I think some good mocking-fu can mitigate this, but it&rsquo;s a tough sell to people new to unit testing (and to mocking).&nbsp; TempData should be implemented as an IDictionary on the controller, only to have a real TempData that depends on session state at runtime.&nbsp; This would allow me to test that TempData works without having to mock session (which is not intuitive at all).<br /></li><li>The Action filters are going to be where the goo lives.&nbsp; This is how we will see some really productive &amp; handy filters for performing actions such as requiring SSL, protecting an action from unauthenticated access, loading common data, etc.&nbsp; Think of them as HttpModules for individual actions.</li></ul>


<p>More to come, I&rsquo;m sure&hellip;</p>


<p>&nbsp;</p>


<p>&nbsp;</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/03/asp-net-mvc-preview-2-thoughts/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/asp-net-mvc-preview-2-now-available/">ASP.NET MVC Preview 2 Now Available</a></h1>
    
    
      <p class="meta">




<time datetime="2008-03-05 00:00:00 -0600" pubdate  updated >Mar 5<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I normally don&#8217;t do this sort of announcement, but this one excites me.<br><br>Download the ASP.NET MVC Preview 2 here:<br><a href="http://www.microsoft.com/downloads/details.aspx?familyid=38cc4cf1-773a-47e1-8125-ba3369bf54a3&amp;displaylang=en&amp;tm">http://www.microsoft.com/downloads/details.aspx?familyid=38cc4cf1-773a-47e1-8125-ba3369bf54a3&amp;displaylang=en&amp;tm</a><br><br>Feedback to come&#8230;<br><p></p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/03/asp-net-mvc-preview-2-now-available/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/the-culprit-system-restore-points/">The Culprit - System Restore Points</a></h1>
    
    
      <p class="meta">




<time datetime="2008-02-29 00:00:00 -0600" pubdate  updated >Feb 29<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Thanks to <a href="http://www.aaronlerch.com/">Aaron Lerch</a> and <a href="http://www.odetocode.com/">Scott Allen</a> for nailing <a href="http://flux88.com/WindowsNotRecognizingFreeSpace.aspx">my problem</a> exactly!&nbsp; They suggested deleting system restore points and volume shadow copies.</p>


<p><img src="/images/disk_2Dcleanup_small.jpg" alt="Disk-cleanup"  border="0"  /></p>


<p>After doing this, I checked my free space via Explorer:</p>


<p><img src="/images/explorer_2Ddrive_2Dspace2_small.jpg" alt="Explorer-drive-space2"  border="0"  /></p>


<p>42GB free now!&nbsp; My santiy has returned.&nbsp; Thanks guys!&nbsp; My system will definitely stop thrashing with virtual memory now.</p>


<p>&nbsp;</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/02/the-culprit-system-restore-points/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/case-insensitive-string-comparison-is-teh-suck/">Case Insensitive String Comparison Is Teh Suck</a></h1>
    
    
      <p class="meta">




<time datetime="2008-02-29 00:00:00 -0600" pubdate  updated >Feb 29<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Why is it so verbose to compare two strings in C# and see if they are equal, while ignoring case?<br><br>What I mean is this:&nbsp; <b><i>(&#8220;Apples&#8221; == &#8220;apples&#8221;)&nbsp; =&gt; false</i></b><br><br>Take the following examples, each of which does what I want it to, however <b>there is so much noise code here</b> that it really takes away from the readability of the code:<br><br></p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">Assert.That(matches[0].Email.Equals(email, StringComparison.InvariantCultureIgnoreCase));&lt;br>Assert.That(matches[0].Email.ToLower().Equals(email.ToLower()));&lt;br>Assert.That(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span>.Compare(matches[0].Email, email) == 0);&lt;br>Assert.That(Regex.Match(matches[0].Email, email, RegexOptions.IgnoreCase).Success);&lt;/span></div></code></pre></td></tr></table></div></figure></div>


<br>Each one of these works, but I really wish this was a language feature.&nbsp; Wouldn&#8217;t it be nice to have a new operator syntax?<br>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">Assert.That(matches[0].Email ==? email);&lt;br>//or&lt;br>Assert.That(matches[0].Email ==~ email);&lt;/span></div></code></pre></td></tr></table></div></figure></div>


<p><b>It turns out that we&#8217;re not alone.</b>&nbsp; Ruby and Python have the same problem, however their regular expressions option is much more elegant looking (due to the languages having regex as a core feature).&nbsp; This seems like such a common need that I&#8217;m surprised that this type of thing isn&#8217;t built into the core of most languages.<br><br>Granted, there are concerns about how each one of these would behave, for example, how do you compare strings from two different cultures?&nbsp; In my case I&#8217;m always dealing with English characters, but I fully understand the need to support internationalization.<br><br>What do you think?&nbsp; Would you welcome a new operator to save your self some typing and improve readability?<br><p></p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/02/case-insensitive-string-comparison-is-teh-suck/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/windows-not-recognizing-free-space/">Windows Not Recognizing Free Space</a></h1>
    
    
      <p class="meta">




<time datetime="2008-02-28 00:00:00 -0600" pubdate  updated >Feb 28<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been having problems lately with my primary hard drive filling up.&nbsp; Every once in a while Windows will tell me that I am running out of space on drive C: with only 500mb!&nbsp; After I cough up my tongue I run <a href="http://ccleaner.com/" target="_blank">CCleaner</a> and do a quick <a href="http://windirstat.info/" target="_blank">WinDirStat</a> report to see my big offenders.&nbsp; Nothing glaring ever shows up in the report and I end up just deleting a bunch of old programs and other piddly files that probably only total to 1gb.&nbsp; But Windows shuts up and I move on.</p>


<p>The last time this happened I took my World of Warcraft directory and manually (and painfully) moved it over to another drive.&nbsp; This should have freed up 8gb.&nbsp; It didn&rsquo;t.</p>


<p>Today I started digging.&nbsp; Windows correctly sees my drive size as 69.2GB, and reports that I only have 3.15GB free.&nbsp; That must mean that ~65GB are in use.&nbsp; However, <a href="http://www.jgoodies.com/freeware/jdiskreport/" target="_blank">JDiskReport</a> (and WinDirStat) is showing that only 24gb are in use.</p>


<p><img src="/images/explorer_2Ddrive_2Dspace_small.jpg" alt="Explorer-drive-space"  border="0"  /></p>


<p><img src="/images/jdisk_2Dreport_small.jpg" alt="Jdisk-report"  border="0"  /></p>


<p>I ran <strong>chkdsk</strong> to get a raw view of the drive&nbsp;(and to see if there are any errors) and everything came out clean.&nbsp; It reports that I have 15gb free!</p>


<p><img src="/images/chkdsk_2Ddrive_2Dspace_small.jpg" alt="Chkdsk-drive-space"  border="0"  /></p>


<p>Defrag is scheduled to run weekly and windows tells me that it doesn&rsquo;t need a defrag.&nbsp; At this point I&rsquo;m wondering whether the drive is faulty or do I just need to reformat this drive&hellip; (I&rsquo;d rather not do this, of course)</p>


<p>Any ideas?&nbsp; I&rsquo;m out of rope at this point.</p>


<p>&nbsp;</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/02/windows-not-recognizing-free-space/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/shame-on-me/">Shame on Me</a></h1>
    
    
      <p class="meta">




<time datetime="2008-02-27 00:00:00 -0600" pubdate  updated >Feb 27<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Someone decided to publicly criticize my example code in my previous post by saying that it was &ldquo;bad.&rdquo;&nbsp; While I don&rsquo;t agree with the nature of the criticism (my blog *does* have comments, you know) I totally agree with the message.&nbsp; It was bad code.&nbsp; I would never place that in a production application.</p>


<p>The intent of the post was to demonstrate some ajax techniques, not to talk about how to write testable, decoupled&nbsp;controllers.&nbsp; I suppose that example code should come with a bit of a disclaimer that says <em>&ldquo;hey, we are doing this here for simplicity&rsquo;s sake, but obviously you&rsquo;d abstract this out.&rdquo;&nbsp; </em>Ideally I would have commented out the entire flickr section, because it&rsquo;s totally not important in the context of the example.</p>


<p>In light of this topic, here is how a perfectly testable PhotosController might be written:</p>


<p>`
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public class PhotosController : Controller{private readonly IPhotoRepository _photoRepository;public PhotosController(IPhotoRepository photoRepository){_photoRepository = photoRepository;}[ControllerAction]public void Search(){RenderView("Search", new Photo[] { });}[ControllerAction]public void Find(string query, bool? ajax){ var photos = _photoRepository.SearchPhotos(query);ViewData["query"] = query;ViewData["photos"] = photos;if(ajax == true){RenderView("_images", photos);}else{RenderView("results");}}}</div></code></pre></td></tr></table></div></figure></div>
`<p>Here you can clearly see our dependency on IPhotoRepository.&nbsp; This guy can be anything we want, from a Flickr implementation, google images implementation, a file system directory, or even (gasp) a TEST implementation for writing unit tests!</p><p>Here is the IPhotoRepository, that we are using in the example:</p><p>`
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public interface IPhotoRepository{Photo[] SearchPhotos(string query);&lt;p>asdf&lt;/p>}</div></code></pre></td></tr></table></div></figure></div>
`<p>This returns a Photo object (that I defined), which means whatever implementation you choose, you need to map to this object. This is a good thing because it removed my dependency on &#8220;FlickrPhoto&#8221; in the view itself.</p><p>Our FlickrPhotoRepository now looks like this:</p>`
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>public class FlickrPhotoRepository : IPhotoRepository{private readonly IConfigSource _ConfigSource;public FlickrPhotoRepository(IConfigSource configSource){_ConfigSource = configSource;}public Photo[] SearchPhotos(string query){var flickr = new Flickr(_ConfigSource.GetSetting("flickr.api.key"));var results = flickr.PhotosSearch(query, TagMode.AnyTag, query, 40, 1);var photos = new List&lt;Photo&gt;();foreach (var item in results.PhotoCollection){photos.Add(new Photo(item.SquareThumbnailUrl, item.Title, item.PhotoId));}return photos.ToArray();}}</div></code></pre></td></tr></table></div></figure></div>
`<p>Wait a minute! This class now has it&#8217;s own dependency on IConfigSource? Craziness! In our example code from before, I had accessed the Configuration singleton directly, which is punishable by hand-removal in Albonia. Thank goodness I don&#8217;t live there. Now this class is decoupled from the actual configuration implementation and it could really be coming from a text file or database (whatever you want). <p>Wiring all this up is easy.&nbsp; You could do it via XML, but I chose to do it directly in code: `
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>private void InitializeWindsor(){_container = new WindsorContainer();_container.AddComponent("config-source", typeof(IConfigSource), typeof(AppDomainConfigSource));foreach(Type type in Assembly.GetExecutingAssembly().GetTypes()){ if(type.IsSubclassOf(typeof(Controller))){_container.AddComponent(type.Name, type);}}}</div></code></pre></td></tr></table></div></figure></div>
`<p>Also note that I&#8217;m using WindsorControllerFactory from MVCContrib, so now my controller can be created (and each of it&#8217;s dependencies ( and their dependencies (and their Dependencies)))&#8230; I think you get the idea.</p><p>And there you have it.&nbsp; A perfectly decoupled and testable modification for my previous example code.&nbsp; <em>As you were&hellip;.</em></p>

</div>
  <footer>
    <a rel="full-article" href="/2008/02/shame-on-me/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/17/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/15/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/10/houston-tech-fest-2011-recap/">Houston Tech Fest 2011 Recap</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/appsites-is-now-appkickstand/">Appsites Is Now AppKickstand</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/sharing-vim-configuration-between-machines/">Sharing Vim Configuration Between Machines</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Creating a Glow Effect for UILabel and UIButton</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
