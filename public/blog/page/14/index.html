
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fickle Bits</title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/blog/page/14/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="http://appsites.heroku.com/giggletouch">Giggle Touch for
    iOS</a></li>
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/book-review-agile-estimating-and-planning/">Book Review - Agile Estimating and Planning</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-14 00:00:00 -0500" pubdate  updated >Jul 14<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><iframe style="float: left; margin-bottom: 5px; width: 120px; margin-right: 5px; height: 240px" marginwidth="0" marginheight="0" src="http://rcm.amazon.com/e/cm?t=flux88com-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=0131479415&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr" frameborder="0" scrolling="no"></iframe>


<p>I finally finished <a href="http://blog.mountaingoatsoftware.com/" target="_blank">Mike Cohn</a>&#8217;s book, <a href="http://www.amazon.com/gp/product/0131479415?ie=UTF8&amp;tag=flux88com-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0131479415" target="_blank">Agile Estimating and Planning</a>.&#160; It has been on my reading list for quite a while, but I just finished it last week.&#160; In short I found it to be very helpful.&#160; To understand how, I&#8217;ll note some of my background in Scrum.</p>


<p>When I first read <a href="http://www.amazon.com/gp/product/073561993X?ie=UTF8&amp;tag=flux88com-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=073561993X">Agile Project Management with Scrum</a><img height="1" alt="" src="http://www.assoc-amazon.com/e/ir?t=flux88com-20&amp;l=as2&amp;o=1&amp;a=073561993X" width="1" border="0" doing).="doing)." already="already" was="was" I="I" what="what" for="for" match="match" good="good" a="a" be="be" to="to" it="it" found="found" side,="side," management="management" the="the" on="on" more="more" focused="focused" is="is" Scrum="Scrum" and="and" tactics,="tactics," engineering="engineering" XP="XP" that="that" (Given="(Given" it.&#160;="it. " implement="implement" eager="eager" simple,="simple," incredibly="incredibly" seemed="seemed" intrigued.&#160;="intrigued. " very="very" Schwaber,="Schwaber," Ken="Ken" by="by" !important;="!important;" border:none?="border:none?" />I was very intrigued.&#160; I found that Scrum melded well with the mostly engineering-focused XP practices that I had previously adopted.</p>


<p>I then took the Certified ScrumMaster course, and I was even more impressed.&#160; The problem, though, was that the course is only 3 days.&#160; 3 Days just isn&#8217;t enough time to consider anyone a &quot;master&quot; of scrum.&#160; It takes years of attempts, trying different things, failing, and overcoming those failures to eventually become&#160; a &quot;master.&quot;&#160; But that&#8217;s a topic for another day.&#160; My point is, that there was still a lot for me to learn.</p>


<p>I gave some internal training on scrum and noticed that there were a lot of questions that I didn&#8217;t have the answer to (how absurd of me to think that I had all the answers!).&#160; Some of them were practical questions&#8230; like what&#8217;s the best way to determine your iteration size, or how to effectively do release planning.&#160; I knew the concepts, and I knew their purpose, but I struggled with the actual implementation.</p>


<p>After reading <a href="http://www.amazon.com/gp/product/0131479415?ie=UTF8&amp;tag=flux88com-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=0131479415" target="_blank">Agile Estimating and Planning</a>, I am much more prepared to answer those questions (and implement them in my daily work).&#160; Mike talks in depth about why fixed iteration length is important (which is a question that has come up twice in my project).&#160; He also outlines how to effectively plan an iteration, and what to do if you have too much work planned.&#160; </p>


<p>A co-worker called me once and asked me, &quot;What happens if you partially implement a story during a sprint?&quot; &#8211; the answer came directly out of this book.&#160; The short answer is that you can either move the entire story over to the next iteration (because it isn&#8217;t <em>done</em>) or you can decide to split the story in two (however this method doesn&#8217;t work if you implemented functionality but didn&#8217;t test, for example).</p>


<p>While reading this book I have cracked it open three or four more times to refer to specific advice, which is why I think so highly of this book.&#160; Once you understand the Scrum principles and have a healthy bank of questions about its implementation, turn to this book to get some concrete answers.&#160; Not all of the advice is solid gold, mind you&#8230; but I think it&#8217;s an excellent resource for a team that is new to Scrum.</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/book-review-agile-estimating-and-planning/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/prototype-protips-2-preventing-memory-leaks-creating-objects/">Prototype Protips #2 - Preventing Memory Leaks & Creating Objects</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-04 00:00:00 -0500" pubdate  updated >Jul 4<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>It&rsquo;s been almost a year since I posted <a href="http://www.flux88.com/PrototypeScriptaculousProtips1.aspx" target="_blank">Prototype Protips #1</a> (and since then I have grown quite fond of <a href="http://jquery.com/" target="_blank">jQuery</a>), but <a href="http://prototypejs.org/" target="_blank">prototype</a> remains an excellent, choice for elegant javascript development still today.</p>


<p>If you aren&rsquo;t taking advantage of an advanced javascript library, then you are not only missing out on cleaner code, but you are quite possibly likely introducing memory leaks through unfreed event handlers!&nbsp; IE6 is notoriously bad at this, and you have to take extra caution in EVERY event handler to make sure you aren&rsquo;t leaking memory.</p>


<p>Douglas Crockford, describes memory leaks in IE&nbsp;like this:</p>


<blockquote><p>When a DOM object contains a reference to a <a href="http://www.crockford.com/javascript/">JavaScript</a> object (such an event handling function), and when that JavaScript object contains a reference to that DOM object, then a cyclic structure is formed. This is not in itself a problem. At such time as there are no other references to the DOM object and the event handler, then the garbage collector (an automatic memory resource manager) will reclaim them both, allowing their space to be reallocated. The JavaScript garbage collector understands about cycles and is not confused by them. Unfortunately, IE&#8217;s DOM is not managed by JScript. It has its own memory manager that does not understand about cycles and so gets very confused. As a result, when cycles occur, memory reclamation does not occur. The memory that is not reclaimed is said to have leaked. Over time, this can result in memory starvation.</p></blockquote>


<p>It takes a seriously smart person to understand closures in javascript and why they cause memory leaks.&nbsp; Personally I&rsquo;m glad someone else has figured it out!&nbsp; But it doesn&rsquo;t mean we can&rsquo;t protect ourselves and just do things the safe way.</p>


<p>That&rsquo;s why using a good javascript library is such a no-brainer.&nbsp; In prototype, you wire up events like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>Event.observe(window, 'load', function() {//do something when the DOM is loaded});</div></code></pre></td></tr></table></div></figure></div>


<p>This is a safe way of adding a load event to the page without erasing any previous load events that were wired up.&nbsp; (<em>Anyone ever had ASP.NET erase one of your button click handlers?&nbsp; I have&hellip;)</em></p>


<p>`$()` extended elements also get this ability.&nbsp; Say you have a button on the page like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">&lt;&lt;/span>&lt;span class="html">input&lt;/span> &lt;span class="attr">type&lt;/span>&lt;span class="kwrd">="button"&lt;/span> &lt;span class="attr">id&lt;/span>&lt;span class="kwrd">="activate"&lt;/span> &lt;span class="attr">value&lt;/span>&lt;span class="kwrd">="Activate the Reactor!"&lt;/span> &lt;span class="kwrd">/&gt;&lt;/span></div></code></pre></td></tr></table></div></figure></div>


<p>You can wire up a click even to this button by simply&hellip;</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>$(&lt;span class="str">'activate'&lt;/span>).observe(&lt;span class="str">'click'&lt;/span>, function() { alert(&lt;span class="str">'RUN!'&lt;/span>);});</div></code></pre></td></tr></table></div></figure></div>


<p>Wiring up events&nbsp;in this manner will help keep&nbsp;you from leaking memory and generally provides better syntax.</p>


<p><strong>Objects</strong></p>


<p>Sometimes when you are writing code that has complex javascript, the functions seem to relate, however they are just placed in file in global scope.&nbsp; This breaks down when you have lots of scripts from various components on a page and sooner or later things will start to conflict.&nbsp; I mean, how many `init()` methods can you have on a page?&nbsp; Would you write a C# program with nothing but 1 class?</p>


<p>Grouping this functionality into javascript classes can really help streamline and encapsulate your javascript code.&nbsp; This is incredibly useful when you have a script for a control on a page but you need to support having multiple instances of that control on the same page.&nbsp; On top of that, with ASP.NET you have to deal with the id munging, so things become even harder.</p>


<p>In prototype (as of 1.6), you create a class like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>var Person = Class.create({initialize: function(name, ) {&lt;span class="kwrd">this&lt;/span>.name = name;},greet: function() {alert(&lt;span class="str">"Hello, "&lt;/span> + &lt;span class="kwrd">this&lt;/span>.name + &lt;span class="str">"!"&lt;/span>);}});&lt;span class="rem">//create a person instance like this:&lt;/span>var joe = &lt;span class="kwrd">new&lt;/span> Person(&lt;span class="str">"Joe"&lt;/span>);joe.greet(); // --&gt;&lt;span class="str">"Hello, Joe!"&lt;/span></div></code></pre></td></tr></table></div></figure></div>


<p>The initialize() method is like a&nbsp;constructor.&nbsp; It will&nbsp;get called when you&nbsp;&ldquo;new&rdquo; up your&nbsp;javascript class.&nbsp; You can extend this&nbsp;object and add more functionality to it pretty easily.</p>


<p><strong>Using Javascript Classes for your Components</strong></p>


<p>Let&rsquo;s say you want to create a type-ahead auto-complete textbox using ASP.NET.&nbsp; Ignoring some of the canned-solutions for the sake of discussion, let&rsquo;s also say we have to write it from scratch.&nbsp; We&rsquo;ll need some script to monitor the value of the textbox, and to send an ajax request with the current value, and to handle the response &amp; fill in a list of values.</p>


<p>Here&rsquo;s an example of how (a very crude) implementation might look:</p>


<p>&nbsp;</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="rem">//referenced (or rendered) only once&lt;/span>var TypeAheadTextbox = Class.create({initialize: function(textbox_id, indicator_id, results_id) {&lt;span class="kwrd">this&lt;/span>.textbox = $(textbox_id);&lt;span class="kwrd">this&lt;/span>.indicator = $(indicator_id);&lt;span class="kwrd">this&lt;/span>.results = $(results_id);&lt;span class="rem">//use .bindAsEventListener to preserve the 'this' pointer&lt;/span>&lt;span class="kwrd">this&lt;/span>.textbox.observe(&lt;span class="str">'keyup'&lt;/span>, &lt;span class="kwrd">this&lt;/span>.processKey.bindAsEventListener(&lt;span class="kwrd">this&lt;/span>));},processKey: function() {&lt;span class="rem">//ignoring the interval, we'll just fire an ajax request for every letter&lt;/span>var &lt;span class="kwrd">value&lt;/span> = $F(&lt;span class="kwrd">this&lt;/span>.textbox);&lt;span class="kwrd">this&lt;/span>.indicator.show();&lt;span class="kwrd">new&lt;/span> Ajax.Request(&lt;span class="str">'/pirate_ships/find'&lt;/span>, {method: &lt;span class="str">'get'&lt;/span>,&lt;span class="kwrd">params&lt;/span>: &lt;span class="str">'filter='&lt;/span> + &lt;span class="kwrd">value&lt;/span>,onComplete: function() { &lt;span class="kwrd">this&lt;/span>.indicator.hide(); },onFailure: function(e) { alert(&lt;span class="str">"Error with ajax request: "&lt;/span> + e); },onSuccess: function(response) {&lt;span class="kwrd">this&lt;/span>.results.innerHTML = response.responseText;}})}});&lt;span class="rem">//initializing multiple controls&lt;/span>Event.observe(window, &lt;span class="str">'load'&lt;/span>, function(){var textbox1_autocomplete = &lt;span class="kwrd">new&lt;/span> TypeAheadTextbox(&lt;span class="str">'&lt;%= txtbox1.ClientID %&gt;'&lt;/span>, &lt;span class="str">'&lt;%= indicator1.ClientID %&gt;'&lt;/span>,&lt;span class="str">'&lt;%= results1.ClientID %&gt;'&lt;/span>);var textbox2_autocomplete = &lt;span class="kwrd">new&lt;/span> TypeAheadTextbox(&lt;span class="str">'&lt;%= txtbox2.ClientID %&gt;'&lt;/span>, &lt;span class="str">'&lt;%= indicator2.ClientID %&gt;'&lt;/span>,&lt;span class="str">'&lt;%= results2.ClientID %&gt;'&lt;/span>);});</div></code></pre></td></tr></table></div></figure></div>


<p>Of course this code is incomplete, but it&rsquo;s definitely a start, and it amazes me at how simple it is.&nbsp; One hiccup that I ran across doing something similar was the .bindAsEventListener noise.&nbsp; You can read about that here, but&nbsp;the short of it&nbsp;is that&nbsp;javascript will lose &lsquo;this&rsquo; in those types of&nbsp;event handlers.&nbsp; Using .bindAsEventListener will fix this for you.Another trick is to use something like:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>initialize: function(msg) {var self = &lt;span class="kwrd">this&lt;/span>; &lt;span class="rem">//for use later&lt;/span>&lt;span class="kwrd">this&lt;/span>.msg = msg;},foo: function() {alert(self.msg);}</div></code></pre></td></tr></table></div></figure></div>


<p>We&rsquo;ve al
so isolated the area where we need to pass in the generated ClientID of the controls we want to interact with.&nbsp; This snippet of code can reside on the page, whereas the rest of the code reside ina separate file.</p>


<p>I&rsquo;m no javascript ninja, but I have a vast appreciation for all that these libraries give us.&nbsp; Yet it still amazes me that a lot of people don&rsquo;t use them!&nbsp; So go tell a friend or co-worker about the benefits of a good javascript libary.</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/prototype-protips-2-preventing-memory-leaks-creating-objects/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/precompiling-asp-net-applications-and-the-dreaded-loadresource-failure-error/">Precompiling ASP.NET Applications and the Dreaded LoadResource Failure Error</a></h1>
    
    
      <p class="meta">




<time datetime="2008-07-02 00:00:00 -0500" pubdate  updated >Jul 2<span>nd</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>This is a very strange problem that burned quite a bit of my time last week.&nbsp; Hopefully this will be found by someone else with a similar dilemma.</p>


<p>Basically I&rsquo;ve got a central web application project that I use to house user controls to be shared by many applications.&nbsp; To accomplish this, I&rsquo;ve followed <a href="http://odetocode.com/Blogs/scott/archive/2005/10/06/2326.aspx" target="_blank">this post</a> by&nbsp;K. Scott Allen (of OdeToCode fame).</p>


<p>Since precompiling an ASP.NET project produces (at least) one funkily-named dll, I decided to ILMerge it with the code-behind assembly.&nbsp; So the process looks like this:</p>


<p>After-build:</p>


<ul><li>Precompile the website, updatable=false, into a temporary directory</li><li>Merge App_Web*.dll &amp; my project assembly together into one</li><li>Reference this in another project &amp; use the controls</li></ul>


<p>If you look at this dll in reflector, you get something like this:</p>


<p><img src="/images/reflector1.png" alt="Reflector1"  border="0"  /></p>


<p><em>As a side-note, If you haven&rsquo;t ever tried doing this before then you should know that you have to reference the compiled user control classes from the ASP namespace in your pages&hellip; so in this example &lt;cc1:keywordgrid_ascx /&gt; rather than &lt;cc1:KeywordGrid /&gt;.</em></p>


<p>This first control worked just fine.&nbsp; It was basically a custom GridView control.&nbsp; Then I added that next control, SelectKeywords.&nbsp; Adding it caused the assembly to crash upon loading, i.e. even when we weren&#8217;t using SelectKeywords it was crashing pages that used KeywordGrid.&nbsp; The error:</p>


<p><img src="/images/error1.png" alt="Error1"  border="0"  /></p>


<p>This happened in the constructor of any control in the assembly.&nbsp; Digging a little deeper into the error, I found that this happens when your user control has literal content in it that gets embedded as a Win32 resource file during precompilation.</p>


<p>In reflector, this is what it looked like:</p>


<p><a href="http://www.flux88.com/uploads/reflector2.png"><img src="/images/reflector2_thumb.jpg" alt="Reflector2"  border="0"  /></a></p>


<p>When building the control tree, the compiler was embedding literal content as a resource.&nbsp; To try and fix the issue, I started removing literal content.&nbsp; Bit-by-bit I removed some HTML until the error went away.&nbsp; This is what reflector looked like when it was working:</p>


<p><a href="http://www.flux88.com/uploads/reflector3.png"><img src="/images/reflector3_thumb.jpg" alt="Reflector3"  border="0"  /></a></p>


<p>But where is this resource file?&nbsp; Clearly the assembly is referencing <em>some resource file</em> somewhere, right?&nbsp; I peeked into Temporary ASP.NET Files to find the answer.</p>


<p><img src="/images/temp_2Daspnet_2Dfiles.png" alt="Temp-aspnet-files"  border="0"  /></p>


<p>If you open this up in Notepad, you&rsquo;ll find your missing literals!</p>


<p><img src="/images/notepad_2Dresource.png" alt="Notepad-resource"  border="0"  /></p>


<p>For some reason, this file wasn&rsquo;t making it into the final assembly.&nbsp; </p>


<p>So if you have more than 256 characters of contiguous literal content, the compiler will put this into a resource file (likely for perf reasons).&nbsp; Sadly there is no way to turn this off.&nbsp; </p>


<p>I&rsquo;m not sure if ILMerging the assembly was the reason why this was getting lost, but luckily <a href="http://blogs.msdn.com/davidebb/" target="_blank">David Ebbo</a> from Microsoft was able to provide me with a couple of options.</p>


<ol><li>You can break up the literal content by injecting empty code blocks like <code style="BACKGROUND-COLOR: yellow">&lt;% %&gt;</code> but who would really want to do that?</li><li>You can fake out the compiler &amp; supply a code provider that claims to not support Win32 Resource files.&nbsp; This is what I chose.</li></ol>


<p>I created a class (of course in another assembly, otherwise you have a chicken-and-egg problem):</p>


<p><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: rgb(43,145,175)">CustomCodeDomProviderWithoutWin<wbr>32ResSupport</span> : <span style="COLOR: rgb(43,145,175)">CSharpCodeProvider<br /></span></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">{<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">bool</span> Supports(<span style="COLOR: rgb(43,145,175)">GeneratorSupport</span> generatorSupport)<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp; {<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: blue">if</span> ((generatorSupport &amp; <span style="COLOR: rgb(43,145,175)">GeneratorSupport</span>.Win32Resources) == generatorSupport)<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: blue">return</span> <span style="COLOR: blue">false</span>;</span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;</span></p>


<p><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="COLOR: blue">return</span> <span style="COLOR: blue">base</span>.Supports(generatorSupport);<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp; }<br /></span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">}</span></p>


<p>To get the precompiler to use this new class, add this to your web.config:</p>


<p><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&lt;</span><span style="FONT-SIZE: 12pt; COLOR: rgb(163,21,21); FONT-FAMILY: Consolas">system.codedom</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&gt;<br /></span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp; &lt;</span><span style="FONT-SIZE: 12pt; COLOR: rgb(163,21,21); FONT-FAMILY: Consolas">compilers</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&gt;<br /></span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;</span><span style="FONT-SIZE: 12pt; COLOR: rgb(163,21,21); FONT-FAMILY: Consolas">compiler</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas"> </span><span style="FONT-SIZE: 12pt; COLOR: red; FONT-FAMILY: Consolas">language</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">=</span><span style="FONT-SIZE: 12pt; FONT-FAMILY: Consolas">&#8221;<SPAN style="color: blue">c#;cs;csharp</SPAN>&#8221;<span style="COLOR: blue"> </span><span style="COLOR: red">extension</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">.cs</SPAN>&#8221;<span style="COLOR: blue"> </span><span style="COLOR: red">type</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">MyAssembly.CustomCodeDomProvide<WBR>rWithoutWin32ResSupport, MyAssembly</SPAN>&#8221;<span style="COLOR: blue"> </span><span style="COLOR: red">warningLevel</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">1</SPAN>&#8221;<span style="COLOR: blue"> /&gt;<br /></span></span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&nbsp;&nbsp;&nbsp; &lt;/</span><span style="FONT-SIZE: 12pt; COLOR: rgb(163,21,21); FONT-FAMILY: Consolas">compilers</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&gt;<br /></span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&lt;/</span><span style="FONT-SIZE: 12pt; COLOR: rgb(163,21,21); FONT-FAMILY: Consolas">system.codedom</span><span style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Consolas">&gt;</span></p>


<p>Now my user controls can have as much literal content as they need and resources will not get added.&nbsp; I&rsquo;d like to thank <a href="http://blogs.msdn.com/davidebb/"
target="_blank">David Ebbo</a> for his assistance in helping me figure this out.&nbsp; Thanks David!</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/07/precompiling-asp-net-applications-and-the-dreaded-loadresource-failure-error/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/06/net-database-migration-tool-roundup/">.NET Database Migration Tool Roundup</a></h1>
    
    
      <p class="meta">




<time datetime="2008-06-05 00:00:00 -0500" pubdate  updated >Jun 5<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>A very long time ago <a href="http://www.flux88.com/DatabaseMigrationsForNET.aspx" target="_blank">I posted</a> about my excitement that the .NET community was starting to see some love in terms of database migrations.</p>


<p>Fast forward more than a year and we have the following options for doing database migrations in .NET.</p>


<ul><li><a href="http://wiki.rubyonrails.org/rails/pages/HowtoConnectToMicrosoftSQLServer" target="_blank">Rails Migrations running on SQL Server</a></li><li><a href="http://www.rikware.com/RikMigrations.html" target="_blank">RikMigrations</a></li><li><a href="http://code.google.com/p/tarantino/" target="_blank">Tarantino</a></li><li><a href="http://code.google.com/p/migratordotnet/" target="_blank">Migrator.NET</a></li><li><a href="http://blog.eleutian.com/2008/04/25/AFirstLookAtMachineMigrations.aspx" target="_blank">Machine Migrations</a><a href="http://blog.eleutian.com/2008/04/25/AFirstLookAtMachineMigrations.aspx" target="_blank"></a></li><li><a href="http://blog.wekeroad.com/2007/10/03/subsonic-migrate-me/" target="_blank">Subsonic Migrations</a></li><li><a href="http://dbdeploy.com/2007/09/25/dbdeploynet-v10-officially-released/" target="_blank">dbDeploy.NET</a></li></ul>


<p><em>If I’ve left off one, I apologize.</em></p>


<p>That’s a crazy amount of options, and of course it beg’s the question: <strong><em>Which one should I use?</em></strong></p>


<p>There are pros and cons of each, and for my specific needs I wound up choosing Migrator.NET.&nbsp; I thought I’d post my thoughts on each tool here.</p>


<p><strong>Rails Migrations</strong></p>


<p>When I first raised the question of the lack of good migration tools for .NET a few people pointed out that there’s nothing stopping me from running the standard Rails migrations on SQL Server.&nbsp; This is done through installing a gem.&nbsp; However at 90% of my clients (or more) the use of Ruby is way too Alpha Geek to actually gain buy-in from the business.&nbsp; This is a shame, but a current reality.&nbsp; In addition, Rails migrations get really powerful when you leverage ActiveRecord classes within your migrations.&nbsp; Since we aren’t using Rails at all, this isn’t possible.&nbsp; Additionally, earlier versions of Rails migrations <em>did not support foreign keys</em>.&nbsp; That’s a serious killer for a lot of folks.&nbsp; I’m not sure if it has changed.</p>


<p>Rails Migrations look like this:</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>class AddSystemSettings &lt; ActiveRecord::Migrationdef self.upcreate_table :system_settings do |t|t.string:namet.string:labelt.text:valuet.string:typet.integer:positionendSystemSetting.create :name =&gt; "notice", :label =&gt; "Use notice?", :value =&gt; 1enddef self.downdrop_table :system_settingsendend&lt;br></div></code></pre></td></tr></table></div></figure></div>


<p><br><em>taken from: <a href="http://api.rubyonrails.org/classes/ActiveRecord/Migration.html">http://api.rubyonrails.org/classes/ActiveRecord/Migration.html</a></em> </p>


<p>Running migrations is as easy as the command: </p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>rake db:migrate&nbsp;</div></code></pre></td></tr></table></div></figure></div>


<p><strong>RikMigrations</strong></p>


<p>RikMigrations was the first one I tried.&nbsp; They have an excellent fluent API, and allows you to build tables and columns by chaining together commands.&nbsp; Unfortunately, they didn’t seem to have SQL 2005 Schema support and that is something that I require.&nbsp; I could probably send them a patch, but I decided to continue my search.</p>


<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span style="color: blue;">using &lt;/span>RikMigrations;[assembly: &lt;span style="color: rgb(43, 145, 175);">Migration&lt;/span>(&lt;span style="color: blue;">typeof&lt;/span>(BlogMigration1), 1)][assembly: &lt;span style="color: rgb(43, 145, 175);">Migration&lt;/span>(&lt;span style="color: blue;">typeof&lt;/span>(BlogMigration2), 2)]&lt;span style="color: blue;">namespace &lt;/span>Blog.Migrations{&lt;span style="color: blue;">public class &lt;/span>&lt;span style="color: rgb(43, 145, 175);">BlogMigration1 &lt;/span>: &lt;span style="color: rgb(43, 145, 175);">IMigration&lt;/span>{&lt;span style="color: blue;">&lt;/span>&lt;span style="color: blue;">public void &lt;/span>Up(&lt;span style="color: rgb(43, 145, 175);">DbProvider &lt;/span>db){&lt;span style="color: rgb(43, 145, 175);">Table &lt;/span>t = db.AddTable(&lt;span style="color: rgb(163, 21, 21);">"Blog"&lt;/span>);t.AddColumn(&lt;span style="color: rgb(163, 21, 21);">"ID"&lt;/span>, &lt;span style="color: blue;">typeof&lt;/span>(&lt;span style="color: blue;">int&lt;/span>)).PrimaryKey().AutoGenerate();t.AddColumn(&lt;span style="color: rgb(163, 21, 21);">"Name"&lt;/span>, &lt;span style="color: blue;">typeof&lt;/span>(&lt;span style="color: blue;">string&lt;/span>), 64);t.Save();}&lt;span style="color: blue;">&lt;br>&lt;/span>&lt;span style="color: blue;">public void &lt;/span>Down(&lt;span style="color: rgb(43, 145, 175);">DbProvider &lt;/span>db){ db.DropTable(&lt;span style="color: rgb(163, 21, 21);">"Blog"&lt;/span>);}&lt;br>}&lt;span style="color: blue;">&lt;/span></div></code></pre></td></tr></table></div></figure></div>




<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span style="color: blue;">public class &lt;/span>&lt;span style="color: rgb(43, 145, 175);">BlogMigration2 &lt;/span>: &lt;span style="color: rgb(43, 145, 175);">IMigration&lt;/span>{&lt;span style="color: blue;">&lt;/span>&lt;span style="color: blue;"> public void &lt;/span>Up(&lt;span style="color: rgb(43, 145, 175);">DbProvider &lt;/span>db) {&lt;span style="color: rgb(43, 145, 175);"> Table &lt;/span>t = db.AlterTable(&lt;span style="color: rgb(163, 21, 21);">"Blog"&lt;/span>); t.AddColumn(&lt;span style="color: rgb(163, 21, 21);">"Description"&lt;/span>, &lt;span style="color: blue;">typeof&lt;/span>(&lt;span style="color: blue;">string&lt;/span>), &lt;span style="color: blue;">int&lt;/span>.MaxValue); t.Save(); }&lt;span style="color: blue;"> &lt;br> public void &lt;/span>Down(&lt;span style="color: rgb(43, 145, 175);">DbProvider &lt;/span>db) {&lt;span style="color: rgb(43, 145, 175);"> Table &lt;/span>t = db.AlterTable(&lt;span style="color: rgb(163, 21, 21);">"Blog"&lt;/span>); t.DropColumn(&lt;span style="color: rgb(163, 21, 21);">"Description"&lt;/span>); t.Save(); }&lt;font color="#0000ff"> &lt;/font>}}</div></code></pre></td></tr></table></div></figure></div>


<p>Running this migration is done like so:</p>


<p><img src="/images/rikmigrations_2Dcmd_2Dline_small.jpg" alt="Rikmigrations-cmd-line"  border="0" /></p>


<p>Question:&nbsp; How did it know which migrations to run?&nbsp; Answer:&nbsp; They created a table to keep track of it for you…</p>


<p><img src="/images/rik_2Dmigrations_2Dmodule_2Dversions_small.jpg" alt="Rik-migrations-module-versions"  border="0" /></p>


<p>The cool thing about RikMigrations is you can have versions of different modules, which could really help if you have unrelated areas of the application that each need their own version.&nbsp; My current project could use something like this to separate unrelated application schemas, while maintaing only a single migration process.</p>


<p><br><strong>Tarantino</strong></p>


<p>Tarantino also seemed compelling, and it’s the tool we’re using with <a href="http://codecampserver.org/" target="_blank">CodeCampServer</a>, however I think that using a fluent API in C# is a little more compelling (however you’re at the whim of the API’s feature-set, unless they let you execute raw sql <strong>also</strong>, which many do).&nbsp; Tarantino works by storing scripts that are named like&nbsp;<strong>0001_add_customers_table.sql</strong> and it runs them in the right sequence.&nbsp; This works well if you would like to continue to leverage your GUI tools such as SQL Server Management Studio.&nbsp; Then you leverage a tool such as <a href="http://www.red-gate.com/" target="_blank">RedGate SQL Compare</a>&nbsp;to generate the change scripts.&nbsp; These scripts are generally large and not very readable, however this method is quite common and effective.</p>


<p>Here an example of what this looks like:</p>


<p><img src="/images/tarantino_2Dscripts_small.jpg" alt="Tarantino-scripts"  border="0" /></p>


<p>And these files are run using a NAnt task…</p>


<p><img src="/images/tarantino_2Dnant_2Dtask_small.jpg" alt="Tarantino-nant-task"  border="0" /></p>


<p>Running this task gives output similar to this:</p>


<p><img src="/images/tarantino_2Dcmd_2Dline_small.jpg" alt="Tarantino-cmd-line"  border="0" /></p>


<p>You can see that it – like RikMigrations – knew that it had already exceuted Versi
on 1 of the database schema, so it could safely skip the script.&nbsp; This is done in a similar manner to the other tools by using a table to record the current version of the database.</p>


<p><strong>SubSonic Migrations</strong></p>


<p>SubSonic migrations seemed like the perfect choice for my project, since we use Subsonic already.&nbsp; However I’m running a bastardized version and it’s preventing me from updating to the latest trunk.&nbsp; Having two different versions of Subsonic as dependencies feels dirty and confusing to other developers.</p>


<p>With Subsonic Migrations you don’t have a project that contains your migrations, you just have a folder with classes.&nbsp; The filename carries the weight here, not the class name or attribute.&nbsp; This appeals to me and feels a bit liberating, with my rails-envy and all.&nbsp; However it does feel a bit unnatural to handle migrations outside of a project in our solution.</p>


<p>The API in Subsonic migrations is my least favorite so far, but not by much.&nbsp; All of these tools have similar API’s, it just took me longer to grok this one.</p>


<p>For an intro on how to use this tool, check out <a href="http://blog.wekeroad.com/2007/10/03/subsonic-migrate-me/" target="_blank">Rob Conery’s post</a> on the subject.</p>


<p><strong>Migrator.NET</strong></p>


<p>This project has had an… interesting lifecycle.&nbsp; Originally I believe it was part of the <a href="http://castleproject.org/" target="_blank">Castle Project</a>, maintained by <a href="http://macournoyer.wordpress.com/2007/09/18/the-migrations-for-net-project-is-not-dead-yet/" target="_blank">Macournoyer</a>, then it drifted over to <a href="http://monkeyb.wordpress.com/2007/09/18/maintaining-migratornet/" target="_blank">Nick Hemsley</a>.&nbsp; The project is now up at <a href="http://code.google.com/p/migratordotnet/" target="_blank">google code</a>.&nbsp; Migrator.NET was easy to get into and the API was very simple and easy to grok.</p>


<p>The API for Migrator.NET isn’t as fluent as RikMigrations, but it did have builtin schema support for SQL Server 2005, which I needed.&nbsp; The Attribute on the class also seemed a lot cleaner than the assembly attribute in RikMigrations.</p>


<p><img src="/images/migratordotnet_2Dsyntax.png" alt="Migratordotnet-syntax"  border="0" /></p>


<p>Running the migrations was easy as well with the Migrator.Console.exe command line utility.&nbsp; The output is nothing new, so I’ll spare you the screenshot.</p>


<p><strong>Machine Migrations</strong></p>


<p>This one looks pretty good, however not as mature as some of the other tools (I think it’s the newest on the scene).&nbsp; Machine Migration relies on an MSBuild task to migrate your database.&nbsp;<strike> It is .NET 3.5 only and thus, not available for my project</strike> <font color="#ff0000">It is 2.0, my mistake!</font>.&nbsp; <a href="http://hammett.castleproject.org/?p=290" target="_blank">Hammet has a short review here</a>, and <a href="http://hammett.castleproject.org/?p=292" target="_blank">subsequently patched it to provide a few additional features</a>.</p>


<p>I may start using Machine Migrations on a side-project I’m working on so that I can get a better idea of the differences it has with other frameworks.</p>


<p><strong>Where’s DB Pro / Data Dude / Visual Studio 2005 Team Edition for Database Professionals ?</strong></p>


<p>Ahh, the tool that loves to piss me off continually is somehow missing from this list?&nbsp; That’s because this tool just doesn’t facilitate a good evolutionary style of database development.&nbsp; I have honestly tried to work effectively with it&nbsp;and it consistently adds friction to our process.&nbsp; I’ve talked to a bunch of other users and they all pretty much say the same thing:&nbsp; <strong>it doesn’t work like that</strong>.&nbsp; And that’s really sad, because 2008 is no different.&nbsp; Sure it’s better, and as far as MSFT V2 products go I think this will be the poster child for v1 suckage, but 2008 still doesn’t have migrations.&nbsp; Today I saw on <a href="http://blogs.msdn.com/gertd/archive/2008/06/03/vsts-2008-database-edition-gdr-june-ctp.aspx" target="_blank">Gert Draper’s blog some info on the latest out of band release</a>, which includes some awesome changes, however there is no peep of anything resembling evolutionary development with the database.</p>


<p>This omission tells me that the DB Pro team is only listening to one community (the large enterprise customer) and completely ignoring what’s going on in the agile camp.&nbsp; Maybe Phil Haack &amp; Scott Gu could take over once MVC ships and provide some real change in that organization.</p>


<p>Anyway, rant over.</p>


<p>Migrations are an effective tool for frictionless automation &amp; evolutionary database development <em>especially with multiple developers.&nbsp; </em>With all of these tools out there, it’s hard to choose which one will fit your process.&nbsp; I think the best advice is to just pick a tool and spike it, see what works and what’s painful.</p>


<div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/database+migrations">database+migrations</a></div>

</div>
  <footer>
    <a rel="full-article" href="/2008/06/net-database-migration-tool-roundup/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/alt-net-geek-dinner-recap/">ALT.NET Geek Dinner Recap</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-28 00:00:00 -0500" pubdate  updated >May 28<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>The pizza was good and the conversation was even better.&nbsp; We had 9 people show up and we talked a lot about tech, Microsoft, Test Driven Development, and beer!</p>


<p> <p>I brought up the subject of possibly organizing an ALT.NET Open Spaces conference here in Houston, and folks seemed interested.&nbsp; I&#8217;m a little frightened by the amount of work this will be, but in the end I think it will be worth it.&nbsp; We also decided on getting a google group setup, so if you&#8217;re in the Houston area (or just want to listen in) then join us at <a href="http://groups.google.com/group/houstonaltdotnet" target="_blank">http://groups.google.com/group/houstonaltdotnet</a>.&nbsp; We&#8217;ll use this for future planning.</p> <p>Unfortunately I forgot to take a picture of the group, whoops!&nbsp; I guess that just means we&#8217;ll have to meet again :)</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/05/alt-net-geek-dinner-recap/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/using-asp-net-mvc-on-iis-6-without-the-mvc-extension/">Using ASP.NET MVC on IIS 6 Without the .MVC Extension</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-27 00:00:00 -0500" pubdate  updated >May 27<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>One awesome features of ASP.NET MVC is the clean URLs.&nbsp; If you aren&#8217;t familiar with them, here is a sample:</p>


<p> <blockquote> <p>/products/list</p> <p>(versus a typical /ProductList.aspx)</p></blockquote> <p>The default route for ASP.NET MVC looks like this:</p> <blockquote> <p>/{controller}/{action}</p></blockquote> <p>Using this route you can map most of the URLs that your application will need.&nbsp; There is a problem, however, when running ASP.NET MVC on IIS6 (and 5).&nbsp; The URL above doesn&#8217;t have an extension, so IIS will assume that it is a virtual directory on the server.&nbsp; We have a couple of options we can do to get around this:</p> <ul> <li>We could create wild card mappings and pass every request through ASP.NET, however this is not recommended for performance reasons<li>We can add an extension that maps to ASP.NET (.mvc)</li></ul> <p>In the latter option your routes must change to something like this:</p> <blockquote> <p>/{controller}.mvc/{action}</p></blockquote> <p>So URLs generated with this route will look like:</p> <blockquote> <p>/products.mvc/list</p></blockquote> <p>&#8230;which basically reverts our clean urls into, well&#8230; less clean ones.</p> <p>So if you want to deploy to Windows Server 2003 &amp; IIS 6, you&#8217;re out of luck.&nbsp; Well, mostly&#8230;</p> <h2>URL Rewriting to the Rescue</h2> <p>We can leverage an ISAPI filter to rewrite URLs which will allow us to have the nice URLs while still on IIS 6.&nbsp; There are 2 major products that do this for IIS:</p> <ul> <li><a href="http://www.isapirewrite.com/" target="_blank">ISAPI Rewrite</a> ($99)<li><a href="http://cheeso.members.winisp.net/IIRF.aspx" target="_blank">Ionic&#8217;s ISAPI Rewrite Filter</a> (Free)</li></ul> <p>ISAPI Rewrite is the more mature of the two, however it&#8217;s not free.&nbsp; They do provide a free version, but it doesn&#8217;t support regular expressions, so it&#8217;s pretty useless.</p> <p>Jeff Atwood has <a href="http://www.codinghorror.com/blog/archives/000797.html" target="_blank">a nice write-up of these two utilities</a>.&nbsp; In it he notes that the syntax for Ionic&#8217;s ISAPI Rewrite is a little stranger and doesn&#8217;t support the regex that we&#8217;re all used to (since it uses a C regex library, not a .NET one).</p> <p>I decided to choose Ionic&#8217;s because it was free, however there was a lack of information on how to structure URLs, and it required a lot of trial and error to get it working.&nbsp; Luckily they have an automatic logging facility that tells you how the rules are matching up.</p> <p>For ASP.NET MVC, I needed to cover these cases:</p> <ul> <li><strong>A request for / should be redirected to /home</strong><br><em>This isn&#8217;t really required, as .NET can do this for me, however I wanted to ensure that all entry points are at the same URL to avoid Page Rank issues.&nbsp; (See the same Atwood post for information on how important this is)</em><li><strong>A request for /something should be rewritten to /something.mvc<br></strong><em>That is, the user will request it without an extension, but the filter will rewrite it without the user&#8217;s address bar ever changing.</em><li><strong>A request for /something/index should be rewritten to /something.mvc/index<br></strong><em>Just making sure that URLs with actions get the extension only on the first part</em><li><strong>The content directory that contains our javascript, CSS, and images should be excluded from the above rule<br></strong><em>Otherwise we&#8217;d have /content.mvc/styles.css which would be interpreted as a controller, rather than a direct file request.</em></li></ul> <p>I found <a href="http://biasecurities.com/blog/2008/how-to-enable-pretty-urls-with-asp-net-mvc-and-iis6/" target="_blank">a good resource that outlined how to do this with ISAPI Rewrite</a>, however the rules were quite different with Ionic&#8217;s.</p> <p>Here are my rules for Ionic&#8217;s ISAPI Rewrite that works for ASP.NET MVC:</p></p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;strong># empty URL gets mapped to home controller &lt;br>RewriteRule&nbsp; ^/$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /home [R] # map controller parts of urls to .mvc, ignoring the content directory&lt;br>RewriteRule&nbsp; ^(?!/Content)(/[A-Za-z0-9_-]+)(/.*)?$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1.mvc$2&nbsp; [I]&lt;/strong></div></code></pre></td></tr></table></div></figure></div>


<p>It turns out that I only need 2 rules to satisfy the above requirements.&nbsp; The first rule forces the browser to redirect, which will aid in making sure that I <a href="http://www.hanselman.com/blog/UsingISAPIRewriteToCanonicalizeASPNETURLsAndRemoveDefaultaspx.aspx" target="_blank">only have 1 entry point to my website</a>.</p>


<p>The 2nd rule takes the first part of the ULR and adds .mvc to it, appending the remaining verbatim (if any).&nbsp; It also excludes anything beginning with &#8220;content,&#8221; so I&#8217;m free to put images, javascript, css, and other literal file resources there.</p>


<p>The last requirement is to define my routes with <strong>both</strong> .mvc and regular formats.&nbsp; The trick is to define them in the right order.</p>


<p>routes.MapRoute(&#8220;basic&#8221;, &#8220;{controller}/{action}&#8221;, new { &#8230; } );</p>


<p>routes.MapRoute(&#8220;basic_mvc&#8221;, &#8220;{controller}.mvc/{action}&#8221;, new {&#8230;});</p>


<p>Doing this ensures that our .MVC routes will actually function, but when we ask the framework for a URL (such as with Url.Action() or Html.ActionLink) we are handed the extension-less route (since it is defined first).</p>


<h2>Route Testing is IMPORTANT</h2>


<p>I&#8217;ve said it before and I&#8217;ll say it again.&nbsp; <strong>Route testing is important.&nbsp; </strong>A single tiny change can break an entire application.&nbsp; Applying automated tests is critical for any MVC application.&nbsp; Since deployment of an ASP.NET MVC application needs to be flexible, your application should function with either type of route (extensions or not) so that you have flexibility of deployment.</p>


<p>Hard coding a route in 1 single location will prevent you from doing this.&nbsp; Did I mention route testing is important?</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/05/using-asp-net-mvc-on-iis-6-without-the-mvc-extension/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/houston-alt-net-geek-dinner-next-tuesday/">Houston ALT.NET Geek Dinner - Next Tuesday</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-21 00:00:00 -0500" pubdate  updated >May 21<span>st</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>If you&#8217;re in or near Houston, then perhaps you can join our first ALT.NET gathering, which will be an informal geek-dinner!&nbsp; We will discuss various concepts around ALT.NET and see if we can get the ball rolling for organizing an open-spaces conference sometime this year.</p>


<p> <table cellspacing="0" cellpadding="4" width="400" border="1"> <tbody> <tr> <td valign="top" width="200"><strong>When: </strong></td> <td valign="top" width="200">5/27/2008 @ 7:00 PM&nbsp; (That&#8217;s next Tuesday)</td></tr> <tr> <td valign="top" width="200"><strong>Where:</strong></td> <td valign="top" width="200"> <p>Star Pizza<br>2111 Norfolk<br>Houston, TX 77098 <p><a href="http://maps.google.com/maps?f=q&amp;hl=en&amp;geocode=&amp;q=2111+Norfolk,+Houston&amp;sll=37.0625,-95.677068&amp;sspn=44.658568,75.673828&amp;ie=UTF8&amp;z=16&amp;iwloc=addr" target="_blank">(google map)</a></p></td></tr></tbody></table> <p>We&#8217;re not really sure how many are going to attend, so please leave a comment if you plan on joining us.&nbsp; I&#8217;d like to notify the restaurant if we&#8217;re expecting more than 20 to show up. <p>Hope to see you there!</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/05/houston-alt-net-geek-dinner-next-tuesday/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/austin-code-camp-rocked-and-im-tired/">Austin Code Camp Rocked! (and I&#8217;m Tired)</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-18 00:00:00 -0500" pubdate  updated >May 18<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Austin Code Camp 08 was a success, and I&rsquo;m really glad I participated in it.&nbsp; About 150&ndash;200 eager developers came to learn and network with others from around the area.</p>


<p>I was able to attend 2 sessions, the first was &ldquo;Agile in the Enterprise&rdquo; by <a href="http://www.lostechies.com/members/agilejoe.aspx" target="_blank">Joe Ocampo</a>.&nbsp; His talk was full of a ton of powerpoint slides which really didn&rsquo;t fit in with the size of the talk.&nbsp; Here are a few highlights:</p>


<ul><li>What makes success?&nbsp; -&gt; People, Communication</li><li>What makes failure? -&gt;&nbsp;People, Communication</li><li>People are often overlooked as critical factors of success of any project.</li><li>&ldquo;The worst thing you can do is isolate architects from developers.&rdquo;&nbsp; &mdash; I couldn&rsquo;t agree more.&nbsp; </li><li>Siloed teams lead to lack of communication, trust.&nbsp; Change is very difficult.</li><li>Composite teams are cross-functional &ndash; based on component, feature, subsystem, interface</li><li>Agile projects will generally cost MORE &mdash; <em>I can&rsquo;t say I fully agree with this</em></li><li>However, ROI can be realized much sooner, which can help overcome that cost</li><li>In a waterfall project, technical debt is incurred and generally not paid back.&nbsp; Leads to lower pace and more costly maintencance.</li><li>In an agile project, technical debt is minimized, keeping a sustainable pace and enabling change without high cost</li><li>&ldquo;Innovation Games&rdquo; &mdash; to help you drive out features/priority with your customer</li></ul>


<p>Some pics:</p>


<p><img src="/images/iphone_20032_small.jpg" alt="Iphone 032"  border="0"  /></p>


<p><img src="/images/iphone_20033_small.jpg" alt="Iphone 033"  border="0"  /></p>


<p>Next I went to a talk entitled &ldquo;Designing for Stupid Users&rdquo; which was a fantastic title.&nbsp; The talk was about User Experience Design and I found it to be informative but a bit dry.&nbsp; The speaker obviously knew the topic well and could speak to it, but the power point slides where just loaded with text.</p>


<p>There was a great picture on his deck though:</p>


<p><img src="/images/iphone_20036_small.jpg" alt="Iphone 036"  border="0"  /></p>


<p>Basically (it&rsquo;s hard to read) it says the left most &ldquo;thing&rdquo; that the users interact with is the screen.&nbsp; They then go through many different layers of &ldquo;stuff&rdquo; to get to their overall goal, which is a business action.</p>


<p>The rest of the day was me speaking, and I think they all went very well.&nbsp; I did notice, however, that the DDD with NHibernate is just too much material to fit into an hour.&nbsp;&nbsp;I should have submitted these as 2 sessions.&nbsp; I also ran out of time in the Advanced CSS &amp; Javascript talk and didn&rsquo;t get to demo much javascript.</p>


<p>All in all, it was a great event, I got to meet a lot of very cool people and I learned a bunch as well.</p>


<p>Thanks to all who organized, spoke, or attended the event!&nbsp; It was awesome.</p>


<p>To end the evening, we went to have beers at a nice place.&nbsp; Scott Bellware showed up and we had some really good conversations about community.</p>


<p><img src="/images/iphone_20038_small.jpg" alt="Iphone 038"  border="0"  /></p>


<p><img src="/images/iphone_20039_small.jpg" alt="Iphone 039"  border="0"  /></p>


<p>And then I made my journey back to Houston and slept for 10 hours.&nbsp; <img src="/images/smile3_.gif"   /></p>


<p>(oh, and you can download all of the material from the code camp at their <a href="http://code.google.com/p/austincodecamp08/" target="_blank">google code repository</a>)</p>


<p>&nbsp;</p>

</div>
  <footer>
    <a rel="full-article" href="/2008/05/austin-code-camp-rocked-and-im-tired/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/speaking-at-austin-code-camp-this-saturday/">Speaking at Austin Code Camp This Saturday</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-13 00:00:00 -0500" pubdate  updated >May 13<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>I must be crazy.&nbsp; I submitted four sessions for Austin Code Camp and they were all accepted!&nbsp; It will be a long weekend for sure.&nbsp; You can find out more details here:&nbsp; <a href="http://www.austincodecamp.com">http://www.austincodecamp.com</a>.</p>


<p> <p>If you&#8217;re going to attend, be sure to hit up one of my talks:</p> <ul> <li>ReSharper-Fu</li> <li>Inversion of Control Quickstart</li> <li>Advanced CSS and Javascript</li> <li>Domain Driven Design w/ NHibernate</li></ul> <p>I&#8217;m sure that we&#8217;ll put together some sort of geek dinner to unwind afterwards.&nbsp; If you&#8217;re interested, drop me a line in the comments!</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/05/speaking-at-austin-code-camp-this-saturday/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/05/screencast-test-driving-an-inventory-screen/">Screencast - Test Driving an Inventory Screen</a></h1>
    
    
      <p class="meta">




<time datetime="2008-05-13 00:00:00 -0500" pubdate  updated >May 13<span>th</span>, 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>A few weeks back <a href="http://chadmyers.lostechies.com/" target="_blank">Chad Myers</a> and I recorded a screencast to demonstrate TDD in action.&nbsp; We had some issues with the recording (again) but I was able to mix it all up and produce this stellar TDD screencast for all of you friends.</p>


<p>A couple things to note:</p>


<ul><li>Chad and I are BDD enthusiasts, not experts&#8230; so you might see a bit of a quirky hybrid approach.&nbsp; Don&#8217;t TwitterFlame us please ;).&nbsp; I am, however, finding that the more and more I use BDD style tests that I feel myself leaning towards that style, but it&#8217;s a progression.</li><li>Chad and I apparently live in different time dimensions, as our audio streams were totally out of sync.&nbsp; I tried to fix it, but I&#8217;m a coder, not a production contortionist.&nbsp; It&#8217;s definitely watchable, but the last 20 minutes or so is a bit off sync.</li><li>It&#8217;s long&#8230;&nbsp; I tried to bring it down a bit by cutting out silence, but then I just wanted to release it already :)</li></ul>


<p>So without further ado, you can watch the screencast here:</p>


<p><a href="http://www.benscheirman.com/screencasts/tdd-inventory">http://www.benscheirman.com/screencasts/tdd-inventory</a></p>


<p>Total Length: 94min</p>


<p>Please let us know what you think in the comments.&nbsp;&nbsp; If you find this is useful then perhaps we will do more of these.</p>


<p><strong>update:&nbsp; a few of you have asked for the code.&nbsp; I&rsquo;ll be sure and make this available for future screencasts.&nbsp; You can download the project here: </strong></p>


<p><a href="http://www.flux88.com/uploads/TDDInventory.zip" target="_blank"><strong>File Attachment: TDDInventory.zip (139 KB)</strong></a></p>

</div>
  <footer>
    <a rel="full-article" href="/2008/05/screencast-test-driving-an-inventory-screen/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/15/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/13/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Creating a Glow Effect for UILabel and UIButton</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/introducing-appsites/">Introducing App Sites</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/firebug-style-debugging-for-ios/">Firebug-Style Visual Debugging for iOS</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/vim---could-not-invoke-jslint/">Vim - Could Not Invoke JSLint</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
