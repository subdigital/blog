
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fickle Bits</title>
  <meta name="author" content="Ben Scheirman">

  
  <meta name="description" content="I was one of the early adopters for the Zune.&nbsp; My biggest attraction to it was the nice screen, which is great for watching movies on the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://benscheirman.com/blog/page/20/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/projects">Projects</a></li>
  <!-- <li><a href="http://giggletouch.com">Giggle Touch</a></li> -->
  <!-- <li><a href="http://appkickstand.com">AppKickstand</a></li> -->
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/zune-gets-long-awaited-sofwtare-update/">Zune Gets Long Awaited Sofwtare Update</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-14T00:00:00-06:00" pubdate data-updated="true">Nov 14<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was one of the early adopters for the Zune.&nbsp; My biggest attraction to it was the nice screen, which is great for watching movies on the busride to work.<br><br><img src="http://http://www.zune.net/xweb/zune/argoV2/images/ZuneLogo.gif"><br><br>Well now that the new Zune 2.0&#8217;s are out, Microsoft released a much needed software update, both on the PC software side and the Zune firmware.&nbsp; If you have a 1st generation Zune, then go to <a href="http://www.zune.net">http://www.zune.net</a> and grab the latest software update!&nbsp; It&#8217;s worth it!<br><br>Some new features:<br><ul><li>wireless sync<br></li><li>support for podcasts (finally)&nbsp; &#8211; both in the PC software and the Zune itself</li><li>updated UI<br></li></ul><br><br><p></p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/on-fluent-interfaces-and-friction/">On Fluent Interfaces and Friction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-09T00:00:00-06:00" pubdate data-updated="true">Nov 9<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I decided to start that NHibernate Mapping DSL project andopen-source it.&nbsp; Right now it doesn&#8217;t do anything, but you&#8217;re free totake a look at <a href="http://www.assembla.com/space/nhibernate-mapping">http://www.assembla.com/space/nhibernate-mapping</a><br><br>I wrote all of this code test-first, and it allowed me to tackle theinterface and flow the way I thought might be useful.&nbsp; I ended up withsomething that was mildly usable like this:<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">IMapping mapping &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Mapping.For&lt;Product&gt;()&lt;br> .Identity(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Id"&lt;/span>)&lt;br> .Property(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Name"&lt;/span>)&lt;br> .Property(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Price"&lt;/span>)&lt;br> .Map();&lt;/span></span></code></pre></td></tr></table></div></figure>


<br>So this allows me to quickly accept the defaults of the mappings, so NHibernate will assume that I have &#8230;<br><ul><li>the column names are the same as the property names<br></li><li>the type of the column matches the type of the property and it can be picked up via reflection</li><li>the identity generator of the primary key is Identity</li><li>the identity/properties have setters</li><li>the &#8220;Name&#8221; and &#8220;Price&#8221; columns are nullable</li></ul>This isn&#8217;t always true of course, so we need to be able to specify where we deviate from the defaults.&nbsp; So how can we accomplish this using a fluent interface?&nbsp; We could resort to adding more overloads to the Identity() method, so you might have&#8230;.<br><br>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">IMapping mapping &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Mapping.For&lt;Product&gt;()&lt;br> .Identity(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Id"&lt;/span>, &lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_id"&lt;/span>, Access.NoSetterCamelcaseUnderscore, Generator.Native)&lt;br> .Property(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Name"&lt;/span>, &lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_name"&lt;/span>, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">false&lt;/span>)&lt;br> .Property(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Price"&lt;/span>, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">false&lt;/span>)&lt;br> .Map();&lt;br>&lt;/span></span></code></pre></td></tr></table></div></figure>


<p>But we don&#8217;t know how many settings the user might want to specify.&nbsp; If we have 4 simple, independent settings, then we&#8217;d have to support 4! method overload options!&nbsp; Yuck!<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">public&lt;/span> IPropertySpecificationPredicate Property(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> name);&lt;br>&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">public&lt;/span> IPropertySpecificationPredicate Property(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> name, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> columnName);&lt;br>&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">public&lt;/span> IPropertySpecificationPredicate Property(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> name, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> columnName, DbType type);&lt;br>&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">public&lt;/span> IPropertySpecificationPredicate Property(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> name, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> columnName, DbType type, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">int&lt;/span> length);&lt;br>&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">public&lt;/span> IPropertySpecificationPredicate Property(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> name, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">string&lt;/span> columnName, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">bool&lt;/span> nullable);&lt;br>...&lt;/span></span></code></pre></td></tr></table></div></figure>


<p>This is just the beginning.&nbsp; What if you wanted to only specify the property name and the nullability?&nbsp; We quickly end up in an anti-pattern I like to call <b>overload explosion</b>.&nbsp; <br><br>We can do a bit better, right?&nbsp; I started to gather my thoughts and came up with this syntax:<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">IMapping mapping &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Mapping.For&lt;Product&gt;()&lt;br>.Identity(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Id"&lt;/span>)&lt;br>.Column(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_id"&lt;/span>)&lt;br>.Generator(Generator.Native)&lt;br>.Map();&lt;/span></span></code></pre></td></tr></table></div></figure>


<p>So now the Identity() method takes a single parameter, the name of the property.&nbsp; Anything else is optional.&nbsp; The return type is now something like an IIdentityBuilder interface, which accepts methods on altering the identity object that its building.&nbsp; Here you can see that we only specified the settings that we wanted, nothing else.&nbsp; We still had to have a way to &#8220;pop&#8221; the current object (and thus the entire mapping) so that we can indicate to the builder that we are done building the property and you can return the IMapping object next.&nbsp; This feels awkward for now, but for now it&#8217;s ok.<br><br>Let&#8217;s extend this pattern.&nbsp; Once I&#8217;m working with the IMappingBuilder interface, I can now see methods called Generator(), Access(), Column(), etc.&nbsp; There&#8217;s nothing there to prevent me from calling .Column(&#8220;&#8230;&#8221;).Column(&#8220;&#8230;&#8221;).Column(&#8220;&#8230;&#8221;).Column(&#8220;&#8230;&#8221;) which I guess isn&#8217;t such a big deal.&nbsp; All it&#8217;s doing is setting the column property of this object we&#8217;re building.<br><br>Now I&#8217;m noticing that there has to be a spot where the user gets finished with the mapping identity and now has some choices.&nbsp; The obvious next operation would be to create a property, but how do I pop the current context and start working on a new one?<br><br>Maybe something like this?<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">IMapping mapping &lt;span style="color: Red; background-co
</span><span class='line'>lor: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Mapping.For&lt;Product&gt;().Identity(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Id"&lt;/span>).Column(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_id"&lt;/span>).Generator(Generator.Native).AndProperty(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Name"&lt;/span>).Nullable(&lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">false&lt;/span>).Map();&lt;/span></span></code></pre></td></tr></table></div></figure>


<p></p>


<p>I&#8217;m already started to notice that my identity and property elements are getting lost in the noise.&nbsp; If I keep up this pattern not only do I have TONS of ISomethingPredicateBuilder objects, I also remember that it&#8217;s not only properties that I can add at any time.&nbsp; I could add a Bag, a Set, a List, or any number of other mapping elements.<br><br>Another route I might take is using anonymous to provide me with the flexibility of code within the interface.&nbsp; Take a look:<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;span style="color: Black; background-color: transparent; font-family: Courier New; font-size: 11px;">IMapping mapping &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Mapping.For&lt;Product&gt;().Identity(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Id"&lt;/span>, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">delegate&lt;/span>(Identity i) { i.column &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> &lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_id"&lt;/span>; i.generator &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> Generator.Native;}).AndProperty(&lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"Name"&lt;/span>, &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">delegate&lt;/span>(Property p) { p.column &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> &lt;span style="color: rgb(102, 102, 102); background-color: rgb(228, 228, 228); font-family: Courier New; font-size: 11px;">"product_name"&lt;/span>; p.nullable &lt;span style="color: Red; background-color: transparent; font-family: Courier New; font-size: 11px;">=&lt;/span> &lt;span style="color: Blue; background-color: transparent; font-family: Courier New; font-size: 11px;">false&lt;/span>;}).Map();&lt;/span></span></code></pre></td></tr></table></div></figure>


<p>Here I have a lot more flexibility over the different ways that I define various mapping elements.&nbsp; The only part of this that is really cumbersome is the delegate syntax itself.<br><br>This is probably where Boo or Ruby would come in and save the day because of it&#8217;s super-dynamicness-flexibility-extraordinaire, but I&#8217;d like to see how far I can push C# for now.&nbsp; At least until C# 3.0 comes out, where I&#8217;ll get object initializers, lamba expressions, and a few other neat tricks that really make this stuff more fun to sculpt.<br><br>What about you?&nbsp; What types of syntax do you find most readable, usable?<br></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/prototype-scriptaculous-protips-1/">Prototype & Scriptaculous - Protips #1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-06T00:00:00-06:00" pubdate data-updated="true">Nov 6<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I often talk to people who haven&#8217;t worked with one of the cool javascript frameworks out there.&nbsp;&nbsp;I am partial to <a href="http://prototypejs.org" target="_blank">prototype</a> and <a href="http://script.aculo.us" target="_blank">scripaculous</a>, but I also really like <a href="http://mochikit.org" target="_blank">MochiKit</a>.</p>


<p>If you aren&#8217;t taking advantage of&nbsp;one of these, then perhaps this post&nbsp;is for you&#8230;&nbsp;I give you the ultra quickstart to diving into prototype and scriptaculous!</p>


<h2>Things you shouldn&#8217;t ever program javascript without</h2>


<p> <p>The best thing ever invented since rubber tires: a replacement for document.getElementById(&#8216;control_id&#8217;);</p><p>You know you&#8217;re not supposed to use <code>document.all</code> or <code>document.ctrl_id</code>, right?&nbsp; Well at least now you do. document.getElementById() is the cross-browser safe way of getting an element off of the page. The prototype equivalent is <code>$('control_id')</code>. This will automatically extend the element returned with some helpful utility methods (like extension methods in C# 3.0). &#8211; more on this later.</p><p>Along the same lines is a useful method for selecting elements using CSS selectors. If you&#8217;re a CSS junkie (like me!) you&#8217;ll appreciate this. <code>&amp;nbsp;</code>&nbsp;</p></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$$("div span.info");</span></code></pre></td></tr></table></div></figure>


<p> This will return all of the DOM elements that would be matched by that CSS Selector. (for those who don&#8217;t know, this would get all span tags with a class of &#8220;info&#8221; that are directly nested underneath a div.<p>Want to show or hide an element?&nbsp;Use <code>&lt;strong&gt;Element.hide(ctrl)&lt;/strong&gt;</code>, <code>&lt;strong&gt;Element.show(ctrl)&lt;/strong&gt;</code>, or <code>&lt;strong&gt;Element.toggle(ctrl)&lt;/strong&gt;</code>. You can attach these methods onto the element itself by saying <code>&lt;strong&gt;Element.extend(ctrl)&lt;/strong&gt;</code>. If you retrieved it via the $() method, then your object already has these methods.</p><p>Let&#8217;s say you want to grab all of the span tags from a parent div tag.&nbsp; Typically you&#8217;d do this:</p>&#8220;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var spans = parentDiv.getElementsByTagName("span");</span></code></pre></td></tr></table></div></figure>


<p> <p>but what is spans?&nbsp; If you thought it was an array, you&#8217;d be wrong.&nbsp; It&#8217;s a NodeList, which is not nearly as powerful as a javascript array.&nbsp; (With javascript arrays you can push(), pop(), shift(), and other cool things that you can&#8217;t do with a NodeList.&nbsp; Anyway, back to the spans collection, we can elevate this to an array by using the <code>$A( spans )</code> method.&nbsp; Now we can use all of the nice array goodness for that list.</p><h2>Effects for that extra polish</h2> <p>How about fading an element?</p>&#8220;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new Effect.fade(elem);</span></code></pre></td></tr></table></div></figure>


<p> This also takes options so you can control how fast it fades, for example. Check the excellent docs for all the gory details.<p>Want to make a slide out box?</p>&#8220;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new Effect.toggle(elem, "slide");</span></code></pre></td></tr></table></div></figure>


<p><code>This will toggle the element using slide up and slide down. ("fade" and "appear" also work here for toggling).</code><h2>How about some ajax?</h2><p>Forget UpdatePanels. Most of the time we just need to fire off a request and get a list of values back from the server. Prototype has you covered there:</p>&#8220;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new Ajax.Request( "/path_to_server/ajax/AjaxHandler.ashx?op=getUsername&amp;value=bob",&lt;br>{&lt;br>method: "get",&lt;br>onSuccesss: function(result) {&lt;br> if(result.responseText) alert('available!); else alert('taken');&lt;br>},&lt;br>onFailure: function(e) { alert('something went wrong ' + e); }&lt;br>}</span></code></pre></td></tr></table></div></figure>


<p>I don&#8217;t know about you, but that&#8217;s pretty painless to me.</p>


<p>Want something a bit richer?&nbsp;<b> How about an autocomplete textbox</b>?I wrote this one to auto-complete cities as you type.</p>


<p>&#8220;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var url = '~/AjaxHandler.ashx?op=get_cities';&lt;br>&lt;br>ac = new Ajax.Autocompleter(city_textbox_id, results_id, url, &lt;br>{&lt;br>paramName: 'filter',&lt;br>frequency: 0.2,&lt;br>minChars: 1,&lt;br>indicator: indicator_id,&lt;br>callback : function(element, filter) { &lt;br>var state = $(state_dropdown_id);&lt;br>var state_code = state.options[state.selectedIndex].value;&lt;br>&lt;br>return filter + '&amp;state=' + state_code;&lt;br>}&lt;br>});</span></code></pre></td></tr></table></div></figure>


<p><i>That&#8217;s it</i>.I&#8217;m not kidding.I handed it a textbox, a div to display the results, and a url to get the data.It takes care of all of the ajax requests, the frequency limiter to prevent us from firing a request with every single keystroke, and returning the results into a list.It even has full keyboard support.The url looks like ~/AjaxHandler.ashx?op=get_citiees&amp;state=TX&amp;filter=Hou and it will return the matches that it finds (based on an HttpHandler I wrote).</p>


<p></p>


<p>What are <b>your</b> favorite prototype / scriptaculous protiops?</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/why-no-ribbon-in-visual-studio-2008/">Why No Ribbon in Visual Studio 2008?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-02T00:00:00-05:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yesterday I was getting frustrated with the completely user-unfriendly massive toolbar that Visual Studio boasts, and noted that Visual Studio 2008 <em>should</em> have gotten the ribbon toolbar that shipped with Office 2007.&nbsp; My cube-mate <a href="http://www.pseale.com/blog" target="_blank">Peter</a>&nbsp;said, <blockquote>&#8220;They&#8217;d probably get sued by the Office Team.&#8221;</blockquote><p>Well said, my friend.&nbsp; They probably would.&nbsp; <em>For &#8220;Toolbar Infringement.&#8221;</em>&nbsp;</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/fluent-interfaces-allow-a-higher-level-of-abstraction/">Fluent Interfaces Allow a Higher Level of Abstraction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-31T00:00:00-05:00" pubdate data-updated="true">Oct 31<span>st</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.codinghorror.com/blog/archives/000989.html" target="_blank">Jeff Atwood</a> takes a stand against using embedded languages to express intent.I concur with <a href="http://www.ayende.com/Blog/archive/2007/10/31/Embracing-fluent-interfaces.aspx" target="_blank">Ayende&#8217;s response</a> for most of his points, however I wanted to chime in on the discussion.</p>


<p>Later on, Jeff argues that a better way (or as he puts it, the <b>&#8220;ultimate solution&#8221;</b>) is to include the underlying features of other languages to leverage them natively.He specifically mentions LINQ.Take a look at this sample LINQ syntax:</p>


<p></p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var priorityCustomers = from customer in Customers&lt;br>            where customer.Status = 'Gold'&lt;br>           select customer;</span></code></pre></td></tr></table></div></figure>


<p></p>


<p>This syntax is great, and I welcome it for VS 2008.But this is almost the same thing as the Criteria API in NHibernate, or the Querying API in SubSonic.The only difference is that we&#8217;re not using parentheses and dots all over the place, but the end result is the same.</p>


<p>Having this code directly in our language also makes it more difficult to construct dynamic queries.By dynamic I don&#8217;t mean make the <em>&#8216;Gold&#8217;</em> text a parameter, I&#8217;m talking about building the where clause dynamically based on run-time decisions.Using a query builder API such as SubSonic&#8217;s allows you to do this.</p>


<p>Another point that Atwood makes is that creating fluent interfaces over things like regexes and SQL allows you to NOT learn the underlying concepts, which is unacceptable for professional developers.I agree with him, but LINQ is also one of those!The syntax we wrote above will get translated into a real T-SQL query for us.We should still be cognizant of the SQL that is generated and make adjustments where necessary, but does that mean we always have to program at the lowest common denominator?As professional developers we have to be aware of many technical concepts that are being abstracted from us.A lot of us program in .NET, and most of us probably have a background in C++.I&#8217;m glad I learned C++ so that I understand what&#8217;s going on &#8220;behind the curtain,&#8221; but I&#8217;m programming at a higher level of abstraction now.Remember having to always null-terminate your strings (I mean char arrays)?.I&#8217;m glad I don&#8217;t have to do that anymore.Working at a higher level of abstraction allows me to be more productive.</p>


<p>The languages that we see in the coming years will almost certainly bost higher layers of abstraction and specialty, so that we can more easily build data-driven business applications, or 3D-modeled geology simulations, or whatever your domain is.AT&amp;T has <a href="http://blog.wired.com/27bstroke6/2007/10/att-invents-pro.html" target="_blank">just created a programming language called Hancock</a>, specifically geared for mass surveylance.ERLang is designed specifically for mission-critical, always-on systems.&nbsp; There are many that exist today and even more that we haven&#8217;t seen yet.&nbsp; Don&#8217;t fear the abstractions!<br></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/thinking-of-an-nhibernate-mapping-dsl/">Thinking of an NHibernate Mapping DSL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-26T00:00:00-05:00" pubdate data-updated="true">Oct 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Something about <a href="http://www.ayende.com/blog">Ayende</a> inspires me to build something.&nbsp; I got to thinking today about how I could create a DSL for NHibernate mapping files.&nbsp; What&#8217;s wrong with XML, you say?&nbsp; Well&#8230;<br><br><ul><li><b>It&#8217;s verbose</b> - XML is known for it&#8217;s ability to easily validate based on a schema, not for readability.&nbsp; In other words, XML was designed for computers, not humans.&nbsp; Since I am a human (are you?) I would prefer something a bit more friendly.</li><li><b>Schema Validation takes time</b> - Usually you don&#8217;t notice, but <a href="http://ayende.com/Blog/archive/2007/10/26/Real-World-NHibernate-Reducing-startup-times-for-large-amount-of.aspx">some recent metrics show</a> that it can account for more than 1/2 of the startup time for NHibernate when there are many mapping files.&nbsp; If you have an appliaction with 1000 entities, arguably you have bigger problems than XML&#8217;s readability and schema validation performance, but it IS noticable so hey&#8230;.</li><li><b>Generates runtimes errors for semantic structure - </b>Sure, the syntax is validated, but there are so many things that can go wrong with runtime compilation (that&#8217;s a weird term) of mappings.</li></ul>So I got to thinking how we could do better.&nbsp; Here&#8217;s what I came up with (with some additions from Ayende) &#8211; it&#8217;s in Boo:<br><br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import flux88.NHibernate.Mapping&lt;br>&lt;br>mapping Test.Project, Test.Project.Entities&lt;br>&lt;br> entity Customer,&lt;br>  table: Customers&lt;br> default_access: "nosetter.camelcase-underscore"entity Customer, &lt;br>&nbsp;&nbsp; &nbsp;&nbsp;&lt;br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; identity "Id", &lt;br>      generator: "native"&lt;br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; property Name,&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &lt;br>     column:&nbsp;&nbsp; "CustomerName",&lt;br>  type:&nbsp;&nbsp;&nbsp;&nbsp; "String(12)", &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &lt;br>    nullable: false&lt;br>&lt;br>  property DateJoined,&lt;br>&lt;br>  property Address,&lt;br>     type: "String(200)"&lt;br>&lt;br>  set _orders,&lt;br>  access: "field",&lt;br>     manyToMany Order,&lt;br>       table: Orders,&lt;br>       pk_column: "customer_id",&lt;br>        fk_column: "order_id",&lt;br>       inverse: true&lt;br>     &lt;br> entity Order,&lt;br>   table: Orders&lt;br>&lt;br></span></code></pre></td></tr></table></div></figure>


<p>Note that there isn&#8217;t a ton of extra fluff, it&#8217;s meant to be light-weight and easy to write.&nbsp; Additionally you could set defaults at the top (like default_access) so that you can avoid typing it all over your mappings.</p>


<p>Ayende added the notion of doing this:</p>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>for type in assembly.GetTypes():&lt;br> continue if type.Namespace != "My.Model"&lt;br> entity type.Name, type.Namespace:&lt;br> idenity "id"&lt;br> &lt;br>for prop in type.GetProperties():&lt;br>property prop.Name&lt;br>&lt;br></span></code></pre></td></tr></table></div></figure>


<p>You get the idea.</p>


<p>There could be a number of benefits of doing it like this.&nbsp; First, you can compile it, so you can get syntax errors notified.&nbsp; If you use the BooExplorer I&#8217;m pretty sure you&#8217;d get intellisense for this.&nbsp; I could also see plugging this into a model validator that would reflect over the model and make sure that all of the properties and access strategies will work with the mapping as defined.</p>


<p>Anyway, I have some reading up on DSL&#8217;s to do&#8230; Ayende, that means I need you to <a href="http://www.ayende.com/Blog/archive/2007/10/12/Book-Idea-Writing-Domain-Specific-Languages-in-Boo.aspx">write that book on DSLs with Boo</a> :)&nbsp; Can I have it next week?<br></p>


<p>Thoughts?&nbsp; Suggestions?<br><p></p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/the-msft-open-source-conspiracy-continues/">The MSFT Open Source Conspiracy Continues</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-26T00:00:00-05:00" pubdate data-updated="true">Oct 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The latest news just broke in the <a href="http://www.flux88.com/ImOnToYouMicrosoft.aspx">previously noted</a> Microsoft Conspiracy to Consume good open source project leaders.&nbsp; I&#8217;m sure you&#8217;ve heard it 10 times before me, but what the hell, what&#8217;s 1 more?<br><br><a href="http://blog.wekeroad.com">Rob Conery</a>, creator of <a href="http://susonicproject.com">SubSonic</a> <a href="http://blog.wekeroad.com/2007/10/26/microsoft-subsonic-and-me/">is joining Microsoft full time to work on SubSonic</a>!&nbsp; I think this is great news.&nbsp; First, it reaffirms my belief that Microsoft has their eye dead on the community.&nbsp; Things are changing, and for the better, mark my words (muahahah).<br><br>I can&#8217;t wait to see how this will affect the project, because I know that Rob has passion, and now that he doesn&#8217;t have to worry about other projects, clients, or deadlines&#8230; he can focus and make SubSonic even better!<br><br>Who will be next?&nbsp; Speculate in the comments&#8230;<br><br><br><br><p></p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/ouchfrom-the-altnet-mailing-list/">Ouch!From the ALTNET Mailing List</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-26T00:00:00-05:00" pubdate data-updated="true">Oct 26<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Someone suggested to use DotNetNuke for the community site for ALT.NET and I heard this reply:</p>


<blockquote>I&#8217;d rather chew glass.</blockquote>


<h4>Ouch!</h4>


<p>DotNetNuke does have a lot of flexibility and generally buys you a lot, but I don&rsquo;t find it a joy to work with at all.&nbsp; Especially the OOB experience is just nasty.</p>


<p>&nbsp;</p>


<div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/ALTNET">ALTNET</a></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/bandaids-coke-qtips-kleenex-and-ajax/">Bandaids, Coke, QTips, Kleenex, and Ajax</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-17T00:00:00-05:00" pubdate data-updated="true">Oct 17<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&nbsp;I&rsquo;m sure you&rsquo;ve noticed these&hellip;</p>


<ul><li>Bandaid - Adhesive Bandage</li><li>Coke - Soda (at least here in the crazy south) </li><li>QTip - Cotton Swab </li><li>Kleenex - Tissue </li></ul>


<p>The world doesn&rsquo;t need another one:</p>


<ul><li>Ajax - Microsoft ASP.NET AJAX </li></ul>


<h2>For the 100th time&hellip; AJAX does not mean Microsoft ASP.NET AJAX!</h2>


<p>Need I say more?</p>


<div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/ajax">ajax</a></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/10/mvc-versus-monorail-and-the-corporate-giant/">MVC Versus MonoRail and the Corporate Giant</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-10-15T00:00:00-05:00" pubdate data-updated="true">Oct 15<span>th</span>, 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A lot of buzz is going around about the MVC framework coming out of Microsoft.&nbsp; I posted about how cool it was and got a couple of comments that basically said:&nbsp;</p>


<blockquote>They just copied MonoRail.</blockquote>


<p>Well, yes.&nbsp; In a sense they did.&nbsp; And Rails.&nbsp; And Django.&nbsp; And another one that The Gu mentioned that I hadn&rsquo;t heard of.&nbsp; Is that a bad thing?&nbsp; If you&rsquo;re using MonoRail today, then you should continue to use it.&nbsp; Unless you like some of the different syntax or ability to mock the core ASP.NET Runtime objects.</p>


<p>The reason I think that ASP.NET MVC is so exciting and important is because I often come to clients that refuse to (or make it very difficult) to use non-MSFT produced thingies.&nbsp; Can I use Resharper?&nbsp; No, we gave you Visual Studio.&nbsp; Can I use NHibernate?&nbsp; No we use Enterprise Library.&nbsp; Can I use&nbsp;NAnt, StructureMap, MonoRail, SubSonic?&nbsp; Often times the answer is no.&nbsp; Recently I&rsquo;ve had experience where our team dumped eWorldUI in favor of ASP.NET Ajax Control Toolkit.&nbsp; The reason?&nbsp; Easier to get approved since it has Microsoft&rsquo;s name attached to it.&nbsp; It doesn&rsquo;t matter that eWorldUI is free and easy to implement.&nbsp; It matters because somebody sees eworldui.dll in a bin folder somewhere and everyone wants to know where it came from.</p>


<p>When you work in an organization with 10,000 employees that has widely adopted Microsoft as a technology platform, trying to get something approved like MonoRail is <strong>like trying to convince a Catholic priest that he&rsquo;s really a Mormon</strong>.&nbsp; <em>Ok so that doesn&rsquo;t really make much sense, but what I&rsquo;m getting across is that <strong>it&rsquo;s hard.</strong></em></p>


<p>Some of my readers have already gone down this route, and succeeded.&nbsp; And I commend you.&nbsp; But I have yet to get corporate adoption of something like that.&nbsp; Maybe it&rsquo;s my inability to convince people of the benefits, or sway their concerns about supportability and such.&nbsp; Or maybe I just work with very beligerant clients.&nbsp; </p>


<p><em>Some of my colleagues probably read this blog, so just so you know I&rsquo;m not talking about you&hellip; I&rsquo;m talking about <strong>the other guy</strong>. <img src="/images/smile3.gif"   />.</em></p>


<p>Back to my original argument.&nbsp; Since this is a new framework coming out of Microsoft, I will not have to fight to get it adopted.&nbsp; I can go in and say &ldquo;this is how it&rsquo;s done for <em>real</em> applications&rdquo; and have Microsoft guidance to back me up.&nbsp; Hell, some clients might even ask me for it!&nbsp; That&rsquo;ll be interesting.&nbsp; I can&rsquo;t imagine what it would be like for a client to come up to me and say &ldquo;hey I was thinking, maybe we should use NHibernate for this&hellip;&rdquo;</p>


<p>Thinking about that makes me kind of sad that it <em>hasn&rsquo;t </em>happened before.&nbsp;&nbsp;Am I just unlucky?&nbsp; Am I just not skilled at convincing?&nbsp; Or is this commonplace in the industry?</p>


<p><strong>System.Web.MVC will reach an audience that MonoRail doesn&rsquo;t:&nbsp; The corporate giant who already swallowed the pill and will do anything that Microsoft pushes, good or bad</strong>.&nbsp; And a&nbsp;lot of consultants work firmly in this space.</p>


<div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/asp.net+mvc">asp.net+mvc</a></div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/21/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/19/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/07/houston-code-camp-call-for-speakers/">Houston Code Camp - Call for Speakers</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/serving-assets-from-s3-on-heroku/">Serving Assets from S3 on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2012/02/hello/">Hello, NSScreencast</a>
      </li>
    
      <li class="post">
        <a href="/2012/01/nsscreencasts/">NSScreencasts, Coming Soon</a>
      </li>
    
      <li class="post">
        <a href="/2012/01/careful-with-block-based-notification-handlers/">Careful With Block-Based Notification Handlers</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/subdigital?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo">
<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f26d557844d525165000005');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>


<p>
  Copyright &copy; 2012 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'subdigital';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
