
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fickle Bits</title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/blog/page/9/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="http://appsites.heroku.com/giggletouch">Giggle Touch for
    iOS</a></li>
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/06/jquery-autocomplete-with-a-hidden-value/">jQuery Autocomplete With a Hidden Value</a></h1>
    
    
      <p class="meta">




<time datetime="2009-06-02 00:00:00 -0500" pubdate  updated >Jun 2<span>nd</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p>A number of people commented on my post about a <a href="http://flux88.com/blog/jquery-auto-complete-text-box-with-asp-net-mvc/">jQuery Autocomplete Textbox in ASP.NET MVC</a> wanting to know how to provide a value for the items being displayed.&#160; It’s not an uncommon request.&#160; For many pieces of data you’ll have display values as well as unique identifiers to distinguish &amp; provide reference to the items.</p>


<p>  <p>Unfortunately it’s not well document, however this is fully supported with <a href="http://dyve.net/jquery/?autocomplete">Dylan Verheul’s jQuery autocomplete plugin</a>.</p>  <p>The first step is to separate your display names from the values in your result from the server.&#160; We were retuning cities before, like this:</p></p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>HOUSTON, AK
</div><div class='line'>HOUSTON, AL
</div><div class='line'>HOUSTON, TX
</div><div class='line'>HOUCK, AR
</div><div class='line'>HOUGHTON, IA</div></code></pre></td></tr></table></div></figure></div>




<p>The individual items are separated by a new line character.&#160; In order to provide a value for each of these, you have to separate the item with a pipe “|”.</p>




<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>HOUSTON, AK&lt;strong>|456&lt;/strong>
</div><div class='line'>HOUSTON, AL&lt;strong>|1245&lt;/strong>
</div><div class='line'>HOUSTON, TX&lt;strong>|553&lt;/strong>
</div><div class='line'>HOUCK, AR&lt;strong>|99&lt;/strong>
</div><div class='line'>HOUGHTON, IA&lt;strong>|401&lt;/strong></div></code></pre></td></tr></table></div></figure></div>




<p><em>If your display items might contain a pipe character, then you’ll have to change the separator setting for the plugin.&#160; You can do by providing the option <strong>cellSeparator</strong>.</em></p>


<p>Now that our items have a value coming back from the server, how can we retrieve it when an item is selected?&#160; That is done via the onSelectItem function.&#160; This is a callback that will send you the formatted &lt;li&gt; tag.&#160; If there was a value specified, it will be placed in the <em>extra</em> attribute.</p>


<p>Here’s an example:</p>


<p>$(cities).autocomplete(action_url, {
<br />&#160;&#160;&#160; lineSeparator: &#8216;\n&#8217;,
<br />&#160;&#160;&#160; cellSeparator: &#8216;|&#8217;,
<br />&#160;&#160;&#160; onItemSelect: function(li) {&#160; if(li.extra) alert(&quot;You selected &quot; + li.extra[0]); }
<br /> });</p>


<p>I’ve specified the options for lineSeparator and cellSeparator.&#160; These are the default values, but you can easily change them if the character is a valid portion of the text being returned by the server. </p>


<p>You can use this handler to place the selected value in a hidden field to save it for a form submission.</p>


<p>Hope this helps!&#160; For more information, I suggest you read the source code and examine the <a href="http://dyve.net/jquery/?autocomplete" target="_blank">plugin page source</a> for more examples.</p>

</div>
  <footer>
    <a rel="full-article" href="/2009/06/jquery-autocomplete-with-a-hidden-value/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/06/hello-isaac-isabella/">Hello Isaac & Isabella!</a></h1>
    
    
      <p class="meta">




<time datetime="2009-06-01 00:00:00 -0500" pubdate  updated >Jun 1<span>st</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p>Last saturday, our twins were born!</p>


<p><img src="/images/IMG_3937.jpg"  alt="IMG_3937"  /></p>


<p><strong>Isaac Sawyer Scheirman (5 lbs 1 oz, born at 7:32 PM Saturday 5/23/2009)</strong></p>


<p><strong><br />
<img src="/images/IMG_3893.jpg"  alt="Isabella"  /></strong></p>


<p><strong>Isabella Rose Scheirman (4 lbs 10 oz, born at 7:34 PM on 5/23/2009)</strong></p>


<p>The babies were 6 weeks premature, so they&#8217;re still in the hospital. They&#8217;re both healthy, good lung development, they can maintain their temperature, etc. They just need to gain some more weight so they can come home!</p>


<p>Needless to say, I&#8217;ve been incredibly busy&#8230; :)<br /></p>


<p>I&#8217;ve uploaded more photos are <a href="http://www.flickr.com/photos/bensilvia/sets/72157618845380244/">up on flickr</a> if you&#8217;re interested.</p>

</div>
  <footer>
    <a rel="full-article" href="/2009/06/hello-isaac-isabella/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/upgrading-my-hackintosh-to-10-5-7/">Upgrading My Hackintosh to 10.5.7</a></h1>
    
    
      <p class="meta">




<time datetime="2009-05-13 00:00:00 -0500" pubdate  updated >May 13<span>th</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p>I updated <a href="http://flux88.com/blog/building-a-hackintosh/">my Hackintosh</a> to <a href="http://support.apple.com/kb/HT3397">OS X 10.5.7</a> last night.&#160; Luckily I had just backed up my system volume with SuperDuper the night before, so I felt confident in doing the update.</p>


<p>  <p>Usually updates are the bane of any hack-users existence (I wouldn’t exactly call myself a hacker, as I simply leverage smart peoples’ work).&#160; Updates to OS X generally replace hacked kexts, or add new road bumps that prevent previous hacks from working properly.</p>  <p>In my case, the upgrade went very smoothly.&#160; The system rebooted (twice for some reason) and I was able to log back in.</p>  <p>My sound didn’t work, so I loaded up <a href="http://cheetha.net/">Kext Helper</a> and loaded up these two kexts again:</p>  <ul>   <li><a href="http://www.mediafire.com/?zijzedz4rym">HDAEnabler</a></li>    <li><a href="http://www.filefactory.com/file/afgeac5/n/ALC888_4A_out_amp_2A_1D_in_1_6_2_a37_zip">Custom AppleHDA</a> for my Realtek ALC888 onboard sound card</li> </ul>  <p>(luckily I saved these from previous endeavors)</p>  <p>My drive icons were all orange (as if they were external USB drives instead of internal SATA ones), so I installed this fix to restore their normal icons: </p>  <p><a href="http://pcwizcomputer.com/index.php?option=com_docman&amp;task=doc_details&amp;gid=82&amp;Itemid=74">http://pcwizcomputer.com/index.php?option=com_docman&amp;task=doc_details&amp;gid=82&amp;Itemid=74</a></p>  <p>Everything seems to be running perfectly smooth.</p>  <p><a href="http://flux88.com/files/media/image/WindowsLiveWriter/UpgradingmyHackintoshto10.5.7_B8D6/image_8.png"><img src="/images/image_thumb_3.png" alt="image"  height="500"  /></a> </p>  <p>As an aside, a lot of folks have asked me how my hackintosh is treating me.&#160; Is the honeymoon phase over?&#160; Yes and no.&#160; The system is not without it’s flaws.&#160; I only recently got my microphone to work, and I still haven’t been able to get 5.1 surround to work (which is pretty low on my important-things-to-do list).&#160; My printer doesn’t work, so I’m relegated to printing from XP in VMWare Fusion.&#160; I still need to purchase a nice webcam that works with OS X.</p>  <p>I still thoroughly enjoy using OS X, even more so than Windows 7.&#160; The software is just that much more polished.</p>  <p>For development, it kind of sucks to have to be in Windows to use Visual Studio.&#160; MonoDevelop may get there one day, or perhaps JetBrains will unload an awesome cross-platform .NET IDE.&#160; Who knows.</p>  <p>The last thing I miss are games.&#160; I’ve been seriously considering cancelling my World of Warcraft account, due to lack of time… but I’d still like to play an FPS or two when they come out, and it looks like I’ll have to dual boot if I want to do that, since they’re almost never on the Mac.</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2009/05/upgrading-my-hackintosh-to-10-5-7/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/a-culture-of-microcomponents/">A Culture of Microcomponents</a></h1>
    
    
      <p class="meta">




<time datetime="2009-05-01 00:00:00 -0500" pubdate  updated >May 1<span>st</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p>Imagine that you are given the opportunity to rewrite (or upgrade with extreme prejudice) one of your older .NET 2.0 (or 1.1) projects using .NET 3.5.&nbsp; You wrote it, so you have intimate knowledge of the current architecture, what parts smell, what works well.&nbsp; You know what custom components you wrote to solve various problems, etc.&nbsp; You also have a ton of lessons learned.&nbsp; Now you get to do again, only this time you have more advanced, sharper tools at your disposal.</p>


<p> <p><img style="margin: 0px 20px" align="right" src="http://www.blackwagon.com/Merchant2/graphics/00000001/BRIO010-brio-building-blocks-natural-lg.jpg">I went through this process recently and came up with no shortage of 3rd party libraries I wanted to use for the new version:</p> <ul> <li><a href="https://www.hibernate.org/343.html" target="_blank">NHibernate</a>  <li><a href="http://fluentnhibernate.org/" target="_blank">Fluent NHibernate</a>  <li><a href="http://sourceforge.net/projects/nhcontrib/" target="_blank">NHibernate.Linq</a>  <li><a href="http://www.castleproject.org/container/index.html" target="_blank">Castle Windsor</a>  <li><a href="http://www.castleproject.org/activerecord/documentation/v1rc1/usersguide/validation.html" target="_blank">Castle Validators</a>  <li><a href="http://logging.apache.org/log4net/index.html" target="_blank">log4net</a>  <li><a href="http://www.codeplex.com/AutoMapper" target="_blank">AutoMapper</a>  <li><a href="http://code.google.com/p/elmah/" target="_blank">ELMAH</a>  <li><a href="http://mvccontrib.org" target="_blank">MvcContrib</a>  <li><a href="http://sparkviewengine.com/" target="_blank">Spark</a>  <li><a href="http://jquery.com/" target="_blank">jQuery</a>  <li><a href="http://www.atblabs.com/jquery.corners.html" target="_blank">jQuery rounded corners</a> <li><a href="http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/" target="_blank">jQuery auto-complete</a>  <li><a href="http://www.codeplex.com/CommonServiceLocator" target="_blank">CommonServiceLocator</a>  <li><a href="http://www.codeplex.com/LINQtoAD" target="_blank">LINQ to ActiveDirectory</a>  <li><a href="http://docu.jagregory.com/" target="_blank">docu</a>  <li><a href="http://nunit.org" target="_blank">NUnit</a>  <li><a href="http://nant.sf.net" target="_blank">NAnt</a></li></ul> <p>This list is nothing to sneeze at, and it&#8217;s just what I could remember&#8230; in fact it&#8217;s probably a bit longer.&nbsp; This tends to scare people, as it is a lot of stuff to learn.&nbsp; <em>What the heck are these things?&nbsp; Where did they come from?&nbsp; Do I need it?&nbsp; How do I learn it?&nbsp; Why did you include this?</em></p> <p>That&#8217;s a great question.&nbsp; <strong>Why <em>do</em> I want to use all of these things?</strong>&nbsp;</p> <p>I firmly believe in leveraging the work of others, and writing code that is expressive and easy to maintain.&nbsp; Some of these projects exist solely to make working with another item from the list a lot easier.&nbsp; NHibernate is a great example.&nbsp; I loves me some NHibernate, but writing XML mapping files by hand isn&#8217;t what I&#8217;d call a fun time.&nbsp; Fluent NHibernate makes this so much nicer.&nbsp; The last thing I want to do is reinvent the wheel.</p> <p><img style="margin: 20px" src="http://liambest.com/square.jpg" width="419" height="480"></p> <p>I don&#8217;t think I&#8217;m alone here.&nbsp; Most projects I come across have a similar attitude regarding re-using rather than re-inventing.&nbsp; Most come with a dozen or so additional libraries so that it can function.&nbsp; I recently asked on twitter how many 3rd party libraries folks are using.&nbsp; The average result was about 5, but some were as high as 12.</p> <p>The bottom line for me is:&nbsp; <strong>The value I get from leveraging 3rd party tools is greater than the psychic weight that they cause.&nbsp; </strong>But others may not agree with me.</p> <p>What about the Ruby community?&nbsp; Don&#8217;t they have this problem?&nbsp; Absolutely.&nbsp; But I don&#8217;t think they would classify it as a problem, and I&#8217;d tend to agree.&nbsp; Say you&#8217;re writing a ruby app and you somehow want to integrate flickr with twitter and paypal.</p></p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&gt; gem install flickr
</div><div class='line'>&gt; gem install twitter
</div><div class='line'>&gt; gem install paypal</div></code></pre></td></tr></table></div></figure></div>






<p><img style="margin: 0px 20px" align="right" src="http://www.workingwithrails.com/images/ruby-gem.png?1213632569">&#8230;Wait what?&nbsp; That&#8217;s it?&nbsp; Yep.&nbsp; <strong><a href="http://rubygems.org/" target="_blank">Rubygems</a> is a thing of beauty</strong>.&nbsp; It lowers the barrier to installing 3rd party plugins and libraries.&nbsp; Rails plugins has a similar concept.&nbsp; Need to rate one of your models?&nbsp; 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>script/install plugin acts_as_rateable</div></code></pre></td></tr></table></div></figure></div>
 Want to use jQuery instead of prototype/scriptaculous?&nbsp; simply run 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>script/install plugin jrails</div></code></pre></td></tr></table></div></figure></div>

<p></p>
<p>These techniques allow you to add small pieces of functionality to existing applications with relative ease.&nbsp; You don&#8217;t have to open a web browser &amp; search for the tool.&nbsp; You don&#8217;t have to download &amp; extract it somewhere.&nbsp; And you don&#8217;t need to copy it into your project tree.&nbsp; Everything is done with a single command.</p>
<p>It seems as if every concept and service has their own gem or rails plugin.&nbsp; Rails applications today can be built rather simply by composing tiny pieces of functionality written by other people.&nbsp; <br></p>
<p>So why can&#8217;t we do this in .NET?&nbsp; Well in short, we can&#8230; but it requires a culture shift.&nbsp; For starters, in .NET we generally check in all of our dependencies into source control, so that we can always guarantee that each developer has all of the required tools (and the specific versions of such tools).&nbsp; With ruby gems, each gem is installed into a common location, which is consistent across all machines (actually it is configurable, but the point is it&#8217;s a global directory).&nbsp; To use one of the gems installed on your machine, you simply do this:</p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>require &lt;span class="str">'hpricot'&lt;/span></div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>It knows to load up that library from a central location.&nbsp; When this application is deployed to another environment, the same thing occurs.&nbsp; Gems are installed via the same commands as on the dev machines. </p>
<p>Back at ALT.NET Seattle 2009 I convened a session to discuss revitalizing one of the many <em>gems-for-.NET</em> projects.&nbsp; We identified several efforts along similar lines as gems:</p>
<ul>
<li>ngems
<li>cogs
<li>nu
<li>horn
<li>Machine.PartStore</li></ul>
<p> Out of this discussion, a few folks decided to start fresh with a new project (affectionately called <a href="http://github.com/scottcreynolds/rocks/tree/master" target="_blank">rocks</a>), and toy with getting rubygems to work with IronRuby and wrapping it all in our own command line interface.&nbsp; Not much has been done on this except a quick spike, but I think the idea is promising.</p>
<p>I believe that if something like this comes up in the .NET community it will lead to a shift in how we think about dependencies, components, and overall re-use of small pieces of code to build larger applications.&nbsp; </p>
<p>What do you think?</p>

</div>
  <footer>
    <a rel="full-article" href="/2009/05/a-culture-of-microcomponents/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/awarded-ineta-community-champion-for-q1-2009/">Awarded INETA Community Champion for Q1 2009</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-26 00:00:00 -0500" pubdate  updated >Apr 26<span>th</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p>Just a small announcement:&nbsp; I was recently awarded the INETA Community Champion Award!&nbsp; I&#8217;m finding that my community work is rewarding in many ways.&nbsp; Over the past couple years I have met so many influential people that have helped me (inadvertently) build my own career.&nbsp; I sincerely hope that any efforts I make in the community have a similar effect to others.</p>


<p> <p><img src="/images/ineta-community-champion_0bd55d8d-c604-407b-93c3-ba9e3d22cf61.jpg" alt="ineta-community-champion"  height="350" /></p></p>
</div>
  <footer>
    <a rel="full-article" href="/2009/04/awarded-ineta-community-champion-for-q1-2009/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/jquery-auto-complete-text-box-with-asp-net-mvc/">jQuery Auto-Complete Text Box With ASP.NET MVC</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-21 00:00:00 -0500" pubdate  updated >Apr 21<span>st</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><blockquote> <p><img alt="clip_image004" align="left" src="http://flux88.com/files/media/image/WindowsLiveWriter/ExcerptfromASP.NETMVCinActionChapter6_ED7F/clip_image004_e87da01d-98f6-479d-b891-3b4df10d5fa6.jpg"><em>This is an excerpt from Chapter 13 in my upcoming book, </em><a href="http://manning.com/palermo" target="_blank"><em>ASP.NET MVC in Action</em></a><em>.</em></p></blockquote>


<p> <p style="clear: both">_________________________________________________ <p style="clear: both">These days it is not uncommon to have text boxes automatically suggest items based on what we type. The results are further filtered as we type to give us the option to simply select an available item with the mouse or keyboard. One of the first examples of this in the wild was Google Suggest.  <p><img src="/images/clip_image002_1f1897ba-a575-4c10-8a33-bc2cdf2cb3bb.gif" alt="clip_image002"  height="415" />  <p><em><strong>Figure 13.1 Google Suggest filters options as you type </strong></em> <p>A rudimentary implementation of this would simply monitor key-presses and fire off ajax requests for each one. Of course this means that fast typist would trigger many requests, most of which would be immediately discarded for the next request coming in 5 milliseconds. A good implementation will take into account a typing delay and also provide keyboard/mouse support for selecting the items.  <p>Luckily jQuery has an extensive list of plugins available. One such plugin is Dylan Verheul’s autocomplete.  <blockquote> <p><strong>Dylan Verheul’s autocomplete</strong>  <p>You can download the autocomplete plugin at <a href="http://www.dyve.net/jquery/?autocomplete">http://www.dyve.net/jquery/</a> along with a few others including googlemaps and listify. </p></blockquote> <p>The basic idea is you have a simple text box on your page. The jQuery plugin adds the necessary behavior to handle key press events and fire the appropriate Ajax requests off to a URL that will handle the request. The URL needs point to a controller action, and by convention the response is formatted in a special way so the plugin could handle the response.  <p>Assume for our purposes that we wanted to filter US Cities in the text box. The first step is to add a controller, action, and view for displaying the UI for this example. Ensure that jquery (in this case jquery-1.2.6.js) and jquery.autcomplete.js are referenced at the top of the view (or master page).</p>

<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;script type=&lt;span class="str">"text/javascript"&lt;/span> src=&lt;span class="str">"../../scripts/jquery-1.2.6.js"&lt;/span>&gt;&lt;/script&gt;
</div><div class='line'>&lt;script type=&lt;span class="str">"text/javascript"&lt;/span> src=&lt;span class="str">"../../scripts/jquery.autocomplete.js"&lt;/span>&gt;&lt;/script&gt;</div></code></pre></td></tr></table></div></figure></div>




<p>Next, add the text box. In this example we will call it city. 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;%= Html.TextBox(&lt;span class="str">"city"&lt;/span>) %&gt;</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>Package this up with a simple controller (Listing 13.1).
<p><strong>Listing 13.1 – a controller &amp; action for displaying our test page</strong> 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> HomeController : Controller
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> ActionResult Index()
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> View();
</div><div class='line'>}
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p><img src="/images/clip_image004_0cfb60e7-12e0-4a33-932e-c034304bfcc7.jpg" alt="clip_image004"  height="244" />
<p><strong><em>Figure 13.2 – Our simple view with a text box.</em></strong>
<p>Now we add a little Javascript to add the autocomplete behavior. 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;script type=&lt;span class="str">"text/javascript"&lt;/span>&gt;
</div><div class='line'>$(document).ready(&lt;span class="kwrd">function&lt;/span>() {
</div><div class='line'>$(&lt;span class="str">"input#city"&lt;/span>).autocomplete(&lt;span class="str">'&lt;%= Url.Action("Find", "City") %&gt;'&lt;/span>);
</div><div class='line'>});
</div><div class='line'>&lt;/script&gt;</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>
<p>Place this in the &lt;head&gt; of the page. You can see that the URL for the autocomplete behavior is specified as Url.Action(&#8220;Find&#8221;, &#8220;City&#8221;). This will point to a Find() action on the CityController. We&#8217;ll need to write this controller &amp; action next.
<blockquote>
<p><strong>Local Data Mode</strong>
<p>The autocomplete plugin can also filter local data structures. This is useful when you have a limited set of data and you want to minimize requests sent to the server. The autcomplete plugin in local mode is also much faster, since there is no Ajax request happening behind the scenes. The only downside is that you must render the entire array onto the view. </p></blockquote>
<p><strong>Listing 13.3 – An action to find cities from an autocomplete ajax request</strong> 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> CityController : Controller
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">readonly&lt;/span> ICityRepository _repository;
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> CityController()
</div><div class='line'>{
</div><div class='line'>&lt;span class="rem">//load up a CSV file with the city data&lt;/span>
</div><div class='line'>&lt;span class="kwrd">string&lt;/span> csvPath = Server.MapPath(&lt;span class="str">"~/App_Data/cities.csv"&lt;/span>);
</div><div class='line'>&lt;span class="rem">//the repository reads the csv file&lt;/span>
</div><div class='line'>_repository = &lt;span class="kwrd">new&lt;/span> CityRepository(csvPath); #2
</div><div class='line'>}
</div><div class='line'>&lt;span class="rem">//this constructor allows our tests to pass in a fake/mock instance&lt;/span>
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> CityController(ICityRepository repository) #3
</div><div class='line'>{
</div><div class='line'>_repository = repository;
</div><div class='line'>}
</div><div class='line'>&lt;span class="rem">//the autocomplete request sends a parameter 'q' that contains the filter&lt;/span>
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> ActionResult Find(&lt;span class="kwrd">string&lt;/span> q) #4
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">string&lt;/span>[] cities = _repository.FindCities(q);
</div><div class='line'>&lt;span class="rem">//return raw text, one result on each line&lt;/span>
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> Content(&lt;span class="kwrd">string&lt;/span>.Join(&lt;span class="str">"\n"&lt;/span>, cities));
</div><div class='line'>}
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<p>The details of the CityRepository can be found in the code samples provided with the book. For now, we will focus on the new Find(string q) action. Since this is a standard action, you can actually just navigate to it in your browser and test it out. Figure 13.3 shows a quick test.
<p><img src="/images/clip_image006_1a0c89de-76d8-4270-8354-81e3d31bde72.jpg" alt="clip_image006"  height="330" />
<p><strong><em>Listing 13.3 – A simple HTTP GET for the action with a filter of &#8220;hou&#8221; yields the expected results.</em></strong>
<p>Now that we are sure that the action is returning the correct results, we can test the textbox. The Javascript we added earlier hooks up to the keypress events on the textbox and should issue queries to the server. Figure 13.4 shows this in action.
<p><img src="/images/clip_image008_d9311a77-e166-4950-84eb-e689316fa5df.jpg" alt="clip_image008"  height="489" />
<p><strong><em>Figure 13.4 – The results are display in a &lt;ul&gt; tag. We can apply CSS to make it look nicer. </em></strong>
<p>The drop down selections are unformatted by default, which makes them a little ugly. A little CSS magic will make it look much nicer. Listing 13.4 shows some sample CSS for this.
<p><strong>Listing 13.4 – CSS used to style the autocomplete results </strong>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">&lt;&lt;/span>&lt;span class="html">style&lt;/span> &lt;span class="attr">type&lt;/span>&lt;span class="kwrd">="text/css"&lt;/span>&lt;span class="kwrd">&gt;&lt;/span>
</div><div class='line'>div.ac_results ul {
</div><div class='line'>margin:0;
</div><div class='line'>padding:0;
</div><div class='line'>list-style-type:none;
</div><div class='line'>border: solid 1px #ccc;
</div><div class='line'>}
</div><div class='line'>div.ac_results ul li {
</div><div class='line'>font-family: Arial, Verdana, Sans-Serif;
</div><div class='line'>font-size: 12px;
</div><div class='line'>margin: 1px;
</div><div class='line'>padding: 3px;
</div><div class='line'>cursor: pointer;
</div><div class='line'>}
</div><div class='line'>div.ac_results ul li.ac_over {
</div><div class='line'>background-color: #acf;
</div><div class='line'>}
</div><div class='line'>&lt;span class="kwrd">&lt;/&lt;/span>&lt;span class="html">style&lt;/span>&lt;span class="kwrd">&gt;&lt;/span></div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p><img src="/images/clip_image010_cdcec9f1-d7ec-460f-8c72-94b3bb9ec65b.jpg" alt="clip_image010"  height="489" />
<p><strong><em>Figure 13.5 – The styled dropdown results look much nicer. The selected item is highlighted, and can be chosen with the keyboard or the mouse. </em></strong>
<p>The auto-complete plug-in has many options for you to configure to your needs. For the simple case that we&#8217;ve shown here, it&#8217;s as simple as this: 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>$(your_textbox).autocomplete(&lt;span class="str">'your/url/here'&lt;/span>);</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>Other options for the plugin are listed below: </p>
<table border="1" cellspacing="0" cellpadding="4" width="400">
<tbody>
<tr>
<td valign="top" width="200">inputClass </td>
<td valign="top" width="200">This class will be added to the input box. </td></tr>
<tr>
<td valign="top" width="200">resultsClass </td>
<td valign="top" width="200">default value: &#8220;ac_results&#8221; </td></tr>
<tr>
<td valign="top" width="200">loadingClass </td>
<td valign="top" width="200">The class to apply to the input box while results are being fetched from the server. Default is “ac_loading.” </td></tr>
<tr>
<td valign="top" width="200">lineSeparator </td>
<td valign="top" width="200">Default is \n </td></tr>
<tr>
<td valign="top" width="200">minChars </td>
<td valign="top" width="200">The minimum # of characters before sending a request to the server. Default is 1. </td></tr>
<tr>
<td valign="top" width="200">delay </td>
<td valign="top" width="200">The delay after typing when the request will be sent. Default is 400ms. </td></tr></tbody></table>
<p>&nbsp; <p>There are many more options, but these are some common ones. To set these options, you include them in a dictionary as the second argument to the autocomplete method like this: 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>$(&lt;span class="str">"input#city"&lt;/span>).autocomplete(&lt;span class="str">'&lt;%= Url.Action("Find", "City") %&gt;'&lt;/span>, {
</div><div class='line'>minChars : 3,
</div><div class='line'>delay : 300
</div><div class='line'>});</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>This type of functionality is immensely useful for selecting from large lists. It keeps your initial page size down by not loading all of these items at once and is very user-friendly.
<p>________________________________________
<p><img alt="clip_image004" align="left" src="http://flux88.com/files/media/image/WindowsLiveWriter/ExcerptfromASP.NETMVCinActionChapter6_ED7F/clip_image004_e87da01d-98f6-479d-b891-3b4df10d5fa6.jpg"><em>This is an excerpt from Chapter 13 in my upcoming book, </em><a href="http://manning.com/palermo" target="_blank"><em>ASP.NET MVC in Action</em></a><em>.</em></p>

</div>
  <footer>
    <a rel="full-article" href="/2009/04/jquery-auto-complete-text-box-with-asp-net-mvc/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/exporting-visual-studio-solutions-with-solutionfactory/">Exporting Visual Studio Solutions With SolutionFactory</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-13 00:00:00 -0500" pubdate  updated >Apr 13<span>th</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p><img src="/images/visual%20studio.png" align="right"  height="40" /></p>


<p> <p>Part of my job is to create reusable code, patterns, designs, solutions, etc for other developers to leverage.&nbsp; Getting started using some of these things can be initially tough for someone who hasn&#8217;t had a lot of experience with long-term, maintainable solution structures for projects that use:</p> <ul> <li>an automated build  <li>3rd party libraries  <li>machine-specific configuration  <li><a href="http://en.wikipedia.org/wiki/Don't_repeat_yourself" target="_blank">D.R.Y.</a> for things like connection strings, etc.</li></ul> <p>Because of these things, I favor a folder structure similar to this one:</p> <p><img src="/images/image_146df75b-7e7a-46d3-b3a5-bfe159f7ad44.png" alt="image"  height="529" /> </p> <p>This keeps things tidy.&nbsp; There is a home for everything.&nbsp; Third party libraries get checked in to source control, as well as any light-weight developer tools that we use during the build.&nbsp; Everything you need to build the software on a developer&#8217;s machine should be here.&nbsp; (<em>Of course I assume that you already have the appropriate Visual Studio &amp; database server on your local machine.)</em></p> <p>In addition, <strong>many</strong> of our projects look something like this:</p> <ul> <li>App.UI  <li>App.Core  <li>App.Persistence  <li>App.Tests</li></ul> <p>Granted, this is very short-sighted and won&#8217;t be the end-all-be-all solution structure for all projects.&nbsp; <strong>But the goal here is to get you (a developer) started really quickly</strong>.&nbsp; These projects can already contains some things that get from nothing to something tangible in short time.</p> <p>My sample solution contains:</p> <ul> <li>An MVC project with a standard look &amp; feel  <ul> <li>images  <li>javascript files</li></ul> <li>A sample CRUD screen, showing a small example of the various players in displaying &amp; updating data.  <ul> <li>NHibernate  <li>FluentNHibernate  <li>NHibernate.Linq  <li>an IOC container  <li>an MVC Controller factory</li></ul> <li>A test project that shows both unit and integration style tests.&nbsp; Some nice fluent testing extensions are left in to show how it works. (the target audience will probably only have a C# 2.0 background).</li></ul> <p>All of this is pre-wired up.&nbsp; Dependencies are referenced in each project.&nbsp; The libraries are located in a relative URL, meaning other people who check out this code can build immediately.&nbsp; In addition, there is a sample NAnt script that shows how to build &amp; test the software.</p> <p>It&#8217;s about convention over configuration.&nbsp; For some applications, if they don&#8217;t want to do it this way, fine.&nbsp; It&#8217;s not about enforcement, it&#8217;s about gentle guidance &amp; encouragement.</p> <h2>Packaging it all up</h2> <p><img src="/images/Hell_Alamy460.jpg" align="left"  height="144" />So I went on the path of trying to export this into a set of Visual Studio project templates.&nbsp; I found the project templates to be less-than helpful for a few reasons.&nbsp; First, it assumes that you keep your projects in the root of the project folder structure.&nbsp; Second, there seemed to be no way to elegantly package up assemblies that the project depended on.&nbsp; I looked at <a href="http://code.google.com/p/sharp-architecture/" target="_blank">S#arp Architecture</a> for some help, but quickly realized that there isn&#8217;t an easy road to doing all of this.&nbsp; In addition, as far as I could tell there is no way to automatically create solution templates.&nbsp; You have to create project templates for each project and then manually stitch them together.</p> <p>This violated my #1 rule with the templates.&nbsp; <strong>In order for them to be successful, they must be really easy to change</strong>.&nbsp; I figure that in 2 months time, something in the template will have changed, or someone will want to tweak the design, or upgrade to a new version of a dependant assembly.&nbsp; If they have to go through all of those hoops to publish a new template, they just won&#8217;t do it.&nbsp; All of the effort on the initial template will be wasted.</p> <p><img src="/images/Factory-Yellow-256x256_dae50722-4932-4e9b-a70c-9f3883ba7050.png" align="right"  height="100" />Then I came across <a href="http://solutionfactory.codeplex.com" target="_blank">SolutionFactory</a>, which is a project started by <a href="http://www.lostechies.com/blogs/hex/" target="_blank">Eric Hexter</a> up on <a href="http://codeplex.com" target="_blank">Codeplex</a>.&nbsp; It consists of 2 major components:</p> <ul> <li>A template wizard that handles all of the post-launch tasks, such as moving the projects to the right location, fixing up references, etc.  <li>A Visual Studio add-in that creates a large solution template, containing multiple vstemplate files (project templates) and also respects my folder structure.&nbsp; Nice!</li></ul> <p>Usage is pretty dead simple.&nbsp; After installing, you get a new add-in.&nbsp; You have to enable the add-in before using it.</p> <p>&nbsp;<img src="/images/image_ee84c045-c405-4380-aa89-8e4d54bc1d61.png" alt="image"  height="545" /> </p> <p><img src="/images/image_202a8bd8-c38a-44a2-936c-e9bf8633bb46.png" alt="image"  height="358" /> </p> <p>Once you place the checkmark next to the Solution Factory add-in and click OK, you should see a new menu item in Visual Studio.</p> <p><img src="/images/image_d9932ca2-4bf1-4919-862f-c56d8874b0cd.png" alt="image"  height="545" /> </p> <p>When you select &#8220;Export Template&#8221; from the Solution Factory menu, you are presented with this dialog:</p> <p><img src="/images/image_898ce309-7205-469d-bfe9-479a7fe22b79.png" alt="image"  height="545" /> </p> <p>This controls your exported VSI file.&nbsp; One cool thing to note is that you can have a custom command run as part of the template invocation process.&nbsp; This is especially helpful if you have a firstTimeConfig.bat file or similar.&nbsp; Sometimes you just have to run the build once to make sure everything is in place.</p> <p><strong>During the export, any remnants of TFS source control will be stripped out in the target folder</strong>.&nbsp; Any read-only files will be unlocked, any <em>.</em>scc files will be deleted, and *.csproj files will be modified to remove the source control bindings.&nbsp; If this isn&#8217;t done, you&#8217;ll be prompted to remove source control bindings for each project every time you create a new project based on the template.&nbsp; Yuck!</p> <p>When the export is finished (it takes about a minute) you should see a message box like this:</p> <p><img src="/images/image_334964b7-3f86-4a73-9401-c47554670e03.png" alt="image"  height="130" /> </p> <p>Now if we look in our <strong>c:\temp</strong> folder, we should see some new files:</p> <p><img src="/images/image_b0d52aef-5cd9-4d96-8ab4-73f70a9cfc5f.png" alt="image"  height="67" /> </p> <p>The VSI is a <em>Visual Studio Installer</em> file, and it simplifies putting the template zip file into Visual Studio.&nbsp; All you
really have to do is copy it to the appropriate Visual Studio 2008\Templates folder and run devenv.exe /installvstemplates to get it to rebuild the template cache.&nbsp; When you run the VSI, you&#8217;ll get a simple installer.&nbsp; <strong>It will warn you that the template is not signed, just press OK</strong>.</p> <p>There is one caveat though:&nbsp; Our template relies on SolutionFactory.Wizard.dll to run some custom actions when the template is invoked.&nbsp; The VSI file doesn&#8217;t have permissions to copy files into C:\Program Files, so until a custom installer (MSI) is made, you have to copy this dll manually.</p> <p>To do this, close down all instances of Visual Studio and copy SolutionFactory.Wizard.dll into c:\program files\Microsoft Visual Studio 9.0\Common 7\IDE\Private Assemblies.&nbsp; (on Vista/7 this path may be different, so adjust accordingly).&nbsp; This only has to be done once, and subsequent uses of the template will use this dll.</p> <p>Now, fire up a fresh copy of Visual Studio, choose File-&gt;New Project, and see our new template!</p> <p><img src="/images/image_5d06788c-0d01-4147-b773-e5d9200d4f58.png" alt="image"  height="496" /> </p> <p>When you click OK, Visual Studio will do a little dance, make sure you wait for it to finish!&nbsp; When it&#8217;s all done, you&#8217;ll end up with this:</p> <p><img src="/images/image_744bafa8-d6c6-4025-8a7e-4daea6ab88d8.png" alt="image"  height="480" />&nbsp;</p> <p>Every thing is completely packaged up, with multiple projects, 3rd party libraries, tools, and an automated build.&nbsp; The best part is that we can keep the template up to date and re-publish easily.</p></p>
</div>
  <footer>
    <a rel="full-article" href="/2009/04/exporting-visual-studio-solutions-with-solutionfactory/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/excerpt-from-asp-net-mvc-in-action-chapter-6/">Excerpt From ASP.NET MVC in Action Chapter 6</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-09 00:00:00 -0500" pubdate  updated >Apr 9<span>th</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p><i>Extending URL Routing in ASP.NET MVC</i>  <p>Excerpted from  <p><img src="/images/clip_image004_e87da01d-98f6-479d-b891-3b4df10d5fa6.jpg" alt="clip_image004"  height="238" />  <p><a href="http://manning.com/palermo/">ASP.NET MVC in Action</a>  <p><img src="/images/clip_image005_1ad1421a-e8c2-4bda-8544-5d3dfff458b6.gif" alt="clip_image005"  height="24" />  <p><b>Jeffrey Palermo, Ben Scheirman, and Jimmy Bogard</b>  <blockquote> <p>This article is taken from the book <a href="http://manning.com/palermo/">ASP.NET MVC in Action</a> from Manning Publications. One of the greatest aspects of ASP.NET MVC is its flexibility. Among other things, this gives us the capability to customize standard components. In this article, we&#8217;ll take a look at how URL routing functions, and then explore how to enhance it to behave differently. For the book’s table of contents, the Author Forum, and other resources, go to <a href="http://manning.com/palermo/">http://manning.com/palermo/</a>.</p></blockquote> <p>The UrlRouteModule is an HttpModule and represents the entry point into the ASP.NET MVC Framework. This module examines each request, builds up the RouteData for the request, finds an appropriate IRouteHandler for the given route matched, and finally redirects the request to the IRouteHandler&#8217;s IHttpHandler. Make sense?  <p>Our default route looks like Listing 1. The MapRoute method is actually a simplified way of specifying routes. The same route can be specified with more detail, as is shown in Listing 2.  <p><strong>Listing 1 – a simple way of specifying routes</strong></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute("default", "{controller}/{action}/{id}",
</div><div class='line'>new { Controller="home", Action="index", id=""});</div></code></pre></td></tr></table></div></figure></div>

<p><strong>Listing 2 – a more detailed way of specifying routes</strong></p>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.Add(new Route("{controller}/{action}/{id}",
</div><div class='line'>new RouteValueDictionary(new { Controller = "home", Action = "index", id = "" }),
</div><div class='line'>new MvcRouteHandler()));</div></code></pre></td></tr></table></div></figure></div>

<p>That third argument in Listing 2 is telling the framework which `IRouteHandler` to use for this route. We are using the built-in MvcRouteHandler that ships with the framework. By default we are using this class when using the MapRoute method. We can change this to be a custom route handler and take control in interesting ways. An IRouteHandler&#8217;s responsibility is to create an appropriate IHttpHandler to handle the request given the details of the request. This is a good place to change the way routing works, or perhaps to gain control extremely early in the request pipeline. The MvcRouteHandler simply constructs an MvcHandler to handle a request, passing it a RequestContext, which contains the RouteData and IHttpContext.
<p>A quick example will help illustrate the need for a custom route handler. When starting out defining your routes, you&#8217;ll sometimes run across errors. Let&#8217;s assume you also have the route shown in Listing 3 defined.
<p><strong>Listing 3 – Adding another route</strong> 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>routes.MapRoute(&lt;span class="str">"conferenceKey"&lt;/span>, &lt;span class="str">"{conferenceKey}/{action}"&lt;/span>,
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> { Controller = &lt;span class="str">"Conference"&lt;/span>, Action=&lt;span class="str">"index"&lt;/span> });</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>Here we’ve added a new custom route at the top position. What does it do? This will accept URLs like /HoustonCodeCamp2008/register and use the conference controller and call the register action on it, passing in the conferenceKey as a parameter to the action.
<p><strong>Listing 4 – a controller action that handles the new route </strong>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> ConferenceController : Controller
</div><div class='line'>{
</div><div class='line'>&lt;span class="rem">/* snip */&lt;/span>
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> ActionResult Register(&lt;span class="kwrd">string&lt;/span> conferenceKey)
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> View();
</div><div class='line'>}
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>This is a good example of a custom route that makes your URLs a lot more readable.
<p>Now let&#8217;s assume that we have another controller called Home. HomeController has an index action to show the start page.
<p><strong>Listing 5 – A controller action to respond to the default route </strong>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> HomeController : Controller
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> ActionResult Index()
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> View();
</div><div class='line'>}
</div><div class='line'>&lt;span class="rem">/* snip */&lt;/span>
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>We&#8217;d like the URL for the action in Listing 4 to look like /home/index. If we try this URL, we&#8217;ll get a 404 error, as shown in figure 1. Why?
<p><img src="/images/clip_image007_7c3f0a18-341c-45ed-9a52-5a5d8db8e413.jpg" alt="clip_image007"  height="476" />
<p><strong>Figure 1 - This message doesn’t tell us much about what’s wrong. An action couldn’t be found on the controller, but which one?. </strong>
<p>It&#8217;s not apparent from that error message what the problem is. We certainly have a controller called HomeController, and it has an action method called Index(). If you dig deep and take a look at the routes we can deduce that this URL was picked up by the first route, /{conferenceKey}/{action}, which was not what we intended. We should be able to indentify quickly when we have a routing mismatch, so that we can fix it more quickly.
<p>With lots of custom routes, it is easy for a URL to be caught by the wrong route. Wouldn&#8217;t it be nice if we had a diagnostics tool to display which routes are being matched (and used) for quickly catching these types of errors?
<p>What we’d like to do is have an extra query string parameter that we can tack on if we want to see the route information. The current route information is stored in an object called RouteData, which is available to us in the IRouteHandler interface. The route handler is also first to get control of the request, so it is a great place to intercept and alter the behavior for any route.
<p><strong>Listing 6 – A custom route handler creates an associated IHttpHandler </strong>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> CustomRouteHandler : IRouteHandler
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> IHttpHandler GetHttpHandler(RequestContext requestContext)
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">if&lt;/span>(HasQueryStringKey(&lt;span class="str">"routeInfo"&lt;/span>, requestContext.HttpContext.Request))
</div><div class='line'>{
</div><div class='line'>OutputRouteDiagnostics(requestContext.RouteData, requestContext.HttpContext);
</div><div class='line'>}
</div><div class='line'>var handler = &lt;span class="kwrd">new&lt;/span> CustomMvcHandler(requestContext);
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> handler;
</div><div class='line'>}
</div><div class='line'>&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">bool&lt;/span> HasQueryStringKey(&lt;span class="kwrd">string&lt;/span> keyToTest, HttpRequestBase request)
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">return&lt;/span> Regex.IsMatch(request.Url.Query, &lt;span class="kwrd">string&lt;/span>.Format(&lt;span class="str">@"^\?{0}$"&lt;/span>, keyToTest));
</div><div class='line'>}
</div><div class='line'>&lt;span class="rem">/* snip */&lt;/span>
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>A route handler’s normal responsibility is to construct and hand-off the IHttpHandler that will handle this request. By default, this is MvcHandler. In our CustomRouteHandler we first check to see if the query string parameter is present (we do this with a simple regular expression on the URL query section). The OutputRouteDiagnostics method is shown in Listing 7.
<p><strong>Listing 7 – Rendering route diagnostics information to the response stream</strong> 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
<span class='line'>31</span>
<span class='line'>32</span>
<span class='line'>33</span>
<span class='line'>34</span>
<span class='line'>35</span>
<span class='line'>36</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">private&lt;/span> &lt;span class="kwrd">void&lt;/span> OutputRouteDiagnostics(RouteData routeData, HttpContextBase context)
</div><div class='line'>{
</div><div class='line'>var response = context.Response;
</div><div class='line'>response.Write(
</div><div class='line'>&lt;span class="str">@"&lt;style&gt;body {font-family: Arial;}
</div><div class='line'>table th {background-color: #359; color: #fff;}
</div><div class='line'>&lt;/style&gt;
</div><div class='line'>&lt;h1&gt;Route Data:&lt;/h1&gt;
</div><div class='line'>&lt;table border='1' cellspacing='0' cellpadding='3'&gt;
</div><div class='line'>&lt;tr&gt;&lt;th&gt;Key&lt;/th&gt;&lt;th&gt;Value&lt;/th&gt;&lt;/tr&gt;"&lt;/span>); &lt;strong>#1&lt;/strong>
</div><div class='line'>&lt;span class="kwrd">foreach&lt;/span> (var pair &lt;span class="kwrd">in&lt;/span> routeData.Values)
</div><div class='line'>{
</div><div class='line'>response.Write(&lt;span class="kwrd">string&lt;/span>.Format(&lt;span class="str">"&lt;tr&gt;&lt;td&gt;{0}&lt;/td&gt;&lt;td&gt;{1}&lt;/td&gt;&lt;/tr&gt;"&lt;/span>,
</div><div class='line'>pair.Key, pair.Value));
</div><div class='line'>}
</div><div class='line'>response.Write(&lt;span class="str">@"&lt;/table&gt;
</div><div class='line'>&lt;h1&gt;Routes:&lt;/h1&gt;
</div><div class='line'>&lt;table border='1' cellspacing='0' cellpadding='3'&gt;
</div><div class='line'>&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;Route&lt;/th&gt;&lt;/tr&gt;"&lt;/span>); &lt;strong>#2&lt;/strong>
</div><div class='line'>&lt;span class="kwrd">bool&lt;/span> foundRouteUsed = &lt;span class="kwrd">false&lt;/span>;
</div><div class='line'>&lt;span class="kwrd">foreach&lt;/span>(Route r &lt;span class="kwrd">in&lt;/span> RouteTable.Routes)
</div><div class='line'>{
</div><div class='line'>response.Write(&lt;span class="str">"&lt;tr&gt;&lt;td&gt;"&lt;/span>);
</div><div class='line'>&lt;span class="kwrd">bool&lt;/span> matches = r.GetRouteData(context) != &lt;span class="kwrd">null&lt;/span>;
</div><div class='line'>&lt;span class="kwrd">string&lt;/span> backgroundColor = matches ? &lt;span class="str">"#bfb"&lt;/span> : &lt;span class="str">"#fbb"&lt;/span>; &lt;strong>#3&lt;/strong>
</div><div class='line'>&lt;span class="kwrd">if&lt;/span>(matches &amp;&amp; !foundRouteUsed)
</div><div class='line'>{
</div><div class='line'>response.Write(&lt;span class="str">"&amp;raquo;"&lt;/span>); &lt;strong>#4&lt;/strong>
</div><div class='line'>foundRouteUsed = &lt;span class="kwrd">true&lt;/span>;
</div><div class='line'>}
</div><div class='line'>response.Write(&lt;span class="kwrd">string&lt;/span>.Format(
</div><div class='line'>&lt;span class="str">"&lt;/td&gt;&lt;td style='font-family: Courier New; background-color:{0}'&gt;{1}&lt;/td&gt;&lt;/tr&gt;"&lt;/span>,
</div><div class='line'>backgroundColor, r.Url));
</div><div class='line'>}
</div><div class='line'>response.End();
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p><em>1. Create an HTML table to display the route values for the current request. <br>2. Create an HTML table to display the routes <br>3. Green if it matches, Red if it doesn&#8217;t <br>4. Places a chevron character (») next to the route selected for the request </em></p>
<p>This method outputs two tables, one for the current route data, and one for the routes in the system. Each route will return null for GetRouteData if the route doesn’t match the current request. The table is then colored to show which routes matched, and a little arrow indicates which route is the one in use for the current URL. The response is then ended to prevent any further rendering.
<p>To finalize this change, we have to alter the current routes to use our new handler.
<p><strong>Listing 8 – Assigning routes to our custom route handler </strong>
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>RouteTable.Routes.Add(
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> Route(&lt;span class="str">"{conferenceKey}/{action}"&lt;/span>,
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> RouteValueDictionary( &lt;span class="kwrd">new&lt;/span> { Controller=&lt;span class="str">"Conference"&lt;/span> }),
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> CustomRouteHandler()));
</div><div class='line'>RouteTable.Routes.Add(
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> Route(&lt;span class="str">"{controller}/{action}/{id}"&lt;/span>,
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> RouteValueDictionary( &lt;span class="kwrd">new&lt;/span> { Action=&lt;span class="str">"Index"&lt;/span>, id=(&lt;span class="kwrd">string&lt;/span>)&lt;span class="kwrd">null&lt;/span> }),
</div><div class='line'>&lt;span class="kwrd">new&lt;/span> CustomRouteHandler()));</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>The end result (shown in Listing 2) is incredibly helpful. Let’s use the /home/index URL (that resulted in a 404 in Listing 1) but this time we’ll add the ?routeInfo to the query string. We can see in the route data table that the value “home” was picked up as a conference key, as shown in figure 2. The route table confirms that the conference key route was picked up first, since it matched.
<p><img src="/images/clip_image009_09a4468a-13c8-4b55-8ff9-41601fe8f767.jpg" alt="clip_image009"  height="480" />
<p><strong>Listing 2 – appending ?routeInfo gives us detailed information about the current request’s route. We can easily see now that the wrong route was chosen. </strong>
<p>Now you can immediately tell that the current route used is not the one we intended. We can also tell whether or not other routes match this request by the color of the cell: Both of the rows are green. We now quickly identify the issue as a routing problem and can fix it accordingly. In this case, if we add constraints to the first route such that conferenceKey isn’t the same as one of our controllers, the problem is resolved. Remember that order matters! The first route matched is the one used.
<p>Of course you wouldn’t want this information to be visible in a deployed application, so only use to aid your development. You could also build a switch that changes the routes to the CustomRouteHandler if you’re in debug mode, which would be a more automated solution. I’ll leave this as an exercise for the reader.
<blockquote>
<p><strong>Inspired by Phil Haack’s Route Debugger </strong>
<p>This example was inspired by Phil Haack’s route debugger that he posted on his blog when the ASP.NET MVC Framework was in Preview 2. It is a great example of what you can do with the information provided to you by the routing system. You can see his original example of this here:
<p><a href="http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx">http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx</a>. </p></blockquote>
<p>Another potential use of a custom route handler would be to append a specific identifier to the query string automatically. This could be useful in scenarios where you rely on cookie-less sessions or maybe you have a company identifier that limits what is displayed on the screen (your author has interfaced with such a framework). An IHttpHandler that would satisfy this requirement might look like this:
<p><strong>Listing 9 – An MvcHandler that can enforce query string parameters</strong> 
<div><figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>&lt;span class="kwrd">public&lt;/span> &lt;span class="kwrd">class&lt;/span> EnsureCompanyKeyHandler : MvcHandler
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">public&lt;/span> EnsureCompanyKeyHandler(RequestContext requestContext)
</div><div class='line'>: &lt;span class="kwrd">base&lt;/span>(requestContext)
</div><div class='line'>{
</div><div class='line'>}
</div><div class='line'>&lt;span class="kwrd">protected&lt;/span> &lt;span class="kwrd">override&lt;/span> &lt;span class="kwrd">void&lt;/span> ProcessRequest(HttpContextBase context)
</div><div class='line'>{
</div><div class='line'>var controller = (&lt;span class="kwrd">string&lt;/span>) RequestContext.RouteData.Values[&lt;span class="str">"controller"&lt;/span>];
</div><div class='line'>var company = context.Request.QueryString[&lt;span class="str">"company"&lt;/span>];
</div><div class='line'>&lt;span class="kwrd">if&lt;/span> (controller != &lt;span class="str">"login"&lt;/span> &amp;&amp; company == &lt;span class="kwrd">null&lt;/span>)
</div><div class='line'>{
</div><div class='line'>context.Response.Redirect(&lt;span class="str">"~/login"&lt;/span>); &lt;strong>#1&lt;/strong>
</div><div class='line'>}
</div><div class='line'>&lt;span class="kwrd">else&lt;/span>
</div><div class='line'>{
</div><div class='line'>&lt;span class="kwrd">base&lt;/span>.ProcessRequest(context); &lt;strong>#2&lt;/strong>
</div><div class='line'>}
</div><div class='line'>}
</div><div class='line'>}</div></code></pre></td></tr></table></div></figure></div>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, &#8220;Courier New&#8221;, courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p><em>1. Force them to login <br>2. The URL contains a company key, so we can continue </em>
<p>In this example, every request must have a company key. The ProcessRequest method will not continue unless the URL contains this.
<p>Hopefully you noticed how easy it was to extend the framework. Since most of the objects that you interact with are either interfaces or abstract base classes, it allows you to completely (or almost completely) substitute behavior for your own. It is in this level of flexibility where you will see the ASP.NET MVC Framework really shine.</p>
<blockquote>
<p>This article is taken from the book <a href="http://manning.com/palermo/">ASP.NET MVC in Action</a> from Manning Publications.</p></blockquote>

</div>
  <footer>
    <a rel="full-article" href="/2009/04/excerpt-from-asp-net-mvc-in-action-chapter-6/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/post-alt-net-houston-thoughts/">Post ALT.NET Houston Thoughts</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-08 00:00:00 -0500" pubdate  updated >Apr 8<span>th</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p><img src="/images/altnet-thisway.png" alt="altnet-thisway"  height="335" /></p>


<p> <p>&nbsp;</p> <p>Last weekend I helped organize the <a href="http://houston.altnetconf.com" target="_blank">Houston ALT.NET Open Space</a> conference.&nbsp; About 100 people came to share, learn, and grow as developers in the .NET (and surrounding) communities.</p> <p><img src="/images/thewall.png" alt="thewall"  height="337" /></p> <p>We had the pleasure of having <a href="http://www.stevenlist.com/blog/" target="_blank">Doc List</a> facilitate our gathering.&nbsp; It has been said before that Doc is the &#8220;adult supervision&#8221; to keep the developers in line.&nbsp; This is certainly true, as it is really easy for a bunch of geeks to get off topic and go play Rock Band all day.&nbsp; I really feel that he helped us be self-organized, rather than self-propelled chaos.&nbsp; Thanks, Doc!</p> <p><img src="/images/doc.png" alt="doc"  height="335" /> </p> <p>The topics were very technical, which I like.&nbsp; I enjoy process oriented talks, but I&#8217;m more drawn to the technical ones.&nbsp; There was a healthy dose of F# &amp; functional programming, Ruby (IronRuby, Rake), NHibernate (with FluentNHibernate &amp; NHibernate.Linq), Deployment automation, BDD, DDDD &amp; Command Query separation, and more.&nbsp; There were more talks proposed in this conference than any I have attended previously.&nbsp; I think that is one metric for success in a conference like this. </p> <p>I specifically noticed one session, labeled &#8220;Should I even be programming?&#8221;&nbsp; This guy had the courage to stand up in front of 100 people and admit that he wasn&#8217;t sure if this was the career for him.&nbsp; I truly wish I had gone to this session, as I heard it was really good.&nbsp; I hope that he was given the type of advice he needed.&nbsp; One thing I was sure to mention is that we are all out there, on blogs, twitter, or simply around for lunch to continue the conversation.&nbsp; We don&#8217;t have to be stuck in our job, isolated from the rest of the developer community.</p> <p><img src="/images/group1.png" alt="group1"  height="336" /> </p> <p>&nbsp;</p> <p>The space that we had was graciously donated by Microsoft.&nbsp; It turned out to be a fantastic space for this type of event.&nbsp; Most rooms had projectors, it was all within one small area, so hallway conversations were very abundant.&nbsp; I have to send out a great thanks to <a href="http://blog.microsoft-j.net/" target="_blank">J Sawyer</a>, who gave me support to put this on.</p> <p><img src="/images/image_c5fd77a1-44a1-4c4a-a4ba-4192c732f7d1.png" alt="image"  height="338" /> </p> <p>Throughout the event, especially at the closing, many people thanked me directly, or thanked me &#8220;and the other organizers.&#8221;&nbsp; Unfortunately, I neglected to mention their names!&nbsp; I did have help, folks!</p> <p>Here they are:</p> <p><img src="/images/organizers.png" alt="organizers"  height="337" /> </p> <p><em>From left to right:&nbsp; <a href="http://wizardsofsmart.net/" target="_blank">Jonathan Birkholz</a>, <a href="http://claudiolassala.spaces.live.com" target="_blank">Claudio Lassala</a>, <a href="http://stevenlist.com" target="_blank">Doc List</a>, <a href="http://www.jphamilton.net/" target="_blank">JP Hamilton</a>, <a href="http://pseale.com/blog" target="_blank">Peter Seale</a>, and myself</em>.&nbsp; I really appreciate all of your help!</p> <p>&nbsp;</p> <p>I mentioned that the number of topics was a good metric for success.&nbsp; The other major one, in my opinion, was the fact that the conference seemed to spark a certain fire for some of the attendees.&nbsp; Some of them asked for another conference next month!&nbsp; Others asked how they could join in with the monthly geek dinners.&nbsp; There&#8217;s been some serious talk about organizing some Code Dojos in the area.&nbsp; All of these things make me feel proud to have been a part in this event.&nbsp; I hope that the passion spreads.</p> <p><a href="http://houstonaltnet.pbwiki.com" target="_blank">Our wiki</a> has some of the notes from the event.&nbsp; You can also check out the <a href="http://www.kyte.tv/ch/272888-altnethouston" target="_blank">videos</a>, and the photos, <a href="http://www.flickr.com/photos/silviascheirman/sets/72157616293330415/" target="_blank">taken by my wife</a> (our beautiful official photographer) and <a href="http://www.flickr.com/photos/stevenlist/sets/72157616360308310/" target="_blank">by Doc</a> (who is less beautiful, but still takes good pictures).&nbsp; The videos are of webcam quality, and some higher quality ones will be posted at some point.&nbsp; I&#8217;ll link to all of this on the <a href="http://houston.altnetconf.com" target="_blank">official conference website</a> whenever I get around to it.</p> <p>As for me, I&#8217;m taking a break from stuff for a while.&nbsp; I&#8217;ve been really quiet on this blog, mostly because of <a href="http://manning.com/palermo" target="_blank">my book</a>, but also life has become incredibly busy.&nbsp; I plan on spending some more time at night with the family, catching up on my never-ending reading list, and doing some programming for fun.&nbsp; Most of you know that <a href="http://flux88.com/blog/hello-world-x-2/" target="_blank">I have twins on the way</a>, and a little less than one month to prepare!</p> <h2>Thanks ALT.NET Houston!&nbsp; See you next year!</h2></p>
</div>
  <footer>
    <a rel="full-article" href="/2009/04/post-alt-net-houston-thoughts/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/subversion-2009-team-edition-for-professionals/">Subversion 2009 Team Edition for Professionals</a></h1>
    
    
      <p class="meta">




<time datetime="2009-04-01 00:00:00 -0500" pubdate  updated >Apr 1<span>st</span>, 2009</time>


</p>
    
  </header>


  <div class="entry-content"><p><img src="/images/turtle-dragon.gif" alt="new SVN logo"  style="margin: 0pt 0pt 10px 10px; float: right;"  /></p>


<p>Today I was on a conference call with an internal Microsoft contact (who I shall not name to protect his livelihood).  Subversion, the popular open source-control client, will announce next week that they are partnering with Microsoft to create an OSS friendly source control provider that leverages many of the benefits of TFS internally.</p>


<p><cite>&quot;It really makes sense for us.  Microsoft&#8217;s Team Foundation Source control integrates deeply into the IDE, the only editor that developers need.&quot; </cite> &#8211; a Subversion core developer commented</p>


<p>One of the higher-ups that helped finalize the deal was overheard saying, &quot;I think this will finally put a nail in the coffin of other source control systems to create one system to rule them all!&quot;</p>


<p>Some notable changes for the upcoming version:</p>


<ul>
<li><strong>The check-in/check-out model will be used.</strong> This is because writing code collaboratively is so unbelievably similar to reading books in a library.  That edit-merge-commit model just wasn&#8217;t working out for anyone anyway.    <br />
&nbsp;</li>
<li><strong>Local files will be locked by default</strong>.  This allows project owners to keep tabs on who is modifying files at all times.  It also encourages people to take ownership of a module.  Studies show that most people don&#8217;t understand other people&#8217;s code, so this will keep others paws out of your module!<br />
&nbsp;</li>
<li><strong>Merging will be made more difficult, to prevent frequent use.</strong>  It was found that merging is painful for folks and thus, they should do it as seldom as possible.<br />
&nbsp;</li>
<li><strong>All actions performed within Visual Studio.</strong>  Developers don&#8217;t use any other editors anyway, and with the ease of developing Visual Studio add-ins, this was a no brainer!  We will not allow any other clients access to prevent confusion.</li>
</ul>


<p>These are just some of the features coming out in Subversion Team Edition 2009 for Professionals, and I am excited to use it!</p>

</div>
  <footer>
    <a rel="full-article" href="/2009/04/subversion-2009-team-edition-for-professionals/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Creating a Glow Effect for UILabel and UIButton</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/introducing-appsites/">Introducing App Sites</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/firebug-style-debugging-for-ios/">Firebug-Style Visual Debugging for iOS</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/vim---could-not-invoke-jslint/">Vim - Could Not Invoke JSLint</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
