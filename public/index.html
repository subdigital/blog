
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
    Fickle Bits
  </title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="http://appsites.heroku.com/giggletouch">Giggle Touch for
    iOS</a></li>
  <li><a href="/blog/archives">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/10/appsites-is-now-appkickstand/">Appsites Is Now AppKickstand</a></h1>
    
    
      <p class="meta">




<time datetime="2011-10-13 21:50:00 -0500" pubdate  updated >Oct 13<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>A few weeks ago I launched Appsites, a free way to quickly host an
attractive splash page for iPhone applications.</p>

<p>Instead of competing with another site with the same name for traffic
when we could be sharing it, I decided a new name was in order.</p>

<p><strong>I now present to you:  <a href="http://appkickstand.com">AppKickstand</a>.</strong></p>

<p><a href="http://appkickstand.com"><img src="/images/appkickstand.png"
alt="AppKickstand" border="0" /></a></p>

<p>For an example of what it looks like with real apps, check out
<a href="http://appkickstand.com/giggletouch">Giggle Touch</a> or
<a href="http://appkickstand.com/tallythings">Tally Things</a>.</p>

<p>If you have an iPhone app, what are you waiting for?  It&#8217;s <strong>FREE</strong>!</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/10/appsites-is-now-appkickstand/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/10/sharing-vim-configuration-between-machines/">Sharing Vim Configuration Between Machines</a></h1>
    
    
      <p class="meta">




<time datetime="2011-10-06 09:29:00 -0500" pubdate  updated >Oct 6<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>I do most of my development on my MacBook Pro, however I have a nice 27&#8221;
iMac at home, and it is refreshing to use it for development when I can.
It&#8217;s fast and has a huge screen.  The only downside is all my custom
development configurations are on my MacBook Pro!</p>

<p>There are a number of options you can use to share settings between
machines, but I&#8217;m a fan of using <a href="http://dropbox.com">Dropbox</a> (<a href="http://db.tt/sYjPEQl">referral link</a>). Any change I make, on either machine, will get automatically
synchronized for me.</p>

<p>Since my Vim configurations were already present on my MacBook Pro, the
first step was to copy them over to a Dropbox folder:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'><span class="nb">mkdir</span> <span class="o">~</span><span class="sr">/Dropbox/</span><span class="n">vim</span>
</div><div class='line'><span class="n">cp</span> <span class="o">-</span><span class="n">R</span> <span class="o">~</span><span class="sr">/.vim ~/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">vim</span>
</div><div class='line'><span class="n">cp</span> <span class="o">~</span><span class="sr">/.vimrc ~/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">vim</span>
</div><div class='line'><span class="n">cp</span> <span class="o">~</span><span class="sr">/.vimrc.local ~/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">vim</span>
</div><div class='line'><span class="n">cp</span> <span class="o">~</span><span class="sr">/.gvimrc ~/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">vim</span>
</div></code></pre></td></tr></table></div></figure>

<p>The next step was to come up with an installer script that would symlink
these files on a new machine.  I made sure to move existing vim files to
a temporary filename so that I wouldn&#8217;t lose anything accidentally.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
<span class='line'>31</span>
<span class='line'>32</span>
<span class='line'>33</span>
<span class='line'>34</span>
<span class='line'>35</span>
<span class='line'>36</span>
<span class='line'>37</span>
<span class='line'>38</span>
<span class='line'>39</span>
<span class='line'>40</span>
<span class='line'>41</span>
<span class='line'>42</span>
<span class='line'>43</span>
<span class='line'>44</span>
<span class='line'>45</span>
<span class='line'>46</span>
<span class='line'>47</span>
<span class='line'>48</span>
<span class='line'>49</span>
<span class='line'>50</span>
<span class='line'>51</span>
<span class='line'>52</span>
<span class='line'>53</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'><span class="n">set</span> <span class="o">-</span><span class="n">o</span> <span class="n">errexit</span>
</div><div class='line'>
</div><div class='line'><span class="n">function</span> <span class="n">confirm</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="s">&quot;$@ &quot;</span>
</div><div class='line'>    <span class="nb">read</span> <span class="o">-</span><span class="n">e</span> <span class="n">answer</span>
</div><div class='line'>    <span class="k">for</span> <span class="n">response</span> <span class="n">in</span> <span class="n">y</span> <span class="n">Y</span> <span class="n">yes</span> <span class="n">YES</span> <span class="n">Yes</span> <span class="n">Sure</span> <span class="n">sure</span> <span class="n">SURE</span> <span class="n">OK</span> <span class="n">ok</span> <span class="n">Ok</span>
</div><div class='line'>    <span class="k">do</span>
</div><div class='line'>        <span class="k">if</span> <span class="p">[</span> <span class="s">&quot;_$answer&quot;</span> <span class="o">==</span> <span class="s">&quot;_$response&quot;</span> <span class="p">]</span>
</div><div class='line'>        <span class="k">then</span>
</div><div class='line'>            <span class="k">return</span> <span class="mi">0</span>
</div><div class='line'>        <span class="n">fi</span>
</div><div class='line'>    <span class="n">done</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1"># Any answer other than the list above is considerred a &quot;no&quot; answer</span>
</div><div class='line'>    <span class="k">return</span> <span class="mi">1</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="n">function</span> <span class="n">link_file</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>  <span class="n">echo</span> <span class="s">&quot;symlinking $1&quot;</span>
</div><div class='line'>  <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="s">&quot;$PWD/$1&quot;</span> <span class="s">&quot;$HOME/$1&quot;</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="n">echo</span> <span class="s">&quot;This will remove any existing vim configuration files and simlink them with the files here.&quot;</span>
</div><div class='line'><span class="n">confirm</span> <span class="s">&quot;Are you sure?&quot;</span>
</div><div class='line'><span class="k">if</span> <span class="p">[</span> <span class="vg">$?</span> <span class="o">-</span><span class="ow">eq</span> <span class="mi">0</span> <span class="p">]</span>
</div><div class='line'><span class="k">then</span>
</div><div class='line'>  <span class="k">for</span> <span class="n">file</span> <span class="n">in</span> <span class="o">~</span><span class="sr">/.vimrc ~/</span><span class="o">.</span><span class="n">vimrc</span><span class="o">.</span><span class="nb">local</span> <span class="o">~/.</span><span class="n">gvimrc</span>
</div><div class='line'>  <span class="k">do</span>
</div><div class='line'>    <span class="k">if</span> <span class="p">[[</span> <span class="o">-</span><span class="n">f</span> <span class="nv">$file</span> <span class="p">]];</span> <span class="k">then</span>
</div><div class='line'>      <span class="n">echo</span> <span class="s">&quot;Moving $file to $file.bak&quot;</span>
</div><div class='line'>      <span class="n">mv</span> <span class="nv">$file</span> <span class="nv">$file</span><span class="o">.</span><span class="n">bak</span>
</div><div class='line'>    <span class="n">fi</span>
</div><div class='line'>  <span class="n">done</span>
</div><div class='line'>
</div><div class='line'>  <span class="k">for</span> <span class="n">dir</span> <span class="n">in</span> <span class="o">~/.</span><span class="n">vim</span>
</div><div class='line'>  <span class="k">do</span>
</div><div class='line'>    <span class="k">if</span> <span class="p">[[</span> <span class="o">-</span><span class="n">d</span> <span class="nv">$dir</span> <span class="p">]];</span> <span class="k">then</span>
</div><div class='line'>      <span class="n">echo</span> <span class="s">&quot;Moving $dir directory to $dir.bak&quot;</span>
</div><div class='line'>      <span class="n">mv</span> <span class="nv">$dir</span> <span class="nv">$dir</span><span class="o">.</span><span class="n">bak</span>
</div><div class='line'>    <span class="n">fi</span>
</div><div class='line'>  <span class="n">done</span>
</div><div class='line'><span class="n">fi</span>
</div><div class='line'>
</div><div class='line'><span class="n">echo</span> <span class="s">&quot;symlinking&quot;</span>
</div><div class='line'>
</div><div class='line'><span class="k">for</span> <span class="n">file</span> <span class="n">in</span> <span class="o">.</span><span class="n">vim</span> <span class="o">.</span><span class="n">vimrc</span> <span class="o">.</span><span class="n">vimrc</span><span class="o">.</span><span class="nb">local</span> <span class="o">.</span><span class="n">gvimrc</span>
</div><div class='line'><span class="k">do</span>
</div><div class='line'>  <span class="n">link_file</span> <span class="nv">$file</span>
</div><div class='line'><span class="n">done</span>
</div><div class='line'>
</div><div class='line'><span class="n">echo</span> <span class="s">&quot;Done.  Check that it works.  If so, you can remove the .bak files, if any&quot;</span>
</div></code></pre></td></tr></table></div></figure>

<p>Make sure the script is executable by running:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'><span class="nb">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">setup</span><span class="o">.</span><span class="n">sh</span>
</div></code></pre></td></tr></table></div></figure>

<p>Then run this script on any new machine that you want to use Vim on. It will symlink these files from your Dropbox folder to your home
folder:</p>

<ul>
<li><code>.vim/</code></li>
<li><code>.vimrc</code></li>
<li><code>.vimrc.local</code></li>
<li><code>.gvimrc</code></li>
</ul>


<p>After it&#8217;s done, check that it is working.  Remove any .bak files that
you don&#8217;t need anymore.</p>

<p>And that&#8217;s it. You have an automatic Vim configuration synching system
between machines.  It works great for your shell configuration as well!</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/10/sharing-vim-configuration-between-machines/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a></h1>
    
    
      <p class="meta">




<time datetime="2011-10-04 08:44:00 -0500" pubdate  updated >Oct 4<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>If you&#8217;ve used the iPod app on the iPhone, you&#8217;ve probably seen an
interesting trick when switching from album art to the track listing:
the button in the top right corner flips over synchronized with the flip
animation of the main view.</p>

<p>I wanted to achieve a similar effect for the iPhone app that I&#8217;m
building, Deli Radio (<a href="http://itunes.com/apps/deliradio">app store link</a>).</p>

<p>If you&#8217;ve ever struggled with the flip transitions before, you probably
know how finicky it can be to get it all working. The best way to set it
up is to have a parent view contain both views that you want to swap,
and set the animation transition type on <em>that</em> view.</p>

<p>For a button (either in the navigation bar or elsewhere) we&#8217;d need to
introduce a parent view to achieve this effect.  This is how I achieved
the effect.</p>

<p><img class='right ' src='/images/btn-info-border@2x.png' width='' height='' alt='' title=''>
<img class='right ' src='/images/btn-images@2x.png' width='' height='' alt='' title=''></p>

<p>First, I had two images I wanted to use for my <code>UIBarButtonItem</code>.</p>

<p>I wanted this to be easily reusable (since I need to do this in more
than one place in this application), so I created a category method on
<code>UIButton</code>.</p>

<div><script src='https://gist.github.com/1261810.js?file=UIButtonCHButtonFlip.h'></script>
<noscript><pre><code>@interface UIButton (CHFlipButton)

+ (UIView *)flipButtonWithFirstImage:(UIImage *)firstImage 
                         secondImage:(UIImage *)secondImage
                     firstTransition:(UIViewAnimationTransition)firstTransition
                    secondTransition:(UIViewAnimationTransition)secondTransition
                      animationCurve:(UIViewAnimationCurve)curve
                            duration:(NSTimeInterval)duration
                              target:(id)target
                            selector:(SEL)selector;


@end
</code></pre></noscript></div>


<p>It may look strange that a <code>UIButton</code> class method returns a <code>UIView</code>
instance, but we need to have a container view to base the animations
off of.</p>

<p>Here is the implementation:</p>

<div><script src='https://gist.github.com/1261810.js?file=UIButtonCHButtonFlip.m'></script>
<noscript><pre><code>#import &lt;objc/runtime.h&gt;

#import &quot;UIButton+CHFlipButton.h&quot;

// keys used for assigning associated objects
static char UIButtonFlipBlockKey;
static char UIButtonFlipAltButtonKey;
static char UIButtonFlipTransitionKey;
static char UIButtonFlipContainerViewKey;

typedef void (^UIButtonFlipActionBlock)(id sender);

@implementation UIButton (CHFlipButton)

// associate the block with the button instance, then set the default button handler

- (void)chFlipButton_handleControlEvent:(UIControlEvents)event withBlock:(UIButtonFlipActionBlock)block {
    objc_setAssociatedObject(self, &amp;UIButtonFlipBlockKey, block, OBJC_ASSOCIATION_COPY);
    [self addTarget:self action:@selector(chFlipButton_callFlipBlock:) forControlEvents:UIControlEventTouchUpInside];
}

// the default button handler just calls the block

- (void)chFlipButton_callFlipBlock:(id)sender {
    UIButtonFlipActionBlock block = objc_getAssociatedObject(self, &amp;UIButtonFlipBlockKey);
    if (block) {
        block(sender);
    }
}

+ (UIView *)flipButtonWithFirstImage:(UIImage *)firstImage 
                         secondImage:(UIImage *)secondImage
                     firstTransition:(UIViewAnimationTransition)firstTransition
                    secondTransition:(UIViewAnimationTransition)secondTransition
                      animationCurve:(UIViewAnimationCurve)curve
                            duration:(NSTimeInterval)duration
                              target:(id)target
                            selector:(SEL)selector {
    
    UIButtonFlipActionBlock flipButtonAction = ^(id sender) { /* shown further down */ };
    
    //create the first button
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    [button1 setBackgroundImage:firstImage forState:UIControlStateNormal];
    [button1 chFlipButton_handleControlEvent:UIControlEventTouchUpInside withBlock:flipButtonAction];
    [button1 setFrame:CGRectMake(0, 0, firstImage.size.width, firstImage.size.height)];

    //create the 2nd button
    UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
    [button2 setBackgroundImage:secondImage forState:UIControlStateNormal];
    [button2 chFlipButton_handleControlEvent:UIControlEventTouchUpInside withBlock:flipButtonAction];
    [button2 setFrame:CGRectMake(0, 0, secondImage.size.width, secondImage.size.height)];    
 
    //create a container to hold them
    UIView *container = [[[UIView alloc] initWithFrame:button1.bounds] autorelease];
    [container addSubview:button1];
    
    //record state so we can access it later (in the block)
    objc_setAssociatedObject(button1, &amp;UIButtonFlipAltButtonKey, button2, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    objc_setAssociatedObject(button1, &amp;UIButtonFlipTransitionKey, [NSNumber numberWithInt:firstTransition], OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    objc_setAssociatedObject(button1, &amp;UIButtonFlipContainerViewKey, container, OBJC_ASSOCIATION_ASSIGN);
    
    objc_setAssociatedObject(button2, &amp;UIButtonFlipAltButtonKey, button1, OBJC_ASSOCIATION_ASSIGN);
    objc_setAssociatedObject(button2, &amp;UIButtonFlipTransitionKey, [NSNumber numberWithInt:secondTransition], OBJC_ASSOCIATION_ASSIGN);  //button1 is in charge of the retains initially
    objc_setAssociatedObject(button2, &amp;UIButtonFlipContainerViewKey, container, OBJC_ASSOCIATION_ASSIGN);
    
    //returns the container, because this is what needs to be added to your view
    return container;
}

@end
</code></pre></noscript></div>


<p>I am using a little-known technique of setting associated objects
using <code>objc_setAssociatedObject(...)</code>.  This uses the runtime to attach
state to an existing class without needing to subclass.</p>

<p>Now that you understand how it is all setup, the block body will now
make sense:</p>

<div><script src='https://gist.github.com/1261810.js?file=UIButtonCHButtonFlipBlock.m'></script>
<noscript><pre><code>/* Here is that block definition from above */

    UIButtonFlipActionBlock flipButtonAction = ^(id sender) {

        //get the alternate button &amp; container
        UIButton *otherButton = (UIButton *)objc_getAssociatedObject(sender, &amp;UIButtonFlipAltButtonKey);
        UIView *container = (UIView *)objc_getAssociatedObject(sender, &amp;UIButtonFlipContainerViewKey);
        
        //figure out our transition
        NSNumber *transitionNumber = (NSNumber *)objc_getAssociatedObject(sender, &amp;UIButtonFlipTransitionKey);
        UIViewAnimationTransition transition = (UIViewAnimationTransition)[transitionNumber intValue];
                
        [UIView animateWithDuration:duration animations:^ {
            
            [UIView setAnimationTransition:transition forView:container cache:YES];
            [UIView setAnimationCurve:curve];
            
            //the view has the last retain count on the sender button, so we need to retain it first
            objc_setAssociatedObject(otherButton, &amp;UIButtonFlipAltButtonKey, sender, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
            
            [sender removeFromSuperview];
            [container addSubview:otherButton];
            
            //sender no longer needs to retain the other button, because the view now is...
            objc_setAssociatedObject(sender, &amp;UIButtonFlipAltButtonKey, otherButton, OBJC_ASSOCIATION_ASSIGN);
            
        }];
        
        //call the original button handler
        [target performSelector:selector withObject:self];
    };
</code></pre></noscript></div>


<p>Usage is really easy.  I just created a bar button item with a custom
view, and was done.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="n">UIImage</span> <span class="o">*</span><span class="n">firstImage</span>  <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;btn-info.png&quot;</span><span class="p">];</span>
</div><div class='line'><span class="n">UIImage</span> <span class="o">*</span><span class="n">secondImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;btn-images.png&quot;</span><span class="p">];</span>
</div><div class='line'><span class="n">UIView</span> <span class="o">*</span><span class="n">container</span>    <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">flipButtonWithFirstImage:</span><span class="n">firstImage</span>
</div><div class='line'>                                              <span class="nl">secondImage:</span><span class="n">secondImage</span>
</div><div class='line'>                                          <span class="nl">firstTransition:</span><span class="n">UIViewAnimationTransitionFlipFromRight</span>
</div><div class='line'>                                         <span class="nl">secondTransition:</span><span class="n">UIViewAnimationTransitionFlipFromLeft</span>
</div><div class='line'>                                           <span class="nl">animationCurve:</span><span class="n">UIViewAnimationCurveEaseInOut</span>
</div><div class='line'>                                                 <span class="nl">duration:</span><span class="mf">0.8</span>
</div><div class='line'>                                                   <span class="nl">target:</span><span class="n">self</span>
</div><div class='line'>                                                 <span class="nl">selector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">flipContent</span><span class="p">)];</span>
</div><div class='line'>
</div><div class='line'><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">UIBarButtonItem</span> <span class="n">alloc</span><span class="p">]</span>
</div><div class='line'>  <span class="nl">initWithCustomView:</span><span class="n">container</span><span class="p">]</span> <span class="n">autorelease</span><span class="p">];</span>
</div></code></pre></td></tr></table></div></figure>

<p>The effect can be seen below.</p>

<p><video width='389' height='336' preload='none' controls poster=' https://flux88.s3.amazonaws.com/videos/button_flip1.jpeg'><source src='https://flux88.s3.amazonaws.com/videos/button_flip.m4v' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>Note that the flip effect on the main view is achieved separately, but
the 2 strategies share identical values for the animation, so the flip
transition types match, as well as the duration &amp; animation curve.</p>

<p>The code for this can be seen in the <a href="https://github.com/chaione/chaioneui">ChaiOneUI project on Github</a>.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/10/making-a-uibutton-flip-over/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Creating a Glow Effect for UILabel and UIButton</a></h1>
    
    
      <p class="meta">




<time datetime="2011-09-27 19:57:00 -0500" pubdate  updated >Sep 27<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>One recent iPhone design mockup called for a glowing effect for a
<code>UIButton</code>.</p>

<p>This can be accomplished with images, however I needed a series of
buttons to have the same glow effect, and it can easily be accomplished
with Core Graphics.</p>

<p>The first step is to include the Core Graphics headers:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="cp">#import &lt;QuartzCore/QuartzCore.h&gt;</span>
</div></code></pre></td></tr></table></div></figure>

<p>Next, the effect is achieved by using a shadow with no offset (meaning
the shadow will be directly underneath the text, not shifted down or to
the right).  The layer is then given a shadow radius &amp; opacity to allow
the shadow to bleed outward.  Unsetting <code>masksToBounds</code> will allow the
glow to be drawn even outside of the label&#8217;s frame. Finally the shadow color is set to either the
foreground color or something a bit lighter.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="n">UIColor</span> <span class="o">*</span><span class="n">color</span> <span class="o">=</span> <span class="n">button</span><span class="p">.</span><span class="n">currentTitleColor</span><span class="p">;</span>
</div><div class='line'><span class="n">button</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span> <span class="n">CGColor</span><span class="p">];</span>
</div><div class='line'><span class="n">button</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowRadius</span> <span class="o">=</span> <span class="mf">4.0f</span><span class="p">;</span>
</div><div class='line'><span class="n">button</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowOpacity</span> <span class="o">=</span> <span class="mf">.9</span><span class="p">;</span>
</div><div class='line'><span class="n">button</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeZero</span><span class="p">;</span>
</div><div class='line'><span class="n">button</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">masksToBounds</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
</div></code></pre></td></tr></table></div></figure>

<p>This effect works on plain <code>UILabel</code> or the <code>titleLabel</code> property of a
<code>UIButton</code>.  You can see the results of the effect here:</p>

<p><img class='image ' src='/images/uibutton-gloweffect.png' width='' height='' alt='' title=''></p>

<p>Don&#8217;t go overboard with this.  It&#8217;s a subtle effect, but looks great
when used effectively.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/09/introducing-appsites/">Introducing App Sites</a></h1>
    
    
      <p class="meta">




<time datetime="2011-09-20 08:46:00 -0500" pubdate  updated >Sep 20<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve not been that great about marketing Giggle Touch.  It&#8217;s a cool app,
kids like it, but most people don&#8217;t know about it.</p>

<p>The biggest reason was probably that I never set up a proper website for
it.  Doing a search would only yield a blog post that said it was
&#8220;coming soon.&#8221;</p>

<p>That&#8217;s all changed now.  I&#8217;d like to introduce <em>App Sites</em>.</p>

<h2><a href="http://appsites.heroku.com">App Sites</a></h2>

<p><img class='right ' src='/images/yourapphere.png' width='' height='' alt='' title=''></p>

<p>The premise is simple: <em>standup a website for an iPhone
app in minutes</em>.</p>

<p>Check it out here:
<a href="http://appsites.heroku.com">http://appsites.heroku.com</a>.</p>

<p>You can see the site in action by visiting the
<a href="http://appsites.heroku.com/giggletouch">Giggle Touch</a> page.</p>

<p>It&#8217;s free (for now) and gives you the ability to add features, a
description, a link back to the app, and a screenshot.</p>

<p>Planned upcoming features include:</p>

<ul>
<li>Custom domains</li>
<li>Multiple screenshots</li>
<li>Videos</li>
<li>Coming soon (if the app hasn&#8217;t launched yet)</li>
<li>More analytics</li>
</ul>


<p>If you have an iPhone app, I encourage you to create a page.  Let me
know what you think!</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/09/introducing-appsites/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/09/firebug-style-debugging-for-ios/">Firebug-Style Visual Debugging for iOS</a></h1>
    
    
      <p class="meta">




<time datetime="2011-09-16 10:56:00 -0500" pubdate  updated >Sep 16<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>Using a crazy helpful library called <a href="https://github.com/domesticcatsoftware/DCIntrospect">DC Introspect</a> you&#8217;re able to easily take an app running in the Simulator:</p>

<p><img class='image ' src='/images/simulator-before-introspection.png' width='' height='' alt='' title=''></p>

<p>And get visual frame debugging information like this:</p>

<p><img class='image ' src='/images/simulator-after-introspection.png' width='' height='' alt='' title=''></p>

<p>You can also click &amp; drag your mouse to get pixel information,
surrounding frames, print out detailed frame information in the console,
and even move frames around all while the app is running.</p>

<p>Using it is incredibly simple:</p>

<ul>
<li>Make sure you have <code>DEBUG</code> defined in your Preprocessor Macros:</li>
</ul>


<p><img class='image ' src='/images/debug-preprocessor-macro.png' width='' height='' alt='' title=''></p>

<ul>
<li><p>Download the code from https://github.com/domesticcatsoftware/DCIntrospect and drag the DCIntrospect/DCIntrospect folder into your project</p></li>
<li><p>In your Application Delegate class, make the following changes:</p></li>
</ul>


<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="cp">#import &quot;DCIntrospect.h&quot;</span>
</div></code></pre></td></tr></table></div></figure>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="c1">// in applicationDidFinishLaunching:</span>
</div><div class='line'>
</div><div class='line'><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">window</span> <span class="n">makeKeyAndVisible</span><span class="p">];</span>
</div><div class='line'>
</div><div class='line'><span class="cp">#ifdef TARGET_IPHONE_SIMULATOR</span>
</div><div class='line'>    <span class="p">[[</span><span class="n">DCIntrospect</span> <span class="n">sharedIntrospector</span><span class="p">]</span> <span class="n">start</span><span class="p">];</span>
</div><div class='line'><span class="cp">#endif</span>
</div></code></pre></td></tr></table></div></figure>

<p>Once that is done, the library will be loaded and you can use it.  When
the simulator launches, just press Spacebar to activate the tool.</p>

<p>Here are some keyboard shortcuts:</p>

<ul>
<li><code>o</code> - Outline all views</li>
<li><code>?</code> - Prints out a help view</li>
<li><code>f</code> - Flash on <code>drawRect:</code> calls</li>
<li><code>c</code> - Toggle showing coordinates</li>
<li><code>4 6 8 2</code> - Nudge the selected view left, right, up, down</li>
<li><code>0</code> - Recenter view where it was originally</li>
<li><code>9 7 3 1</code> - Modify Width &amp; Height of selected view</li>
</ul>


<p>You can also click &amp; drag with the mouse to get detailed information
about frames &amp; mouse position.</p>

<p>I am amazed at how awesome this library is. I&#8217;ll be using it in my
default toolbox from now on.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/09/firebug-style-debugging-for-ios/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/vim---could-not-invoke-jslint/">Vim - Could Not Invoke JSLint</a></h1>
    
    
      <p class="meta">




<time datetime="2011-08-26 08:59:00 -0500" pubdate  updated >Aug 26<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>If you&#8217;re running MacVim with Janus and have upgraded to Lion, you may
have noticed a little error when you open JavaScript files:</p>

<blockquote><p>Error detected while processing function 87_JSLint:
Line 33:
could not invoke JSLint!</p></blockquote>

<p>It seems many are having <a href="https://github.com/hallettj/jslint.vim/issues/13">this issue</a>.  There are 2 things to check:</p>

<ol>
<li>Make sure you have Node in your path.  Confirm this by typing <code>which
node</code> and make sure it resolves a binary somewhere on your system.</li>
<li>Open up your <code>~/.vimrc.local</code> and add this command:</li>
</ol>


<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class='vim'><div class='line'><span class="c">&quot; Use Node.js for JavaScript interpretation</span>
</div><div class='line'><span class="k">let</span> $JS_CMD<span class="p">=</span><span class="s1">&#39;node&#39;</span>
</div></code></pre></td></tr></table></div></figure>

<p>Kudos to <a href="http://github.com/eventualbuddha">eventualbuddha</a> for
figuring this out.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/08/vim---could-not-invoke-jslint/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/is-rails-exempt-from-software-principles/">Is Rails Exempt?</a></h1>
    
    
      <p class="meta">




<time datetime="2011-08-26 07:58:00 -0500" pubdate  updated >Aug 26<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>If you&#8217;ve been following the Ruby community recently, you&#8217;d notice that
there&#8217;s are people calling our Rails (and Rails developers) for treating
Rails as if it is somehow <em>exempt</em> from long-standing software
principles.</p>

<p><a href="http://osherove.com/">Roy Osherove</a>, a fairly well-known .NET developer and author of The <a href="http://artofunittesting.com/">Art of Unit Testing</a>, ventured into Ruby-land
recently and commented on twitter about how Rails&#8217;s
definition of unit &amp; integration is quite different from his.</p>

<p><img class='tweet ' src='/images/rails-unit-integration-tweet.png' width='' height='' alt='' title=''></p>

<p>I have to agree with Roy. Those in the TDD camp in .NET understood the
difference and were (from my experience) fairly cognizent of isolating
concerns and not mixing the 2 concepts. Some even go as far as to
isolate integration tests into their own assembly, providing a physical
separation further guaranteeing that a unit test project won&#8217;t touch
web services or the database.</p>

<p>It&#8217;s easy to assume from the outside that the Rails is just testing
nirvana and that <em>everyone</em> does it and it&#8217;s so easy.  Unfortunately it&#8217;s
just not the truth.  Rails (and Ruby) make testing really easy but that
means it&#8217;s even easier to do the wrong thing as well.</p>

<h2>Legacy Rails Apps</h2>

<p>Now that Rails is (gasp) over 7 years old you&#8217;re starting to see some
real legacy Rails applications out in the wild.</p>

<p><a href="http://twitter.com/avdi">Avdi Grimm</a> has a <a href="http://avdi.org/devblog/2011/08/22/your-code-is-my-hell/">good post</a> on the topic of how many of the Rails apps he comes to work on are in poor shape, technically.</p>

<blockquote><p>Here are a few examples, just to give you an idea of what I’m talking about:</p>

<p>“Design Patterns are a Java thing. In Ruby you just write code.”</p>

<p>“The warnings Ruby produces are dumb; just disable them.”</p>

<p>“Sure they aren’t technically Unit Tests, but isolating objects turned out to be kind of hard and besides nobody else is doing it.”</p>

<p>“Stuff like the Law of Demeter isn’t really as important in Ruby code”</p>

<p>“That’s only a problem in large projects” (implying that this project will never become large).</p></blockquote>

<p>I&#8217;ve certainly been guilty of some of this. Rails makes it easy to do
things that can turn out to be problematic. As with anything, you have
to be disciplined to notice the warning signs and act accordingly.</p>

<p>When testing is painful, you&#8217;re likely making mistakes. Some common
pain-points that I&#8217;ve experienced are:</p>

<ul>
<li>No tests - the app is hard to test because the design is poor. Classes
are too tightly coupled and don&#8217;t have clear delineation of
responsibilities.</li>
<li>Tests break for unrelated reasons - the tests are covering too much
behavior, so when a single behavior changes, many tests break.</li>
<li>Tests break when implementation changes - the tests are probably
utilizing too much mocking &amp; stubbing. The tests are coupled heavily
to a particular implementation.</li>
<li>Unclear what the problem is when a test breaks - Tests are probably
too coarse-grained and may contain too many assertions per test.</li>
</ul>


<p>These are just a sampling of what I&#8217;ve personally observed.</p>

<p>So why do many Rails developers ignore these concepts?</p>

<h2>Pragmatism at work</h2>

<p>Many rails tutorials (and the default Rails template) treats model tests
as <em>unit</em> tests. Since Rails models are by default based on Active
Record, they have data access baked into their core.  Doing proper unit
testing means you&#8217;re testing a logical unit.  If your test involves a
model operation that requires a database round-trip, that&#8217;s technically
an <em>integration</em> test.  But does it really matter?</p>

<p>Most Rails developers will tell you no. Consider this spec:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="n">describe</span> <span class="no">Post</span> <span class="k">do</span>
</div><div class='line'>  <span class="n">it</span> <span class="s2">&quot;should be initially unpublished&quot;</span> <span class="k">do</span>
</div><div class='line'>    <span class="no">Post</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">published</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="kp">false</span>
</div><div class='line'>  <span class="k">end</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure>

<p>This is a unit test. It tests a single piece of functionality and will
fail for just one reason.</p>

<p>Now, here&#8217;s another example:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="n">it</span> <span class="s2">&quot;should fetch published articles&quot;</span> <span class="k">do</span>
</div><div class='line'>  <span class="c1"># ?</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="c1"># post.rb</span>
</div><div class='line'><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</div><div class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">published</span>
</div><div class='line'>    <span class="n">where</span><span class="p">(</span><span class="s2">&quot;published_at &lt;= ?&quot;</span><span class="p">,</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
</div><div class='line'>  <span class="k">end</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure>

<p>How should you implement this spec?</p>

<p>If you were trying to avoid hitting the database you might intercept the
<code>where</code> call and assert the parameters passed to it. But surely this
isn&#8217;t the only way you could implement this method giving the same
behavior.  You might use <code>scopes</code> or another <code>where</code> call might actually
be added later that doesn&#8217;t affect the outcome of this method in any way
that this test is concerned about.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="n">it</span> <span class="s2">&quot;should fetch published articles&quot;</span> <span class="k">do</span>
</div><div class='line'>  <span class="mi">3</span><span class="o">.</span><span class="n">times</span> <span class="p">{</span> <span class="no">Factory</span><span class="o">.</span><span class="n">create</span> <span class="ss">:article</span> <span class="p">}</span>
</div><div class='line'>  <span class="n">future_post</span> <span class="o">=</span> <span class="no">Factory</span><span class="o">.</span><span class="n">create</span> <span class="ss">:article</span><span class="p">,</span> <span class="ss">:published_at</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="o">.</span><span class="n">days</span><span class="o">.</span><span class="n">from_now</span>
</div><div class='line'>  <span class="n">posts</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">published</span>
</div><div class='line'>  <span class="n">posts</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="mi">3</span>
</div><div class='line'>  <span class="n">post</span><span class="o">.</span><span class="n">should_not</span> <span class="kp">include</span> <span class="n">future_post</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure>

<p>This test hits the database (numerous times, in fact) but it&#8217;s testing
<em>exactly</em> the behavior we need.  We aren&#8217;t testing implementation, we&#8217;re
testing that the behavior works as intended.  If we somehow muck with
the query, breaking it, this test will fail.  If we change the
implementation to use some other query means (scopes or whatever) this
test will still pass.</p>

<p>Is it so bad that the test hits the database?</p>

<p>There are drawbacks of course:</p>

<ul>
<li>The test requires a database, thus you have to migrate</li>
<li>The <code>database_cleaner</code> gem will have to be present to clean out the
database before each run</li>
<li>These database statements make the test suite a LOT slower, so large
test suites will eventually suffer.</li>
<li>The tests could fail if the database isn&#8217;t present (or migrated), or
if the query is incorrect.  But this isn&#8217;t likely to happen since
we&#8217;re using a tested framework (ActiveRecord).</li>
</ul>


<p>Ultimately this isn&#8217;t really a unit test at all.  It&#8217;s an integration
test.  So is <code>spec/models/post_spec.rb</code> the wrong place for this stuff?</p>

<p>The question eventually comes down to this: <em>What is more valuable?  A
fast, isolated test suite?  Or a test suite that breaks for the right
reasons?</em></p>

<h2>Don&#8217;t throw out good practices just because it&#8217;s Ruby</h2>

<p>I think it&#8217;s important to be cognizant of software paradigms and use
them where they make sense. It&#8217;s also important to recognize when
practices are being ignored because &#8220;celebrities&#8221; aren&#8217;t touting them.</p>

<p>It is still valuable, however, to keep a fresh eye on old assumptions. Don&#8217;t
always take things as gospel just because that&#8217;s the way they have
always been. One
of the things I love about the Ruby community is how willing people are
to rock the boat &amp; try something new.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/08/is-rails-exempt-from-software-principles/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/when-viewwillappear-isnt-called/">When viewWillAppear: Isn&#8217;t Called</a></h1>
    
    
      <p class="meta">




<time datetime="2011-08-24 10:11:00 -0500" pubdate  updated >Aug 24<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>The <code>UIViewController</code> lifecycle is pretty simple.  <code>viewDidLoad</code> is
called when the view is loaded (usually from a XIB) and when the view
controller&#8217;s view is about to be displayed <code>viewWillAppear:</code> gets called
(and <code>viewWillDisappear:</code> when it goes away).</p>

<p>The problem is, when you have a non-standard view hierarchy (like my
current app) these methods don&#8217;t get called. The Apple docs have this to
say about the problem:</p>

<blockquote><p>Warning: If the view belonging to a view controller is added to a view hierarchy directly, the view controller will not receive this message. If you insert or add a view to the view hierarchy, and it has a view controller, you should send the associated view controller this message directly. Failing to send the view controller this message will prevent any associated animation from being displayed.</p></blockquote>

<p>In my application I have a persistent bar at the bottom of the screen,
so my <code>UINavigationController</code> only owns a portion of the screen.  Thus, my
<code>RootViewController</code> (which owns these 2 portions) is always <em>active</em>.</p>

<p><img class='screenshot ' src='/images/non-standard-nav-frame.png' width='' height='' alt='' title=''></p>

<p>I recently came upon a requirement that needed to leverage
<code>viewWillAppear:</code> and <code>viewWillDisappear:</code> in order to decorate the
bottom bar with some additional information. Since this is a view
controller a few layers deep in the hierarchy, the methods weren&#8217;t being
called.</p>

<p>Luckly, there is a fix to this. The navigation controller can notify
its <code>delegate</code> when it changes view controllers.</p>

<p>Start off in the view controller that is the root of the navigation
controller hierarchy.  Make it conform to the
<code>UINavigationControllerDelegate</code> protocol.  We&#8217;ll also need an ivar to
store the last view controller that <em>appeared</em> so that we can notify
when it <em>disappears</em>.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="k">@interface</span> <span class="nc">MyRootViewController</span> : <span class="nc">UIViewController</span>
</div><div class='line'>    <span class="o">&lt;</span><span class="n">UINavigationControllerDelegate</span><span class="o">&gt;</span> <span class="p">{</span>
</div><div class='line'>      <span class="n">UIViewController</span> <span class="o">*</span><span class="n">_lastViewController</span><span class="p">;</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'><span class="c1">// methods</span>
</div><div class='line'>
</div><div class='line'><span class="k">@end</span>
</div></code></pre></td></tr></table></div></figure>

<p>In the implementation, in do the following:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="k">@implementation</span> <span class="nc">MyRootViewController</span>
</div><div class='line'>
</div><div class='line'><span class="c1">// other stuff</span>
</div><div class='line'>
</div><div class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
</div><div class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</div><div class='line'>    <span class="c1">// ...</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">navigationController:</span><span class="p">(</span><span class="n">UINavigationController</span> <span class="o">*</span><span class="p">)</span><span class="n">navigationController</span>
</div><div class='line'>      <span class="nl">willShowViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="n">viewController</span> <span class="nl">animated:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="n">animated</span> <span class="p">{</span>
</div><div class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">_lastViewController</span><span class="p">)</span> <span class="p">{</span>
</div><div class='line'>        <span class="p">[</span><span class="n">_lastViewController</span> <span class="nl">viewWillDisappear:</span><span class="n">animated</span><span class="p">];</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="p">[</span><span class="n">viewController</span> <span class="nl">viewWillAppear:</span><span class="n">animated</span><span class="p">];</span>
</div><div class='line'>    <span class="n">_lastViewController</span> <span class="o">=</span> <span class="n">viewController</span><span class="p">;</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>If you need support for <code>viewDidAppear</code> and <code>viewDidDisappear</code> then
you&#8217;d have to implement this method as well:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='objc'><div class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">navigationController:</span><span class="p">(</span><span class="n">UINavigationController</span> <span class="o">*</span><span class="p">)</span><span class="n">navigationController</span>
</div><div class='line'>       <span class="nl">didShowViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="n">viewController</span>
</div><div class='line'>                    <span class="nl">animated:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="n">animated</span><span class="p">;</span>
</div></code></pre></td></tr></table></div></figure>

<p>After doing this, your view controllers should start receiving the
<code>viewWillAppear:</code> and <code>viewWillDisappear:</code> methods successfully.</p>
</div>
  <footer>
    <a rel="full-article" href="/2011/08/when-viewwillappear-isnt-called/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/moving-my-blog/">Moving My Blog</a></h1>
    
    
      <p class="meta">




<time datetime="2011-08-21 00:00:00 -0500" pubdate  updated >Aug 21<span>st</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve decided to transition over to a new blog.</p>


<p>The reasons? Mostly because I&#8217;m questioning more &amp; more the need to have a dynamic blog that I need to maintain. Static HTML blog generators are very interesting and I thought I&#8217;d give one a try.</p>


<p>I&#8217;ll leave this one around for historical reasons. It gets a decent amount of traffic and has content going back to 2004.<br /></p>


<p>So without further ado I present my new blog, <a href="http://benscheirman.com">Fickle Bits</a>.<br /></p>


<p>(Note to RSS readers, your feeds will not auto-update. Subscribe to the new blog here: <a href="http://feeds.feedburner.com/ficklebits" target="_blank">Subscribe</a> )<br /></p>

</div>
  <footer>
    <a rel="full-article" href="/2011/08/moving-my-blog/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/10/appsites-is-now-appkickstand/">Appsites Is Now AppKickstand</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/sharing-vim-configuration-between-machines/">Sharing Vim Configuration Between Machines</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/making-a-uibutton-flip-over/">Making a UIButton Flip Over</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/creating-a-glow-effect-for-uilabel-and-uibutton/">Creating a Glow Effect for UILabel and UIButton</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/introducing-appsites/">Introducing App Sites</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
