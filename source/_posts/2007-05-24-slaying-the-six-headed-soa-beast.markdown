--- 
layout: post
title: Slaying the Six-Headed SOA Beast
date: 2007-5-24
comments: true
link: false
---
<p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">For the past several years people have been hearing about Service Oriented Architecture through various mediums across the internet.<span style="mso-spacerun: yes">&nbsp; </span>Most of what you would read would be academic material that was difficult to think about in concrete terms.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Still today there are numerous articles and books on the subject that talk so much in theory that there isn&rsquo;t enough good direction on where to go.<span style="mso-spacerun: yes">&nbsp; </span>For Joe Developer at Company XYZ, how can he take advantage of these seemingly great ideas on his next .NET (or whatever) project?</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Unfortunately, this lack of good direction has led to a misconception about what SOA is and how it should be implemented.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font size="3"><font face="Calibri">At its heart, SOA is the next evolution of development.<span style="mso-spacerun: yes">&nbsp; </span>Just as we had objects to encapsulate our behavior and compose applications of objects, we now can encapsulate core functionality as services so that they are reusable across the enterprise, or even to our customers.<span style="mso-spacerun: yes">&nbsp; </span></font></font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">We can also take these services and compose them to create more complex services, and this can be taken to the extreme where you model every process that the business performs as a service.<span style="mso-spacerun: yes">&nbsp; </span>The idea is that new applications can be built without the need to deal with implementation, it can be done completely by composing services.<span style="mso-spacerun: yes">&nbsp; </span>Want to change the way the business functions?<span style="mso-spacerun: yes">&nbsp; </span>Rewire the business process services in a way that better suits the business.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Unfortunately, when you talk this high level, you often gloss over the technical guidance and people take the advice and run in any direction.<span style="mso-spacerun: yes">&nbsp; </span>It&rsquo;s like a scavenger hunt where the treasure map is handed out and it contains details about the glorious treasure, but not the direction on how to get there.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">This also leads to the misconception that SOA == Web Services, which is not the case.<span style="mso-spacerun: yes">&nbsp; </span>More on this in a minute.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font size="3"><font face="Calibri">So back at Company XYZ, Joe Developer is implementing his next project with an SOA.<span style="mso-spacerun: yes">&nbsp; </span>His management has also read about SOA and knows that it&rsquo;s the right thing to do.<span style="mso-spacerun: yes">&nbsp; </span>In fact, they may even be pushing him in this direction.<span style="mso-spacerun: yes">&nbsp; </span>He creates his business logic, he creates his UI.<span style="mso-spacerun: yes">&nbsp; </span>Next comes the service layer.<span style="mso-spacerun: yes">&nbsp; </span>Joe thinks to himself, what better way to implement services than to be the first consumer!<span style="mso-spacerun: yes">&nbsp; </span>It will be perfect!<span style="mso-spacerun: yes">&nbsp; </span>Then any new application can access the functionality and everything will be great.<span style="mso-spacerun: yes">&nbsp; </span>I&rsquo;ll have an SOA Seal of Approval on my app because I used web services and my management will be happy.<span style="mso-spacerun: yes">&nbsp; </span>And my application will be unnecessarily SLOW.<span style="mso-spacerun: yes">&nbsp; </span>And complicated.<span style="mso-spacerun: yes">&nbsp; </span><b style="mso-bidi-font-weight: normal">For no reason.<?xml:namespace prefix ="" o ns ="" "urn:schemas-microsoft-com:office:office" /><o:p></o:p></b></font></font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">The reality is that Web Services are meant for interoperability.<span style="mso-spacerun: yes">&nbsp; </span>They are meant to be accessed across a variety of mediums and ports.<span style="mso-spacerun: yes">&nbsp; </span>They are great for platform interoperability and cross-political communication between applications.<span style="mso-spacerun: yes">&nbsp; </span>They are not suitable for inter-company, .NET to .NET interaction.<span style="mso-spacerun: yes">&nbsp; </span>The overhead of WSDL, SOAP, XML, etc is wasted in this scenario.<span style="mso-spacerun: yes">&nbsp; </span>Consuming a web service is not efficient.<span style="mso-spacerun: yes">&nbsp; </span>To combat this overhead, it is advised to make your remote calls as coarse-grained as possible.<span style="mso-spacerun: yes">&nbsp; </span>Chatty remote calls will <b style="mso-bidi-font-weight: normal">kill</b> an applications performance.<span style="mso-spacerun: yes">&nbsp; </span>So now we are designing <b style="mso-bidi-font-weight: normal">our (!) </b>application around the limitation of a heavyweight service layer.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">This is something that I see all too often. </font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><o:p><font face="Calibri" size="3"><strong>UI<br />SERVICE AGENTS<br />WEB SERVICE LAYER<br />BUSINESS&nbsp;LOGIC LAYER<br />DATA ACCESS LAYER</strong></font></o:p><o:p><font size="+0"><strong><br /></strong></font></o:p><font size="3"><font face="Calibri"><o:p>&nbsp;<br /></o:p>A better solution would be to design your application the way that good software engineering principles have taught you.<span style="mso-spacerun: yes">&nbsp; </span>Separate responsibilities.<span style="mso-spacerun: yes">&nbsp; </span>Create a domain model that represents your problem domain.<span style="mso-spacerun: yes">&nbsp; </span>Speak in terms of your domain.<span style="mso-spacerun: yes">&nbsp; </span>Leverage object oriented programming.</font></font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Then, when management decides that the functionality that you have created would be suitable to expose outside the company, or to their Java project that is currently underway, you can introduce a service layer.<span style="mso-spacerun: yes">&nbsp; </span>The service layer consumes your existing business logic layer.<span style="mso-spacerun: yes">&nbsp; </span>The idea is to introduce a more coarse-grained interface suitable for remote calls.<span style="mso-spacerun: yes">&nbsp; </span>You create Data Transfer Objects that aggregate your domain objects and are more stable for a service contract.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">This is a much better approach, because we take into account the fact that we <b style="mso-bidi-font-weight: normal">can</b> expose the functionality of services, but we should not shoot ourselves in the foot to do so.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Now getting back to the misconception of SOA == Web Services.<span style="mso-spacerun: yes">&nbsp; </span>Why is this so common to see?<span style="mso-spacerun: yes">&nbsp; </span>First, the term Web Services is probably partially to blame.<span style="mso-spacerun: yes">&nbsp; </span>A service can be native .NET code, it can be a remoting interface, it can be SOAP over HTTP.<span style="mso-spacerun: yes">&nbsp; </span>A more effective service oriented architecture (especially one <i style="mso-bidi-font-style: normal">within</i> an application) is achieved by choosing the best medium for the circumstances.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="C
alibri" size="3">I think it&rsquo;s time for an example.<span style="mso-spacerun: yes">&nbsp; </span>Say we are writing an application that calculates massive financial data for our enterprise.<span style="mso-spacerun: yes">&nbsp; </span>One component of this will calculate the exchange rate for many currencies.<span style="mso-spacerun: yes">&nbsp; </span>Ignoring the specifics of the implementation, how should we reuse this component so that the entire enterprise can access it?<span style="mso-spacerun: yes">&nbsp; </span>We want to take advantage of a plain .NET to .NET inter-process call because it&rsquo;s the fastest.<span style="mso-spacerun: yes">&nbsp; </span>We&rsquo;d also like to expose this to other .NET applications within our corporation.<span style="mso-spacerun: yes">&nbsp; </span>Finally we want to use this service in our Java system as well.<span style="mso-spacerun: yes">&nbsp; </span>How can we accomplish all of these without just resorting to the lowest common denominator?</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">One of the great things that I learned while studying Enterprise SOA in Paris was what the IBM guys call a Service Component Architecture, or SCA.<span style="mso-spacerun: yes">&nbsp; </span>This architecture is enables services to be composable.<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>The WebSphere Integration Developer emphasizes modeling all of your business processes as composable services.<span style="mso-spacerun: yes">&nbsp; </span>Most of these will be Java to Java calls, but some may not.<span style="mso-spacerun: yes">&nbsp; </span>What they do is have you design your interface using a GUI, which spits out the WSDL interfaced and the Java interface.<span style="mso-spacerun: yes">&nbsp; </span><i style="mso-bidi-font-style: normal">The best flavor of interface is chosen</i> depending on the circumstances.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">So we can solve the above problem by having one single interface, with both a .NET and WSDL versions.<span style="mso-spacerun: yes">&nbsp; </span>The configuration can determine which is used to achieve the best results.</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">Hopefully I&rsquo;m not leaving out some core SOA concepts (I&rsquo;m sure I am).<span style="mso-spacerun: yes">&nbsp; </span>What about you?<span style="mso-spacerun: yes">&nbsp; </span>Do you see too many mis-uses of SOA like I do?<span style="mso-spacerun: yes">&nbsp; </span>What other techniques can help bring the industry back to reality?</font></p><p class="MsoNormal" style="MARGIN: 0in 0in 10pt"><font face="Calibri" size="3">(I also must apologize for such a long-winded post.<span style="mso-spacerun: yes">&nbsp; </span>My bus is stuck on an HOV lane (one single lane with walls) in rush hour traffic.<span style="mso-spacerun: yes">&nbsp; </span>I&rsquo;ve been here for over an hour already.)</font></p><div class="bjtags">Tags:<a rel="tag" href="http://technorati.com/tag/SOA">SOA</a></div>
