--- 
layout: post
title: The Partial function in MochiKit
date: 2006-8-23
comments: true
link: false
---
<p><a title="MochiKit - Makes Javascript Suck Less" href="http://www.mochikit.com/" target="_blank">MochiKit</a>&nbsp;is awesome.&nbsp; I&rsquo;ve only begun to scratch the surface of the power in this framework.</p><p>During my demo I had a hard time explaining what the <em><strong>partial</strong></em> function does.&nbsp; I have never been a Python developer, so MochiKit&rsquo;s influence is foreign to me.&nbsp; I do appreciate the simplicity of the syntax.</p><p>Partial is aptly named.&nbsp; It is basically a partial function call, wrapped in an object.&nbsp; Why would you want this, I hear you say?&nbsp; Consider the following:</p><div style="FONT-SIZE: 9pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><div style="FONT-SIZE: 9pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: green">// $('ctrlid') is MochiKits alias of document.getElementById('ctrlid')</span></p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">$(<span style="COLOR: maroon">'txtbox'</span>).onchange = filterText(<span style="COLOR: maroon">'some input'</span>); <span style="COLOR: green">//wrong!&nbsp; the function will be called immediately!</span></p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">$(<span style="COLOR: maroon">'txtbox'</span>).onchange = function() <span style="COLOR: green">//need an inline function wrapper to make the function call</span></p><p style="MARGIN: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filterText(<span style="COLOR: maroon">'some input'</span>);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">$(<span style="COLOR: maroon">'txtbox'</span>).onchange = partial(filterText, <span style="COLOR: maroon">'some input'</span>); <span style="COLOR: green">//partial separates the function from the argument(s)</span></p><p style="MARGIN: 0px"><span style="COLOR: green"></span>&nbsp;</p></div></div><p>In this example, the top line is setting the onchange event handler of a textbox to a function call.&nbsp; But Javascript doesn&rsquo;t know that you want a function pointer here, it looks like you want to call the method and return something.&nbsp; So the solution that you can do is write a single function that wraps the function call that you want to make.&nbsp; This can be done inline like I do above.&nbsp; Partial comes in and cleans up those 3 lines and pushes them into 1 line.&nbsp; </p><p>Next take a look at this:</p><div style="FONT-SIZE: 9pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px">&nbsp;function startsWith(character, target)</p><p style="MARGIN: 0px">&nbsp;{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//searches target for character, if found... returns true</span></p><p style="MARGIN: 0px">&nbsp;}</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp;var startsWithCapitalB = partial(startsWith, <span style="COLOR: maroon">'B'</span>);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp;alert(startsWithCapitalB(<span style="COLOR: maroon">'Ben'</span>)); <span style="COLOR: green">//true</span></p><p style="MARGIN: 0px">&nbsp;alert(startsWithCapitalB(<span style="COLOR: maroon">'Henry'</span>)); <span style="COLOR: green">//false</span></p></div><!--EndFragment--><p>Here you see where partial gets its name.&nbsp; You can partially apply a function with <strong><em>partial</em></strong> and get a function variable returned!</p><p>Partial is incredibly powerful when applied with other functional programming methods like <strong><em>map</em></strong>.</p><p><strong>Now playing:</strong> <a href="http://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?artistTerm=Modest Mouse">Modest Mouse</a> - <a href="http://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?songTerm=Black Cadillacs&amp;artistTerm=Modest Mouse">Black Cadillacs</a></p>
