--- 
layout: post
title: A Helpful Formatter for TimeSpan
date: 2009-12-7
comments: true
link: false
---
<p>I am doing a healthy amount of logging in a multi-threaded app, and I frequently need to output a TimeSpan value.&#160; The default ToString() implementation for TimeSpan outputs the time in a 04:00:00 format, which isn’t as friendly to read as “4 hours”.</p>  <p>Here is a quick extension method that will give you this type of output.&#160; </p>  <script src="http://gist.github.com/250895.js?file=TimeSpanFormatter.cs"></script> <p>This code calls a Quanitify method, that is defined as:</p>  <script src="http://gist.github.com/250895.js?file=QuantifyString.cs"></script> <p>…and the (naive) Pluralize() method looks like:</p>  <script src="http://gist.github.com/250895.js?file=Pluralize+string+%28naive%29.cs"></script>  <p>Notice that it only deals with 1 unit at a time, so if you have something like 36 hours it will treat it as 1.5 days (which is acceptable in my scenario).</p>  <p>The output looks like the table below:</p>  <table border="1" cellspacing="0" cellpadding="2" width="400"><tbody>     <tr>       <td valign="top" width="200">         <p>TimeSpan.FromDays(1)</p>       </td>        <td valign="top" width="200">1 day</td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromDays(2)</p>       </td>        <td valign="top" width="200">2 days</td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromHours(36)</p>       </td>        <td valign="top" width="200">1.5 days</td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromHours(6)</p>       </td>        <td valign="top" width="200">6 hours</td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromHours(1)           <br /></p>       </td>        <td valign="top" width="200">         <p>1 hour</p>       </td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromMinutes(34)           <br /></p>       </td>        <td valign="top" width="200">         <p>34 minutes</p>       </td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromMinutes(1)           <br /></p>       </td>        <td valign="top" width="200">1 minute</td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromSeconds(70)</p>       </td>        <td valign="top" width="200">         <p>1.2 minutes</p>       </td>     </tr>      <tr>       <td valign="top" width="200">         <p>TimeSpan.FromMilliseconds(800)</p>       </td>        <td valign="top" width="200">         <p>800 milliseconds</p>       </td>     </tr>   </tbody></table>
